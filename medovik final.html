<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üçØ ÿ≠ÿßÿ≥ÿ®ÿ© Medovik ÿßŸÑÿπŸÑŸÖŸäÿ© - ÿßŸÑÿ•ÿµÿØÿßÿ± ÿßŸÑŸÉÿßŸÖŸÑ</title>
    <style>
        :root {
            --primary: #1a365d;
            --secondary: #2d3748;
            --accent: #3182ce;
            --success: #38a169;
            --warning: #d69e2e;
            --danger: #e53e3e;
            --bg: #f7fafc;
            --card: #ffffff;
            --border: #e2e8f0;
            --text: #2d3748;
            --text-light: #718096;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: var(--bg);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px;
            background: var(--card);
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--border);
        }

        h1 {
            color: var(--primary);
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .subtitle {
            color: var(--text-light);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .tabs-container {
            background: var(--card);
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--border);
            overflow: hidden;
        }

        .tab-buttons {
            display: flex;
            background: var(--primary);
            overflow-x: auto;
        }

        .tab-btn {
            padding: 15px 20px;
            background: transparent;
            border: none;
            color: white;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            white-space: nowrap;
            border-bottom: 3px solid transparent;
        }

        .tab-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .tab-btn.active {
            background: var(--accent);
            border-bottom-color: white;
        }

        .tab-content {
            padding: 30px;
        }

        .tab-panel {
            display: none;
        }

        .tab-panel.active {
            display: block;
        }

        h2 {
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border);
        }

        h3 {
            color: var(--secondary);
            margin: 25px 0 15px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--secondary);
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
        }

        .btn {
            padding: 12px 24px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            background: #2c5aa0;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--secondary);
        }

        .btn-success {
            background: var(--success);
        }

        .btn-warning {
            background: var(--warning);
        }

        .btn-danger {
            background: var(--danger);
        }

        .result-box {
            background: var(--bg);
            padding: 20px;
            border-radius: 8px;
            border: 1px solid var(--border);
            margin-top: 20px;
        }

        .quality-score {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            margin: 10px 0;
        }

        .score-high { background: #c6f6d5; color: #22543d; }
        .score-medium { background: #fefcbf; color: #744210; }
        .score-low { background: #fed7d7; color: #742a2a; }

        .progress-bar {
            height: 10px;
            background: #e2e8f0;
            border-radius: 5px;
            margin: 15px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 5px;
            transition: width 0.5s ease;
        }

        .progress-high { background: var(--success); }
        .progress-medium { background: var(--warning); }
        .progress-low { background: var(--danger); }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid var(--border);
        }

        th {
            background: var(--primary);
            color: white;
            font-weight: 600;
        }

        tr:hover {
            background: #f7fafc;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-right: 4px solid;
        }

        .alert-info {
            background: #ebf8ff;
            border-right-color: var(--accent);
            color: #2c5282;
        }

        .alert-success {
            background: #f0fff4;
            border-right-color: var(--success);
            color: #22543d;
        }

        .alert-warning {
            background: #fffaf0;
            border-right-color: var(--warning);
            color: #744210;
        }

        .alert-danger {
            background: #fff5f5;
            border-right-color: var(--danger);
            color: #742a2a;
        }

        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .comparison-box {
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }

        .comparison-before {
            background: #fff5f5;
            border: 1px solid #fed7d7;
        }

        .comparison-after {
            background: #f0fff4;
            border: 1px solid #c6f6d5;
        }

        .timeline {
            border-right: 3px solid var(--accent);
            padding-right: 25px;
            margin: 25px 0;
        }

        .timeline-item {
            position: relative;
            padding: 15px 0;
            margin-bottom: 20px;
        }

        .timeline-item:before {
            content: '';
            position: absolute;
            right: -28px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent);
            border: 4px solid white;
            box-shadow: 0 0 0 2px var(--accent);
        }

        .timeline-time {
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 6px;
            font-size: 16px;
        }

        .timeline-temp {
            color: var(--warning);
            font-weight: 600;
            margin: 5px 0;
        }

        .timeline-temp.danger { color: var(--danger); }
        .timeline-temp.warning { color: var(--warning); }
        .timeline-temp.success { color: var(--success); }

        .method-card {
            background: white;
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .method-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .temp-badge {
            background: var(--warning);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 13px;
        }

        .text-parser-section, .advanced-scaling-section {
            margin: 25px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        .star-rating {
            display: flex;
            direction: ltr;
            margin: 10px 0;
        }

        .star {
            font-size: 24px;
            color: #e2e8f0;
            cursor: pointer;
            transition: color 0.2s;
        }

        .star.active, .star:hover {
            color: #f59e0b;
        }

        .scaling-mode-toggle {
            display: flex;
            margin-bottom: 20px;
            border: 1px solid var(--border);
            border-radius: 8px;
            overflow: hidden;
        }

        .btn-mode {
            flex: 1;
            border-radius: 0;
            background: var(--card);
            color: var(--text);
        }

        .btn-mode.active {
            background: var(--accent);
            color: white;
        }

        .scaling-content {
            display: none;
        }

        .scaling-content.active {
            display: block;
        }

        .advisor-detail {
            background: white;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
        }

        .advisor-detail h4 {
            margin-bottom: 10px;
            color: var(--primary);
        }

        .advisor-effects {
            background: #f7fafc;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }

        .advisor-solution {
            background: #f0fff4;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            border-right: 3px solid var(--success);
        }

        .troubleshooting-wizard {
            background: white;
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }

        .wizard-step {
            display: none;
        }

        .wizard-step.active {
            display: block;
        }

        .problem-option {
            display: block;
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--border);
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .problem-option:hover {
            border-color: var(--accent);
            background: #f0f9ff;
        }

        .solution-card {
            background: #f0fff4;
            border: 1px solid #c6f6d5;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
        }

        .method-content {
            display: none;
        }

        .method-content.active {
            display: block;
        }

        .reverse-calculator-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid var(--border);
        }

        .prediction-warning {
            background: #fff5f5;
            border: 1px solid #fed7d7;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .learning-insights {
            background: #f0fff4;
            border: 1px solid #c6f6d5;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .input-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 768px) {
            .tab-buttons {
                flex-direction: column;
            }
            
            .tab-btn {
                width: 100%;
                text-align: center;
            }
            
            .comparison {
                grid-template-columns: 1fr;
            }
            
            .input-grid {
                grid-template-columns: 1fr;
            }
            
            body {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üçØ ÿ≠ÿßÿ≥ÿ®ÿ© Medovik ÿßŸÑÿπŸÑŸÖŸäÿ© - ÿßŸÑÿ•ÿµÿØÿßÿ± ÿßŸÑŸÉÿßŸÖŸÑ</h1>
            <p class="subtitle">ÿ£ÿØÿßÿ© ÿπŸÑŸÖŸäÿ© ŸÖÿ™ŸÉÿßŸÖŸÑÿ© ÿ™ÿπÿ™ŸÖÿØ ÿπŸÑŸâ ÿ£ÿ≠ÿØÿ´ ÿßŸÑÿ£ÿ®ÿ≠ÿßÿ´ ŸÅŸä ŸÉŸäŸÖŸäÿßÿ° ÿßŸÑÿÆÿ®ÿ≤</p>
        </header>

        <div class="tabs-container">
            <div class="tab-buttons">
                <button class="tab-btn active" data-tab="analyzer">üìä ÿßŸÑŸÖÿ≠ŸÑŸÑ ÿßŸÑÿπŸÑŸÖŸä</button>
                <button class="tab-btn" data-tab="converter">üîÑ ÿßŸÑŸÖÿ≠ŸàŸÑ ÿßŸÑÿ∞ŸÉŸä</button>
                <button class="tab-btn" data-tab="scientific">üî¨ ÿßŸÑÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿπŸÑŸÖŸäÿ©</button>
                <button class="tab-btn" data-tab="tempering">üß™ ÿ≠ÿßÿ≥ÿ®ÿ© ÿßŸÑÿ™ŸÖÿ®ÿ±ŸÜÿ¨</button>
                <button class="tab-btn" data-tab="troubleshooting">üîß ŸÖÿ≥ÿ™ŸÉÿ¥ŸÅ ÿßŸÑŸÖÿ¥ÿßŸÉŸÑ</button>
                <button class="tab-btn" data-tab="calculator">üìê ÿ≠ÿßÿ≥ÿ®ÿ© ÿßŸÑÿ∑ÿ®ŸÇÿßÿ™</button>
                <button class="tab-btn" data-tab="advisor">‚ö†Ô∏è ÿßŸÑŸÖÿ≥ÿ™ÿ¥ÿßÿ± ÿßŸÑÿπŸÑŸÖŸä</button>
                <button class="tab-btn" data-tab="library">üíæ ŸÖŸÉÿ™ÿ®ÿ© ÿßŸÑŸàÿµŸÅÿßÿ™</button>
            </div>

            <div class="tab-content">
                <!-- Tab 1: ÿßŸÑŸÖÿ≠ŸÑŸÑ ÿßŸÑÿπŸÑŸÖŸä -->
                <div class="tab-panel active" id="analyzer">
                    <h2>üìä ÿßŸÑŸÖÿ≠ŸÑŸÑ ÿßŸÑÿπŸÑŸÖŸä</h2>
                    <div class="alert alert-info">
                        <strong>üí° ÿßŸÑŸÖÿØÿÆŸÑÿßÿ™ ÿßŸÑŸÖÿ´ÿßŸÑŸäÿ© ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿßŸÑÿ£ÿ®ÿ≠ÿßÿ´:</strong> ÿßŸÑÿØŸÇŸäŸÇ: 500ÿ∫ÿå ÿßŸÑÿ≤ÿ®ÿØÿ©: 120ÿ∫ÿå ÿßŸÑÿ≥ŸÉÿ±: 200ÿ∫ÿå ÿßŸÑÿπÿ≥ŸÑ: 100ÿ∫ÿå ÿßŸÑÿ®Ÿäÿ∂: 95ÿ∫ÿå ÿßŸÑÿµŸàÿØÿß: 5.5ÿ∫
                    </div>

                    <div class="input-group">
                        <label for="flour">ÿØŸÇŸäŸÇ (ÿ¨ÿ±ÿßŸÖ):</label>
                        <input type="number" id="flour" value="500" min="0" step="1">
                    </div>

                    <div class="input-group">
                        <label for="butter">ÿ≤ÿ®ÿØÿ© (ÿ¨ÿ±ÿßŸÖ):</label>
                        <input type="number" id="butter" value="120" min="0" step="1">
                    </div>

                    <div class="input-group">
                        <label for="sugar">ÿ≥ŸÉÿ± (ÿ¨ÿ±ÿßŸÖ):</label>
                        <input type="number" id="sugar" value="200" min="0" step="1">
                    </div>

                    <div class="input-group">
                        <label for="honey">ÿπÿ≥ŸÑ (ÿ¨ÿ±ÿßŸÖ):</label>
                        <input type="number" id="honey" value="100" min="0" step="1">
                    </div>

                    <div class="input-group">
                        <label for="eggs">ÿ®Ÿäÿ∂ (ÿ¨ÿ±ÿßŸÖ):</label>
                        <input type="number" id="eggs" value="95" min="0" step="1">
                    </div>

                    <div class="input-group">
                        <label for="soda">ÿ®ŸäŸÉŸÜÿ¨ ÿµŸàÿØÿß (ÿ¨ÿ±ÿßŸÖ):</label>
                        <input type="number" id="soda" value="5.5" min="0" step="0.1">
                    </div>

                    <button class="btn" id="analyze-btn">üß™ ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑŸàÿµŸÅÿ©</button>
                    <button class="btn btn-secondary" id="reset-btn">üîÑ ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ</button>

                    <!-- ŸÖÿ≠ŸÑŸÑ ÿßŸÑŸàÿµŸÅÿßÿ™ ÿßŸÑŸÖÿ≠ÿ≥ŸÜ -->
                    <div class="text-parser-section">
                        <h3>üìù ŸÖÿ≠ŸÑŸÑ ÿßŸÑŸàÿµŸÅÿßÿ™ (ÿßŸÜÿ≥ÿÆ ŸàÿßŸÑÿµŸÇ ŸàÿµŸÅÿ™ŸÉ)</h3>
                        <div class="alert alert-info">
                            <strong>üí° ŸäÿØÿπŸÖ:</strong> ÿßŸÑŸÜÿµŸàÿµ ÿßŸÑÿπÿ±ÿ®Ÿäÿ© ŸàÿßŸÑÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿäÿ© - "200ÿ¨ŸÖ ÿ≤ÿ®ÿØÿ©" ÿ£Ÿà "130g butter" ÿ£Ÿà "Ÿ£ ÿ®Ÿäÿ∂ÿßÿ™"
                        </div>
                        
                        <textarea id="recipeText" placeholder="ÿßŸÑÿµŸÇ ŸàÿµŸÅÿ™ŸÉ ŸáŸÜÿß...&#10;ŸÖÿ´ÿßŸÑ 1: 200ÿ¨ŸÖ ÿ≤ÿ®ÿØÿ©ÿå 150ÿ¨ŸÖ ÿ≥ŸÉÿ±ÿå 100ÿ¨ŸÖ ÿπÿ≥ŸÑÿå 3 ÿ®Ÿäÿ∂ÿßÿ™ÿå 500ÿ¨ŸÖ ÿØŸÇŸäŸÇ&#10;ŸÖÿ´ÿßŸÑ 2: Ÿ°Ÿ•Ÿ† ÿ∫ÿ±ÿßŸÖ ÿ≤ÿ®ÿØÿ©ÿå Ÿ°Ÿ†Ÿ† ÿ∫ÿ±ÿßŸÖ ÿ≥ŸÉÿ±ÿå Ÿ®Ÿ† ÿ∫ÿ±ÿßŸÖ ÿπÿ≥ŸÑÿå Ÿ§ ÿ®Ÿäÿ∂ÿßÿ™ÿå Ÿ§Ÿ•Ÿ† ÿ∫ÿ±ÿßŸÖ ÿØŸÇŸäŸÇ" rows="6"></textarea>
                        
                        <div class="parser-actions">
                            <button class="btn" id="parseRecipeBtn">üîç ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑŸÜÿµ</button>
                            <button class="btn btn-secondary" id="clearTextBtn">üóëÔ∏è ŸÖÿ≥ÿ≠</button>
                        </div>
                        
                        <div id="parseResults" class="result-box" style="display: none;">
                            <h4>‚úÖ ÿ™ŸÖ ÿßŸÑÿ™ÿπÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑŸàÿµŸÅÿ©:</h4>
                            <div id="parsedIngredientsList"></div>
                            <div class="controls">
                                <button class="btn btn-success" id="applyParsedRecipe">üì• ÿ™ÿ∑ÿ®ŸäŸÇ Ÿáÿ∞Ÿá ÿßŸÑŸÇŸäŸÖ</button>
                                <button class="btn btn-primary" id="saveParsedRecipe">üíæ ÿ≠ŸÅÿ∏ ÿßŸÑŸàÿµŸÅÿ©</button>
                            </div>
                        </div>
                    </div>

                    <div class="result-box" id="analysis-result">
                        <p>ÿ≥Ÿäÿ∏Ÿáÿ± ŸáŸÜÿß ÿ™ÿ≠ŸÑŸäŸÑ ŸàÿµŸÅÿ™ŸÉ ÿßŸÑÿπŸÑŸÖŸä ÿ®ÿπÿØ ÿßŸÑÿ∂ÿ∫ÿ∑ ÿπŸÑŸâ "ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑŸàÿµŸÅÿ©"</p>
                    </div>
                </div>

                <!-- ÿ™ÿ®ŸàŸäÿ® ÿßŸÑŸÖÿ≠ŸàŸÑ ÿßŸÑÿ∞ŸÉŸä - ŸÖÿ≠ÿØÿ´ -->
                <div class="tab-panel" id="converter">
                    <h2>üîÑ ÿßŸÑŸÖÿ≠ŸàŸÑ ÿßŸÑÿ∞ŸÉŸä</h2>
                    <div id="converter-content">
                        <p>Ÿäÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ... ÿ≥Ÿäÿ∏Ÿáÿ± ŸáŸÜÿß ŸÖÿ≠ŸàŸÑ ÿßŸÑŸÖŸÜŸáÿ¨Ÿäÿßÿ™ ÿ®ÿπÿØ ÿßŸÉÿ™ŸÖÿßŸÑ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ.</p>
                    </div>
                </div>

                <!-- ÿ™ÿ®ŸàŸäÿ® ÿßŸÑÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿπŸÑŸÖŸäÿ© - ŸÖÿ≠ÿØÿ´ -->
                <div class="tab-panel" id="scientific">
                    <h2>üî¨ ÿßŸÑÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿπŸÑŸÖŸäÿ©</h2>
                    <div id="scientific-content">
                        <p>Ÿäÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ... ÿ≥Ÿäÿ∏Ÿáÿ± ŸáŸÜÿß ÿßŸÑÿ™ÿ≥ŸÑÿ≥ŸÑ ÿßŸÑÿπŸÑŸÖŸä ÿßŸÑŸÉÿßŸÖŸÑ ÿ®ÿπÿØ ÿßŸÉÿ™ŸÖÿßŸÑ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ.</p>
                    </div>
                </div>

                <!-- ÿ™ÿ®ŸàŸäÿ® ÿ≠ÿßÿ≥ÿ®ÿ© ÿßŸÑÿ™ŸÖÿ®ÿ±ŸÜÿ¨ ÿßŸÑÿ¨ÿØŸäÿØ -->
                <div class="tab-panel" id="tempering">
                    <h2>üß™ ÿ≠ÿßÿ≥ÿ®ÿ© ÿßŸÑÿ™ŸÖÿ®ÿ±ŸÜÿ¨ ÿßŸÑÿπŸÑŸÖŸäÿ©</h2>
                    
                    <div class="alert alert-info">
                        <strong>üî¨ ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ŸÖÿ®ÿ±ŸÜÿ¨ ÿßŸÑÿ∞ŸÉŸä:</strong> ÿßÿ≠ÿ≥ÿ® ÿßŸÑÿØŸÅÿπÿßÿ™ ÿßŸÑŸÖÿ´ÿßŸÑŸäÿ© ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿßŸÑŸÖÿπÿßÿØŸÑÿ© ÿßŸÑÿπŸÑŸÖŸäÿ© ÿßŸÑÿØŸÇŸäŸÇÿ©
                    </div>

                    <div class="input-grid">
                        <div class="input-group">
                            <label for="eggMass">ŸÉÿ™ŸÑÿ© ÿßŸÑÿ®Ÿäÿ∂ (ÿ∫ÿ±ÿßŸÖ):</label>
                            <input type="number" id="eggMass" value="150" min="1" step="1">
                        </div>
                        
                        <div class="input-group">
                            <label for="eggTemp">ÿØÿ±ÿ¨ÿ© ÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑÿ®Ÿäÿ∂ (¬∞C):</label>
                            <input type="number" id="eggTemp" value="20" min="0" max="30" step="0.1">
                        </div>
                        
                        <div class="input-group">
                            <label for="liquidMass">ŸÉÿ™ŸÑÿ© ÿßŸÑÿÆŸÑŸäÿ∑ ÿßŸÑÿ≥ÿßÿÆŸÜ (ÿ∫ÿ±ÿßŸÖ):</label>
                            <input type="number" id="liquidMass" value="430" min="1" step="1">
                        </div>
                        
                        <div class="input-group">
                            <label for="liquidTemp">ÿØÿ±ÿ¨ÿ© ÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑÿÆŸÑŸäÿ∑ (¬∞C):</label>
                            <input type="number" id="liquidTemp" value="85" min="60" max="120" step="0.1">
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="batchCount">ÿπÿØÿØ ÿßŸÑÿØŸÅÿπÿßÿ™:</label>
                        <select id="batchCount">
                            <option value="3">3 ÿØŸÅÿπÿßÿ™</option>
                            <option value="4">4 ÿØŸÅÿπÿßÿ™</option>
                            <option value="5" selected>5 ÿØŸÅÿπÿßÿ™ (ŸÖÿ≥ÿ™ÿ≠ÿ≥ŸÜ)</option>
                        </select>
                    </div>

                    <button class="btn btn-success" id="calculateTempering">üßÆ ÿßÿ≠ÿ≥ÿ® ÿßŸÑÿ™ŸÖÿ®ÿ±ŸÜÿ¨ ÿßŸÑÿ¢ŸÖŸÜ</button>
                    <button class="btn btn-secondary" id="autoFill">üîÑ ÿ™ÿπÿ®ÿ¶ÿ© ÿ™ŸÑŸÇÿßÿ¶Ÿäÿ© ŸÖŸÜ ÿßŸÑŸàÿµŸÅÿ©</button>

                    <div id="temperingResults" class="result-box" style="display: none; margin-top: 20px;">
                        <h4>üìä ŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑÿ™ŸÖÿ®ÿ±ŸÜÿ¨ ÿßŸÑÿπŸÑŸÖŸä</h4>
                        <div id="temperatureProgression"></div>
                        <div id="batchDetails"></div>
                        <div id="safetyWarnings"></div>
                        
                        <div class="progress-container" style="margin: 15px 0;">
                            <div id="temperatureVisualization" style="height: 30px; background: linear-gradient(90deg, #3182ce 0%, #d69e2e 50%, #e53e3e 100%); border-radius: 5px; position: relative;"></div>
                            <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                                <span>20¬∞C</span>
                                <span>40¬∞C</span>
                                <span>60¬∞C</span>
                                <span>68¬∞C ‚ö†Ô∏è</span>
                                <span>85¬∞C</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ÿ™ÿ®ŸàŸäÿ® ŸÖÿ≥ÿ™ŸÉÿ¥ŸÅ ÿßŸÑŸÖÿ¥ÿßŸÉŸÑ -->
                <div class="tab-panel" id="troubleshooting">
                    <h2>üîß ŸÖÿ≥ÿ™ŸÉÿ¥ŸÅ ÿßŸÑŸÖÿ¥ÿßŸÉŸÑ</h2>
                    <div class="alert alert-info">
                        <strong>üéØ ÿ≠ŸÑŸàŸÑ ÿπŸÖŸÑŸäÿ© ŸÑŸÑŸÖÿ¥ÿßŸÉŸÑ ÿßŸÑÿ¥ÿßÿ¶ÿπÿ©:</strong> ÿßÿÆÿ™ÿ± ÿßŸÑŸÖÿ¥ŸÉŸÑÿ© ÿßŸÑÿ™Ÿä ÿ™Ÿàÿßÿ¨ŸáŸáÿß ŸÑŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿ≠ŸÑŸàŸÑ ÿπŸÑŸÖŸäÿ© ŸÖÿÆÿµÿµÿ©.
                    </div>
                    
                    <div class="troubleshooting-wizard">
                        <div class="wizard-step active" id="step1">
                            <h3>ŸÖÿß ÿßŸÑŸÖÿ¥ŸÉŸÑÿ© ÿßŸÑÿ™Ÿä ÿ™Ÿàÿßÿ¨ŸáŸáÿßÿü</h3>
                            <button class="problem-option" data-problem="sticky">ÿßŸÑÿπÿ¨ŸäŸÜÿ© ŸÑÿ≤ÿ¨ÿ© ÿ¨ÿØÿßŸã</button>
                            <button class="problem-option" data-problem="dry">ÿßŸÑÿπÿ¨ŸäŸÜÿ© ÿ¨ÿßŸÅÿ© ŸàŸÖÿ™ŸÅÿ™ÿ™ÿ©</button>
                            <button class="problem-option" data-problem="hard">ÿßŸÑÿ∑ÿ®ŸÇÿßÿ™ ŸÇÿßÿ≥Ÿäÿ© ÿ®ÿπÿØ ÿßŸÑÿÆÿ®ÿ≤</button>
                            <button class="problem-option" data-problem="bitter">ÿ∑ÿπŸÖ ŸÇŸÑŸàŸä (ÿµÿßÿ®ŸàŸÜŸä)</button>
                            <button class="problem-option" data-problem="pale">ÿßŸÑŸÑŸàŸÜ ÿ®ÿßŸáÿ™ ÿ¨ÿØÿßŸã</button>
                        </div>
                        
                        <div class="wizard-step" id="step2">
                            <div id="solution-content"></div>
                            <button class="btn btn-secondary" id="back-to-problems">‚Üê ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÖÿ¥ÿßŸÉŸÑ</button>
                        </div>
                    </div>
                </div>

                <!-- ÿ™ÿ®ŸàŸäÿ® ÿ≠ÿßÿ≥ÿ®ÿ© ÿßŸÑÿ∑ÿ®ŸÇÿßÿ™ - ŸÖÿ≠ÿØÿ´ -->
                <div class="tab-panel" id="calculator">
                    <h2>üìê ÿ≠ÿßÿ≥ÿ®ÿ© ÿßŸÑÿ∑ÿ®ŸÇÿßÿ™</h2>
                    <div class="alert alert-info">
                        <strong>üìè ÿ≠ÿ≥ÿßÿ®ÿßÿ™ ŸàÿßŸÇÿπŸäÿ©:</strong> ÿ™ÿ≥ÿ™ÿÆÿØŸÖ ŸÉÿ´ÿßŸÅÿ© 1.25 ÿ¨ŸÖ/ÿ≥ŸÖ¬≥ ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿßŸÑŸÇŸäÿßÿ≥ÿßÿ™ ÿßŸÑŸÅÿπŸÑŸäÿ©.
                    </div>
                    
                    <!-- ÿßŸÑÿ≠ÿßÿ≥ÿ®ÿ© ÿßŸÑÿπŸÉÿ≥Ÿäÿ© -->
                    <div class="reverse-calculator-section">
                        <h3>üîÑ ÿßŸÑÿ≠ÿßÿ≥ÿ®ÿ© ÿßŸÑÿπŸÉÿ≥Ÿäÿ©</h3>
                        <div class="alert alert-info">
                            <strong>ŸÖŸÜ ÿπÿØÿØ ÿßŸÑÿ∑ÿ®ŸÇÿßÿ™ ‚Üê ÿßŸÑŸÖŸÇÿßÿØŸäÿ±</strong> 
                        </div>
                        
                        <div class="input-group">
                            <label for="targetLayersReverse">ÿπÿØÿØ ÿßŸÑÿ∑ÿ®ŸÇÿßÿ™ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®:</label>
                            <input type="number" id="targetLayersReverse" value="7" min="1" max="20">
                        </div>
                        
                        <div class="input-group">
                            <label for="layerDiameter">ŸÇÿ∑ÿ± ÿßŸÑÿ∑ÿ®ŸÇÿ© (ÿ≥ŸÖ):</label>
                            <input type="number" id="layerDiameter" value="24" min="10" max="40">
                        </div>
                        
                        <div class="input-group">
                            <label for="layerThickness">ÿ≥ŸÖÿßŸÉÿ© ÿßŸÑÿ∑ÿ®ŸÇÿ© (ŸÖŸÑŸÖ):</label>
                            <input type="number" id="layerThickness" value="2" min="1" max="5" step="0.5">
                        </div>
                        
                        <button class="btn btn-success" id="calculateReverse">üßÆ ÿßÿ≠ÿ≥ÿ® ÿßŸÑŸÖŸÇÿßÿØŸäÿ± ŸÖŸÜ ÿπÿØÿØ ÿßŸÑÿ∑ÿ®ŸÇÿßÿ™</button>
                        
                        <div id="reverseResults" class="result-box" style="display: none;">
                            <h4>üìä ŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑÿ≠ÿßÿ≥ÿ®ÿ© ÿßŸÑÿπŸÉÿ≥Ÿäÿ©</h4>
                            <div id="reverseCalculations"></div>
                            <button class="btn btn-primary" id="applyReverseResults">üì• ÿ™ÿ∑ÿ®ŸäŸÇ Ÿáÿ∞Ÿá ÿßŸÑŸÖŸÇÿßÿØŸäÿ±</button>
                        </div>
                    </div>
                    
                    <div class="advanced-scaling-section">
                        <h3>üéØ ÿßŸÑÿ≥ŸÉŸäŸÑŸÜÿ¨ ÿßŸÑŸÖÿ™ŸÇÿØŸÖ</h3>
                        
                        <div class="scaling-mode-toggle">
                            <button class="btn-mode active" data-mode="basic">ÿßŸÑÿ≠ÿßÿ≥ÿ®ÿ© ÿßŸÑÿπÿßÿØŸäÿ©</button>
                            <button class="btn-mode" data-mode="advanced">ÿßŸÑÿ≥ŸÉŸäŸÑŸÜÿ¨ ÿßŸÑŸÖÿ™ŸÇÿØŸÖ</button>
                        </div>
                        
                        <div id="basicScalingContent" class="scaling-content active">
                            <div id="calculator-content">
                                <p>Ÿäÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ... ÿ≥Ÿäÿ∏Ÿáÿ± ŸáŸÜÿß ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ∑ÿ®ŸÇÿßÿ™ ÿ®ÿπÿØ ÿßŸÉÿ™ŸÖÿßŸÑ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ.</p>
                            </div>
                        </div>
                        
                        <div id="advancedScalingContent" class="scaling-content">
                            <div class="input-group">
                                <label>ÿπÿØÿØ ÿßŸÑÿ∑ÿ®ŸÇÿßÿ™ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®:</label>
                                <input type="number" id="targetLayers" value="7" min="1" max="20">
                            </div>
                            
                            <div class="input-group">
                                <label>Ÿàÿ≤ŸÜ ŸÉŸÑ ÿ∑ÿ®ŸÇÿ© (ÿ¨ŸÖ):</label>
                                <input type="number" id="layerWeight" value="150" min="50" max="300">
                                <small>ÿßŸÑŸÖŸàÿµŸâ ÿ®Ÿá: 120-180 ÿ¨ŸÖ ŸÑŸÑÿ∑ÿ®ŸÇÿ© ÿßŸÑŸàÿßÿ≠ÿØÿ©</small>
                            </div>
                            
                            <div class="input-group">
                                <label>ŸÜÿ≥ÿ®ÿ© ÿßŸÑÿ≤ÿßÿ¶ÿØ ŸÑŸÑÿ∑ÿ≠ŸÜ (%):</label>
                                <input type="number" id="extraPercentage" value="12" min="5" max="30">
                                <small>ŸÑÿπŸÖŸÑ ŸÅÿ™ÿßÿ™ ŸÑŸÑÿ™ÿ≤ŸäŸäŸÜ (10-15% ŸÖÿ´ÿßŸÑŸä)</small>
                            </div>
                            
                            <button class="btn btn-success" id="calculateAdvanced">üßÆ ÿßÿ≠ÿ≥ÿ® ÿßŸÑŸÖŸÇÿßÿØŸäÿ± ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ©</button>
                            
                            <div id="advancedResults" class="result-box" style="display: none;">
                                <h4>üìä ŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑÿ≥ŸÉŸäŸÑŸÜÿ¨ ÿßŸÑŸÖÿ™ŸÇÿØŸÖ</h4>
                                <div id="advancedCalculations"></div>
                                <button class="btn btn-primary" id="applyAdvancedResults">üì• ÿ™ÿ∑ÿ®ŸäŸÇ Ÿáÿ∞Ÿá ÿßŸÑŸÖŸÇÿßÿØŸäÿ±</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ÿ™ÿ®ŸàŸäÿ® ÿßŸÑŸÖÿ≥ÿ™ÿ¥ÿßÿ± ÿßŸÑÿπŸÑŸÖŸä - ŸÖÿ≠ÿØÿ´ -->
                <div class="tab-panel" id="advisor">
                    <h2>‚ö†Ô∏è ÿßŸÑŸÖÿ≥ÿ™ÿ¥ÿßÿ± ÿßŸÑÿπŸÑŸÖŸä</h2>
                    <div id="advisor-content">
                        <p>Ÿäÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ... ÿ≥Ÿäÿ∏Ÿáÿ± ŸáŸÜÿß ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑŸÖŸÅÿµŸÑ ÿ®ÿπÿØ ÿßŸÉÿ™ŸÖÿßŸÑ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ.</p>
                    </div>
                </div>

                <!-- ÿ™ÿ®ŸàŸäÿ® ŸÖŸÉÿ™ÿ®ÿ© ÿßŸÑŸàÿµŸÅÿßÿ™ - ŸÖÿ≠ÿØÿ´ -->
                <div class="tab-panel" id="library">
                    <h2>üíæ ŸÖŸÉÿ™ÿ®ÿ© ÿßŸÑŸàÿµŸÅÿßÿ™</h2>
                    
                    <div id="recipeFeedback" class="result-box" style="display: none; margin-bottom: 20px;">
                        <h4>üí¨ ÿ™ÿπŸÑŸäŸÇ ÿπŸÑŸâ ÿßŸÑŸàÿµŸÅÿ©</h4>
                        <textarea id="recipeComment" placeholder="ÿßŸÉÿ™ÿ® ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ŸÉ ÿπŸÜ Ÿáÿ∞Ÿá ÿßŸÑŸàÿµŸÅÿ©... ŸÜÿ¨ÿ≠ÿ™ÿü ŸÖÿßÿ∞ÿß ŸäŸÖŸÉŸÜ ÿ™ÿ≠ÿ≥ŸäŸÜŸáÿü" rows="3"></textarea>
                        
                        <div class="rating-section">
                            <label>‚≠ê ÿßŸÑÿ™ŸÇŸäŸäŸÖ:</label>
                            <div class="star-rating">
                                <span class="star" data-rating="1">‚òÖ</span>
                                <span class="star" data-rating="2">‚òÖ</span>
                                <span class="star" data-rating="3">‚òÖ</span>
                                <span class="star" data-rating="4">‚òÖ</span>
                                <span class="star" data-rating="5">‚òÖ</span>
                            </div>
                        </div>
                        
                        <div class="success-failure">
                            <label>ÿßŸÑÿ™ÿµŸÜŸäŸÅ:</label>
                            <button class="btn btn-success success-btn">‚úÖ ŸÜÿ¨ÿ≠ÿ™</button>
                            <button class="btn btn-danger failure-btn">‚ùå ŸÅÿ¥ŸÑÿ™</button>
                        </div>
                        
                        <button class="btn btn-primary" id="saveFeedback">üíæ ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿπŸÑŸäŸÇ ŸàÿßŸÑÿ™ŸÇŸäŸäŸÖ</button>
                    </div>
                    
                    <!-- ŸÇÿ≥ŸÖ ÿßŸÑÿ™ÿπŸÑŸÖ ŸÖŸÜ ÿßŸÑÿ™ÿ¨ÿßÿ±ÿ® -->
                    <div id="learning-insights-section" style="display: none;">
                        <h3>üß† ÿßŸÑÿ™ÿπŸÑŸÖ ŸÖŸÜ ÿ™ÿ¨ÿßÿ±ÿ®ŸÉ ÿßŸÑÿ≥ÿßÿ®ŸÇÿ©</h3>
                        <div id="learning-insights-content"></div>
                    </div>
                    
                    <div id="library-content">
                        <p>Ÿäÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ... ÿ≥Ÿäÿ∏Ÿáÿ± ŸáŸÜÿß ŸÜÿ∏ÿßŸÖ ÿßŸÑŸÖŸÉÿ™ÿ®ÿ© ÿ®ÿπÿØ ÿßŸÉÿ™ŸÖÿßŸÑ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

        <script>
        // ===== ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑŸÉÿßŸÖŸÑ ÿßŸÑŸÖÿµÿ≠ÿ≠ ŸàÿßŸÑŸÖÿ≠ÿØÿ´ =====
        
        // ===== ÿßŸÑŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿßŸÑÿπÿßŸÖÿ© =====
        let currentRecipe = null;
        let currentAnalysis = null;
        let currentRating = 0;
        let currentSuccess = null;
        
        // ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸàÿµŸÅÿßÿ™ ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏ÿ© ŸÖÿπ ŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑÿ£ÿÆÿ∑ÿßÿ°
        let savedRecipes;
        try {
            const stored = localStorage.getItem('medovik_recipes');
            savedRecipes = stored ? JSON.parse(stored) : [];
            
            // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿµÿ≠ÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
            if (!Array.isArray(savedRecipes)) {
                console.warn('ÿ®ŸäÿßŸÜÿßÿ™ ÿ∫Ÿäÿ± ÿµÿßŸÑÿ≠ÿ© ŸÅŸä localStorageÿå ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ...');
                savedRecipes = [];
            }
        } catch (e) {
            console.error('ŸÅÿ¥ŸÑ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸàÿµŸÅÿßÿ™:', e);
            savedRecipes = [];
            try {
                localStorage.removeItem('medovik_recipes');
            } catch {}
        }
    
        // ÿßŸÑŸÜÿ∑ÿßŸÇÿßÿ™ ÿßŸÑÿπŸÑŸÖŸäÿ© ÿßŸÑŸÖÿµÿ≠ÿ≠ÿ© (ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿßŸÑÿ£ÿ®ÿ≠ÿßÿ´)
        const SCIENTIFIC_RANGES = {
            flour: { min: 48, max: 52, ideal: 50 },
            butter: { min: 10, max: 14, ideal: 12 },
            sugars: { min: 28, max: 33, ideal: 30.5 },
            eggs: { min: 8, max: 11, ideal: 9.5 },
            soda: { min: 0.3, max: 0.8, ideal: 0.55 }
        };
    
        // ŸÉÿ´ÿßŸÅÿ© ÿßŸÑÿπÿ¨ŸäŸÜÿ© ÿßŸÑŸÖÿµÿ≠ÿ≠ÿ© ŸÖŸÜ ÿßŸÑŸÇŸäÿßÿ≥ÿßÿ™ ÿßŸÑŸÅÿπŸÑŸäÿ©
        const DOUGH_DENSITY = 1.25; // g/cm¬≥
    
        // ŸÉŸÑŸÖÿßÿ™ ŸÖŸÅÿ™ÿßÿ≠Ÿäÿ© ŸÑŸÑÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑŸÜÿµŸä - ŸÖÿ≠ÿØŸëÿ´ÿ©
        // ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ingredientKeywords Ÿàÿßÿ≥ÿ™ÿ®ÿØŸÑ ÿ≥ÿ∑ÿ± soda:
        const ingredientKeywords = {
            flour: ['ÿØŸÇŸäŸÇ', 'ÿ∑ÿ≠ŸäŸÜ', 'flour', 'ÿØŸÇŸäŸÇ ÿßÿ®Ÿäÿ∂', 'ÿ∑ÿ≠ŸäŸÜ ÿßÿ®Ÿäÿ∂', 'ÿØŸÇŸäŸÇ ŸÖÿ™ÿπÿØÿØ ÿßŸÑÿßÿ≥ÿ™ÿπŸÖÿßŸÑÿßÿ™', 'ÿØŸÇŸäŸÇ ŸÖÿ™ÿπÿØÿØ'],
            butter: ['ÿ≤ÿ®ÿØÿ©', 'ÿ≤ÿ®ÿØ', 'butter', 'ÿ≤ÿ®ÿØÿ© ÿ∫Ÿäÿ± ŸÖŸÖŸÑÿ≠ÿ©', 'ÿ≤ÿ®ÿØŸá', 'ÿ≤ÿ®ÿØÿ© ŸÖŸÖŸÑÿ≠ÿ©'],
            sugar: ['ÿ≥ŸÉÿ±', 'ÿ≥ŸÉÿ± ÿßÿ®Ÿäÿ∂', 'sugar', 'ÿ≥ŸÉÿ± ŸÜÿßÿπŸÖ', 'ÿ≥ŸÉÿ±Ÿá'],
            honey: ['ÿπÿ≥ŸÑ', 'ÿπÿ≥ŸÑ ŸÜÿ≠ŸÑ', 'honey', 'ÿπÿ≥ŸÑ ÿ∑ÿ®ŸäÿπŸä'],
            eggs: ['ÿ®Ÿäÿ∂', 'ÿ®Ÿäÿ∂ÿ©', 'ÿ®Ÿäÿ∂ÿßÿ™', 'eggs', 'egg', 'ÿ®Ÿäÿ∂ ŸÉÿßŸÖŸÑ', 'ÿ≠ÿ®ÿßÿ™ ÿ®Ÿäÿ∂', 'ÿ≠ÿ®ÿ© ÿ®Ÿäÿ∂', 'ÿ®Ÿäÿ∂Ÿá', 'ÿ≠ÿ®ÿßÿ™', 'ÿ≠ÿ®ÿ©'],
            soda: ['ÿµŸàÿØÿß', 'ÿ®ŸäŸÉŸÜÿ¨ ÿµŸàÿØÿß', 'ÿ®ŸäŸÉÿ±ÿ®ŸàŸÜÿßÿ™', 'soda', 'baking soda', 'ÿ®ŸäŸÉŸÜÿ∫ ÿµŸàÿØÿß', 'ÿ®ŸäŸÉÿ±ÿ®ŸàŸÜÿßÿ™ ÿßŸÑÿµŸàÿØŸäŸàŸÖ', 'ÿ®ŸäŸÉŸÜÿ¨', 'ÿ®ŸäŸÉŸÜÿ∫'] // ‚úÖ ÿ£ÿ∂ŸÅŸÜÿß "ÿ®ŸäŸÉŸÜÿ¨" Ÿà "ÿ®ŸäŸÉŸÜÿ∫"
        };
    
        // ===== ÿØŸàÿßŸÑ ÿßŸÑŸÖÿ≥ÿßÿπÿØÿ© ÿßŸÑŸÖÿµÿ≠ÿ≠ÿ© =====
        
        /**
         * ÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑÿ£ÿ±ŸÇÿßŸÖ ÿßŸÑÿπÿ±ÿ®Ÿäÿ© ÿ•ŸÑŸâ ÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿäÿ© - ŸÖÿµÿ≠ÿ≠
         */
        function normalizeArabicNumbers(text) {
            const arabicToEnglish = {
                'Ÿ†': '0', 'Ÿ°': '1', 'Ÿ¢': '2', 'Ÿ£': '3', 'Ÿ§': '4',
                'Ÿ•': '5', 'Ÿ¶': '6', 'Ÿß': '7', 'Ÿ®': '8', 'Ÿ©': '9'
            };
            return text.replace(/[Ÿ†-Ÿ©]/g, d => arabicToEnglish[d] || d);
        }
    
        /**
         * escape ÿ£ÿ≠ÿ±ŸÅ regex ÿßŸÑÿÆÿßÿµÿ©
         */
        function escapeRegex(str) {
            return str.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }
    
        /**
         * ÿ≠ŸÅÿ∏ ÿßŸÑŸàÿµŸÅÿßÿ™ ÿ®ÿ¥ŸÉŸÑ ÿ¢ŸÖŸÜ
         */
        function saveRecipesToStorage() {
            try {
                localStorage.setItem('medovik_recipes', JSON.stringify(savedRecipes));
            } catch (e) {
                console.error('ŸÅÿ¥ŸÑ ÿ≠ŸÅÿ∏ ÿßŸÑŸàÿµŸÅÿßÿ™:', e);
                alert('‚ö†Ô∏è ŸÅÿ¥ŸÑ ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™. ŸÇÿØ ÿ™ŸÉŸàŸÜ ÿßŸÑÿ∞ÿßŸÉÿ±ÿ© ŸÖŸÖÿ™ŸÑÿ¶ÿ©.');
            }
        }
    
        // ===== ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ŸáŸäÿ¶ÿ© ÿßŸÑŸÖÿµÿ≠ÿ≠ =====
        
        document.addEventListener('DOMContentLoaded', function() {
            try {
                initTabs();
                initButtons();
                initTextParser();
                initAdvancedScaling();
                initRatingSystem();
                initTroubleshooting();
                initReverseCalculator();
                initTemperingCalculator();
                initMethodConverter();
                
                // ÿ™ÿ≠ŸÑŸäŸÑ ÿ£ŸàŸÑŸä ÿ•ÿ∞ÿß ŸÉÿßŸÜÿ™ ÿßŸÑŸÇŸäŸÖ ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿäÿ© ŸÖŸàÿ¨ŸàÿØÿ©
                // const flourInput = document.getElementById('flour');
                // if (flourInput && flourInput.value) {
                    // analyzeRecipe();
                // }
            } catch (e) {
                console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ™ŸáŸäÿ¶ÿ©:', e);
            }
        });
    
        // ===== ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ÿ®ŸàŸäÿ®ÿßÿ™ =====
        
        function initTabs() {
            const tabBtns = document.querySelectorAll('.tab-btn');
            
            tabBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    tabBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    document.querySelectorAll('.tab-panel').forEach(panel => {
                        panel.classList.remove('active');
                    });
                    
                    const tabId = this.getAttribute('data-tab');
                    const targetPanel = document.getElementById(tabId);
                    if (targetPanel) {
                        targetPanel.classList.add('active');
                    }
                });
            });
        }
    
        // ===== ÿßŸÑÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© ÿßŸÑŸÖÿµÿ≠ÿ≠ÿ© =====
        
        function initButtons() {
            const analyzeBtn = document.getElementById('analyze-btn');
            const resetBtn = document.getElementById('reset-btn');
            
            if (analyzeBtn) {
                analyzeBtn.addEventListener('click', analyzeRecipe);
            }
            
            if (resetBtn) {
                resetBtn.addEventListener('click', resetForm);
            }
        }
    
        // ===== ŸÜÿ∏ÿßŸÖ ŸÖÿ≥ÿ™ŸÉÿ¥ŸÅ ÿßŸÑŸÖÿ¥ÿßŸÉŸÑ =====
        
        function initTroubleshooting() {
            const problemOptions = document.querySelectorAll('.problem-option');
            const backBtn = document.getElementById('back-to-problems');
            
            problemOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const problem = this.getAttribute('data-problem');
                    showSolution(problem);
                });
            });
            
            if (backBtn) {
                backBtn.addEventListener('click', function() {
                    const step1 = document.getElementById('step1');
                    const step2 = document.getElementById('step2');
                    if (step1) step1.classList.add('active');
                    if (step2) step2.classList.remove('active');
                });
            }
        }
    
        // ===== ŸÖÿ≠ŸÑŸÑ ÿßŸÑŸÜÿµŸàÿµ ÿßŸÑŸÖÿ≠ÿ≥ŸëŸÜ ŸàÿßŸÑŸÖÿµÿ≠ÿ≠ =====
        
        function initTextParser() {
            const parseBtn = document.getElementById('parseRecipeBtn');
            const clearBtn = document.getElementById('clearTextBtn');
            const applyBtn = document.getElementById('applyParsedRecipe');
            const saveBtn = document.getElementById('saveParsedRecipe');
            
            if (parseBtn) parseBtn.addEventListener('click', parseRecipeText);
            if (clearBtn) clearBtn.addEventListener('click', clearText);
            if (applyBtn) applyBtn.addEventListener('click', applyParsedRecipe);
            if (saveBtn) saveBtn.addEventListener('click', saveParsedRecipe);
        }
    
        /**
         * ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑŸÜÿµ - ŸÖÿµÿ≠ÿ≠ ÿ®ÿßŸÑŸÉÿßŸÖŸÑ
         */
        function parseRecipeText() {
            const textArea = document.getElementById('recipeText');
            if (!textArea) return;
            
            const text = textArea.value.trim();
            if (!text) {
                alert('Ÿäÿ±ÿ¨Ÿâ ÿ•ÿØÿÆÿßŸÑ ŸÜÿµ ÿßŸÑŸàÿµŸÅÿ© ÿ£ŸàŸÑÿßŸã');
                return;
            }
            
            const parsed = parseRecipeFromText(text);
            displayParsedResults(parsed);
        }
    
        /**
         * ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑŸÖŸÉŸàŸÜÿßÿ™ ŸÖŸÜ ÿßŸÑŸÜÿµ - ŸÖÿµÿ≠ÿ≠ ŸÉŸÑŸäÿßŸã
         */
        function parseRecipeFromText(text) {
            // ÿ™ÿ∑ÿ®Ÿäÿπ ÿßŸÑÿ£ÿ±ŸÇÿßŸÖ ÿßŸÑÿπÿ±ÿ®Ÿäÿ© ÿ£ŸàŸÑÿßŸã
            text = normalizeArabicNumbers(text);
            
            const lines = text.split('\n');
            const result = { 
                flour: 0, 
                butter: 0, 
                sugar: 0, 
                honey: 0, 
                eggs: 0, 
                soda: 0 
            };
            
            lines.forEach(line => {
                // ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ŸÉŸÑ ŸÖŸÉŸàŸÜ ŸÅŸä ŸÉŸÑ ÿ≥ÿ∑ÿ±
                findIngredient(line, 'flour', result);
                findIngredient(line, 'butter', result);
                findIngredient(line, 'sugar', result);
                findIngredient(line, 'honey', result);
                findIngredient(line, 'eggs', result);
                findIngredient(line, 'soda', result);
            });
            
            return result;
        }
    
        /**
         * ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ŸÖŸÉŸàŸÜ ŸÅŸä ÿ≥ÿ∑ÿ± - ÿßŸÑŸÜÿ≥ÿÆÿ© ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ© ÿßŸÑŸÖÿ≠ÿ≥ŸëŸÜÿ©
         */
        function findIngredient(line, ingredient, result) {
            const keywords = ingredientKeywords[ingredient];
            if (!keywords) return;
            
            // ŸÜŸÖÿ∑ ÿßŸÑŸàÿ≠ÿØÿßÿ™ ÿßŸÑŸÖŸàÿ≥ÿπ
            const unitPattern = '(?:ÿ¨ŸÖ|ÿ¨ÿ±ÿßŸÖ|ÿ∫|ÿ∫ÿ±ÿßŸÖ|g|gr|grams?|ÿ¨ÿ±ÿßŸÖÿßÿ™|ŸÉŸàÿ®|ŸÉŸàÿ®ŸäŸÜ|ÿ£ŸÉŸàÿßÿ®|cups?|ŸÖŸÑÿπŸÇÿ©|ŸÖŸÑÿπŸÇÿ™ŸäŸÜ|ŸÖŸÑÿßÿπŸÇ|tbsp|tsp|tablespoons?|teaspoons?|sticks?|oz|ounces?|ŸÖÿπŸÑŸÇÿ©|ŸÖÿπŸÑŸÇÿ™ŸäŸÜ)';
            
            // ŸÉŸÑŸÖÿßÿ™ ŸàÿµŸÅŸäÿ© ÿ¥ÿßÿ¶ÿπÿ© (Ÿäÿ™ŸÖ ÿ™ÿ¨ÿßŸáŸÑŸáÿß)
            const descriptors = '(?:unsalted|salted|medium|large|small|extra|all-purpose|purpose|ÿ∫Ÿäÿ±\\s*ŸÖŸÖŸÑÿ≠ÿ©|ŸÖŸÖŸÑÿ≠ÿ©|ŸÉÿ®Ÿäÿ±ÿ©|ÿµÿ∫Ÿäÿ±ÿ©|ŸÖÿ™ÿπÿØÿØ\\s*ÿßŸÑÿßÿ≥ÿ™ÿπŸÖÿßŸÑÿßÿ™|level)*';
            
            for (const keyword of keywords) {
                const escapedKeyword = escapeRegex(keyword);
                
                // ŸÜŸÖÿ∑ 1: ÿßŸÑÿ±ŸÇŸÖ ŸÖŸÑÿ™ÿµŸÇ ÿ£Ÿà ŸÖŸÜŸÅÿµŸÑ ÿπŸÜ ÿßŸÑŸàÿ≠ÿØÿ© + ŸÉŸÑŸÖÿßÿ™ ŸàÿµŸÅŸäÿ© ÿßÿÆÿ™Ÿäÿßÿ±Ÿäÿ©
                // ÿ£ŸÖÿ´ŸÑÿ©: "130g Unsalted butter" | "540g All-purpose flour" | "130 ÿ¨ÿ±ÿßŸÖ ÿ≤ÿ®ÿØÿ©"
                const pattern1 = new RegExp(
                    `([0-9Ÿ†-Ÿ©]+(?:[.,Ÿ´\\/][0-9Ÿ†-Ÿ©]+)?)\\s*${unitPattern}?\\s*${descriptors}\\s*(?:\\([^)]*\\))?\\s*${escapedKeyword}`,
                    'gi'
                );
                
                // ŸÜŸÖÿ∑ 2: ÿßŸÑÿ±ŸÇŸÖ ÿØÿßÿÆŸÑ ÿ£ŸÇŸàÿßÿ≥ ÿ®ÿπÿØ ÿßŸÑŸàÿ≠ÿØÿ© ÿ£Ÿà ÿßŸÑŸÉŸÑŸÖÿ©
                // ÿ£ŸÖÿ´ŸÑÿ©: "ŸÉŸàÿ® (200 ÿ¨ÿ±ÿßŸÖ) ÿ≥ŸÉÿ±" | "baking soda (10 g)"
                const pattern2 = new RegExp(
                    `(?:${unitPattern}\\s*)?${descriptors}?\\s*${escapedKeyword}\\s*(?:[^(]*)?\\(\\s*([0-9Ÿ†-Ÿ©]+(?:[.,Ÿ´][0-9Ÿ†-Ÿ©]+)?)\\s*${unitPattern}?\\s*\\)`,
                    'gi'
                );
                
                // ŸÜŸÖÿ∑ 3: ÿßŸÑÿ±ŸÇŸÖ ÿ´ŸÖ (ŸÉŸÑŸÖÿßÿ™ ŸàÿµŸÅŸäÿ©) ÿ´ŸÖ ÿßŸÑŸÉŸÑŸÖÿ© ÿßŸÑŸÖŸÅÿ™ÿßÿ≠Ÿäÿ©
                // ÿ£ŸÖÿ´ŸÑÿ©: "3 ÿ≠ÿ®ÿßÿ™ ÿ®Ÿäÿ∂" | "5 medium eggs" | "2 tsp level baking soda"
                const pattern3 = new RegExp(
                    `([0-9Ÿ†-Ÿ©]+(?:[.,Ÿ´\\/][0-9Ÿ†-Ÿ©]+)?)\\s*${unitPattern}?\\s*${descriptors}\\s*${escapedKeyword}`,
                    'gi'
                );
                
                // ŸÜŸÖÿ∑ 4: ÿßŸÑŸÉŸÑŸÖÿ© ÿ´ŸÖ ÿßŸÑÿ±ŸÇŸÖ ŸÅŸä ŸÇŸàÿ≥
                // ÿ£ŸÖÿ´ŸÑÿ©: "ÿ≤ÿ®ÿØÿ© (130 ÿ¨ÿ±ÿßŸÖ)" | "Butter (170g)"
                const pattern4 = new RegExp(
                    `${escapedKeyword}\\s*${descriptors}?\\s*(?:[^(]*)?\\(\\s*([0-9Ÿ†-Ÿ©]+(?:[.,Ÿ´][0-9Ÿ†-Ÿ©]+)?)\\s*${unitPattern}?\\s*\\)`,
                    'gi'
                );
                
                // ÿ¨ÿ±ÿ® ŸÉŸÑ ÿßŸÑŸÜŸÖÿßÿ∞ÿ¨ ÿ®ÿßŸÑÿ™ÿ±ÿ™Ÿäÿ®
                const patterns = [pattern2, pattern3, pattern1, pattern4]; // ‚úÖ ÿ∫Ÿäÿ±ŸÜÿß ÿßŸÑÿ™ÿ±ÿ™Ÿäÿ®: ÿßŸÑÿ£ŸÇŸàÿßÿ≥ ÿ£ŸàŸÑÿßŸã
                
                for (const pattern of patterns) {
                    const matches = line.match(pattern);
                    if (matches && matches[0]) {
                        const extracted = extractNumber(matches[0], ingredient, line);
                        if (extracted > 0) {
                            result[ingredient] = extracted;
                            return; // Ÿàÿ¨ÿØŸÜÿß ÿßŸÑŸÖŸÉŸàŸÜÿå ÿ™ŸàŸÇŸÅ
                        }
                    }
                }
            }
        }
		
        /**
         * ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑÿ±ŸÇŸÖ ŸÖŸÜ ÿßŸÑŸÜÿµ ÿ®ÿ∞ŸÉÿßÿ° - ŸÖÿµÿ≠ÿ≠ ŸÜŸáÿßÿ¶ŸäÿßŸã
         */
        function extractNumber(text, ingredient, fullLine) {
            // ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ÿ±ŸÇÿßŸÖ ŸÖŸÜ ÿßŸÑŸÜÿµ (ÿ®ŸÖÿß ŸÅŸäŸáÿß ÿßŸÑŸÉÿ≥Ÿàÿ±)
            const numberPattern = /([0-9Ÿ†-Ÿ©]+(?:[.,Ÿ´\/][0-9Ÿ†-Ÿ©]+)?)/g;
            const allNumbers = text.match(numberPattern);
            
            if (!allNumbers || allNumbers.length === 0) return 0;
            
            // ÿ™ÿ∑ÿ®Ÿäÿπ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ÿ±ŸÇÿßŸÖ Ÿàÿ™ÿ≠ŸàŸäŸÑŸáÿß
            const normalizedNumbers = allNumbers.map(num => {
                let normalized = normalizeArabicNumbers(num);
                
                // ŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑŸÉÿ≥Ÿàÿ± (ŸÖÿ´ŸÑ: 1/2 = 0.5, 3/4 = 0.75)
                if (normalized.includes('/')) {
                    const parts = normalized.split('/');
                    if (parts.length === 2) {
                        const numerator = parseFloat(parts[0]);
                        const denominator = parseFloat(parts[1]);
                        if (!isNaN(numerator) && !isNaN(denominator) && denominator !== 0) {
                            return numerator / denominator;
                        }
                    }
                    return 0;
                }
                
                // ŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑŸÅŸàÿßÿµŸÑ ÿßŸÑÿπÿ¥ÿ±Ÿäÿ©
                normalized = normalized.replace(/[,Ÿ´]/g, '.');
                const parsed = parseFloat(normalized);
                return isNaN(parsed) ? 0 : parsed;
            }).filter(n => n > 0);
            
            if (normalizedNumbers.length === 0) return 0;
            
            // ŸÖŸÜÿ∑ŸÇ ÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑÿ±ŸÇŸÖ ÿßŸÑÿµÿ≠Ÿäÿ≠ ÿ≠ÿ≥ÿ® ÿßŸÑŸÖŸÉŸàŸÜ
            
            // ŸÑŸÑÿ®Ÿäÿ∂: ŸÖŸÜÿ∑ŸÇ ÿÆÿßÿµ
            if (ingredient === 'eggs') {
                // ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿ±ŸÇŸÖ ÿµÿ∫Ÿäÿ± ŸäŸÖÿ´ŸÑ ÿπÿØÿØ ÿßŸÑÿ®Ÿäÿ∂ÿßÿ™ (1-15)
                const eggCount = normalizedNumbers.find(n => n >= 1 && n <= 15 && n === Math.floor(n));
                if (eggCount) {
                    return eggCount * 50; // ‚úÖ ÿ®Ÿäÿ∂ÿ© = 50 ÿ¨ÿ±ÿßŸÖ
                }
                
                // ÿ•ÿ∞ÿß ŸÉŸÑ ÿßŸÑÿ£ÿ±ŸÇÿßŸÖ ŸÉÿ®Ÿäÿ±ÿ© (> 15)ÿå ÿßŸÅÿ™ÿ±ÿ∂ ÿ£ŸÜŸáÿß ÿ®ÿßŸÑÿ¨ÿ±ÿßŸÖÿßÿ™
                const largeNumber = normalizedNumbers.find(n => n > 15);
                if (largeNumber) {
                    return largeNumber;
                }
                
                return Math.max(...normalizedNumbers);
            }
            
            // ŸÑŸÑÿµŸàÿØÿß: ÿÆÿ∞ ÿ£ÿµÿ∫ÿ± ÿ±ŸÇŸÖ ŸÖÿπŸÇŸàŸÑ (ÿßŸÑÿµŸàÿØÿß ÿØÿßÿ¶ŸÖÿßŸã ÿ®ŸÉŸÖŸäÿßÿ™ ÿµÿ∫Ÿäÿ±ÿ©)
            if (ingredient === 'soda') {
                // ÿßŸÑÿµŸàÿØÿß ÿπÿßÿØÿ© 1-20 ÿ¨ÿ±ÿßŸÖ
                const sodaAmount = normalizedNumbers.find(n => n >= 0.5 && n <= 20);
                if (sodaAmount) {
                    return sodaAmount;
                }
                // ÿ•ÿ∞ÿß ŸÑŸÖ ŸÜÿ¨ÿØ ÿ±ŸÇŸÖ ÿµÿ∫Ÿäÿ±ÿå ÿÆÿ∞ ÿ£ÿµÿ∫ÿ± ÿ±ŸÇŸÖ
                return Math.min(...normalizedNumbers);
            }
            
            // ŸÑŸÑŸÖŸÉŸàŸÜÿßÿ™ ÿßŸÑÿ£ÿÆÿ±Ÿâ: ÿÆÿ∞ ÿ£ŸÉÿ®ÿ± ÿ±ŸÇŸÖ (ÿ∫ÿßŸÑÿ®ÿßŸã ŸáŸà ÿßŸÑÿ¨ÿ±ÿßŸÖÿßÿ™)
            const maxNumber = Math.max(...normalizedNumbers);
            
            // ŸÅÿ≠ÿµ ÿ•ÿ∂ÿßŸÅŸä: ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑÿ±ŸÇŸÖ ÿµÿ∫Ÿäÿ± ÿ¨ÿØÿßŸã (< 1) ŸàŸáŸÜÿßŸÉ "ŸÉŸàÿ®" ŸÅŸä ÿßŸÑÿ≥ÿ∑ÿ±
            if (maxNumber < 1 && (fullLine.includes('ŸÉŸàÿ®') || fullLine.includes('cup'))) {
                return maxNumber * 200; // ŸÉŸàÿ® ÿ™ŸÇÿ±Ÿäÿ®ÿßŸã = 200 ÿ¨ÿ±ÿßŸÖ
            }
            
            return maxNumber;
        }
    
        /**
         * ÿπÿ±ÿ∂ ŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑŸÜÿµŸä - ŸÖÿ≠ÿ≥ŸëŸÜ
         */
        function displayParsedResults(parsed) {
            const resultsDiv = document.getElementById('parseResults');
            const listDiv = document.getElementById('parsedIngredientsList');
            
            if (!resultsDiv || !listDiv) return;
            
            let html = '<div style="background: white; padding: 10px; border-radius: 8px;">';
            let foundAny = false;
            
            const labels = {
                flour: 'ü•ñ ÿØŸÇŸäŸÇ',
                butter: 'üßà ÿ≤ÿ®ÿØÿ©',
                sugar: 'üç¨ ÿ≥ŸÉÿ±',
                honey: 'üçØ ÿπÿ≥ŸÑ',
                eggs: 'ü•ö ÿ®Ÿäÿ∂',
                soda: 'üß™ ÿµŸàÿØÿß'
            };
            
            const order = ['flour', 'butter', 'sugar', 'honey', 'eggs', 'soda'];
            
            for (const ingredient of order) {
                const value = parsed[ingredient];
                if (value > 0) {
                    foundAny = true;
                    html += `
                        <div style="padding: 12px; background: #f0f9ff; margin: 8px 0; border-radius: 8px; border-right: 4px solid #3182ce; display: flex; justify-content: space-between; align-items: center;">
                            <span style="font-weight: 600;">${labels[ingredient]}</span>
                            <span style="font-size: 18px; font-weight: 700; color: #3182ce;">${value.toFixed(1)} ÿ¨ŸÖ</span>
                        </div>
                    `;
                }
            }
            
            html += '</div>';
            
            if (!foundAny) {
                html = `
                    <div class="alert alert-danger" style="margin: 15px 0;">
                        <strong>‚ùå ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿ£Ÿä ŸÖŸÉŸàŸÜÿßÿ™</strong>
                        <p style="margin-top: 10px; font-size: 0.95em;">ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿµŸäÿ∫ÿ© ÿßŸÑŸÜÿµ. ÿßŸÑÿµŸäÿ∫ ÿßŸÑŸÖÿØÿπŸàŸÖÿ©:</p>
                        <ul style="padding-right: 20px; margin: 10px 0; font-size: 0.9em;">
                            <li>200 ÿ¨ÿ±ÿßŸÖ ÿ≤ÿ®ÿØÿ©</li>
                            <li>ŸÉŸàÿ® (150ÿ∫) ÿ≥ŸÉÿ±</li>
                            <li>3/4 ŸÉŸàÿ® ÿØŸÇŸäŸÇ</li>
                            <li>3 ÿ®Ÿäÿ∂ÿßÿ™</li>
                            <li>170 gr Butter</li>
                            <li>5 eggs</li>
                        </ul>
                    </div>
                `;
            }
            
            listDiv.innerHTML = html;
            resultsDiv.style.display = 'block';
            
            // ÿ≠ŸÅÿ∏ ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨ ŸÖÿ§ŸÇÿ™ÿßŸã ŸÑŸÑÿ™ÿ∑ÿ®ŸäŸÇ
            window.lastParsedRecipe = parsed;
        }
    
        /**
         * ÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑŸàÿµŸÅÿ© ÿßŸÑŸÖÿ≠ŸÑŸÑÿ©
         */
        function applyParsedRecipe() {
            if (!window.lastParsedRecipe) {
                alert('ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸàÿµŸÅÿ© ŸÖÿ≠ŸÑŸÑÿ© ŸÑŸÑÿ™ÿ∑ÿ®ŸäŸÇ');
                return;
            }
            
            const parsed = window.lastParsedRecipe;
            
            const flourInput = document.getElementById('flour');
            const butterInput = document.getElementById('butter');
            const sugarInput = document.getElementById('sugar');
            const honeyInput = document.getElementById('honey');
            const eggsInput = document.getElementById('eggs');
            const sodaInput = document.getElementById('soda');
            
            if (flourInput) flourInput.value = parsed.flour || 0;
            if (butterInput) butterInput.value = parsed.butter || 0;
            if (sugarInput) sugarInput.value = parsed.sugar || 0;
            if (honeyInput) honeyInput.value = parsed.honey || 0;
            if (eggsInput) eggsInput.value = parsed.eggs || 0;
            if (sodaInput) sodaInput.value = parsed.soda || 0;
            
            analyzeRecipe();
            alert('‚úÖ ÿ™ŸÖ ÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑŸàÿµŸÅÿ© ÿ®ŸÜÿ¨ÿßÿ≠!');
            
            // ÿßŸÑÿ™ŸÖÿ±Ÿäÿ± ÿ•ŸÑŸâ ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨
            const resultBox = document.getElementById('analysis-result');
            if (resultBox) {
                resultBox.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        }
    
        /**
         * ÿ≠ŸÅÿ∏ ÿßŸÑŸàÿµŸÅÿ© ÿßŸÑŸÖÿ≠ŸÑŸÑÿ©
         */
        function saveParsedRecipe() {
            if (!window.lastParsedRecipe) {
                alert('ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸàÿµŸÅÿ© ŸÖÿ≠ŸÑŸÑÿ© ŸÑŸÑÿ≠ŸÅÿ∏');
                return;
            }
            
            const name = prompt('ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖ ŸÑŸÑŸàÿµŸÅÿ©:', `ŸàÿµŸÅÿ© ${new Date().toLocaleDateString('ar-EG')}`);
            if (!name || name.trim() === '') return;
            
            const recipeToSave = {
                name: name.trim(),
                ...window.lastParsedRecipe,
                timestamp: new Date().toISOString(),
                source: 'text_parser'
            };
            
            savedRecipes.push(recipeToSave);
            saveRecipesToStorage();
            
            alert(`‚úÖ ÿ™ŸÖ ÿ≠ŸÅÿ∏ "${name}" ÿ®ŸÜÿ¨ÿßÿ≠!`);
            
            // ÿ•ÿ∏Ÿáÿßÿ± ŸÇÿ≥ŸÖ ÿßŸÑÿ™ÿπŸÑŸäŸÇÿßÿ™
            const feedbackDiv = document.getElementById('recipeFeedback');
            if (feedbackDiv) {
                feedbackDiv.style.display = 'block';
            }
            
            updateLibraryTab();
        }
    
        /**
         * ŸÖÿ≥ÿ≠ ÿßŸÑŸÜÿµ
         */
        function clearText() {
            const textArea = document.getElementById('recipeText');
            const resultsDiv = document.getElementById('parseResults');
            
            if (textArea) textArea.value = '';
            if (resultsDiv) resultsDiv.style.display = 'none';
            
            window.lastParsedRecipe = null;
        }
    
        // ===== ÿßŸÑÿ≥ŸÉŸäŸÑŸÜÿ¨ ÿßŸÑŸÖÿ™ŸÇÿØŸÖ ÿßŸÑŸÖÿµÿ≠ÿ≠ =====
        
        function initAdvancedScaling() {
            const modeButtons = document.querySelectorAll('.btn-mode');
            const calculateBtn = document.getElementById('calculateAdvanced');
            const applyBtn = document.getElementById('applyAdvancedResults');
            
            modeButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    modeButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    const mode = this.getAttribute('data-mode');
                    const basicContent = document.getElementById('basicScalingContent');
                    const advancedContent = document.getElementById('advancedScalingContent');
                    
                    if (basicContent && advancedContent) {
                        basicContent.classList.toggle('active', mode === 'basic');
                        advancedContent.classList.toggle('active', mode === 'advanced');
                    }
                });
            });
            
            if (calculateBtn) {
                calculateBtn.addEventListener('click', calculateAdvancedScaling);
            }
            
            if (applyBtn) {
                applyBtn.addEventListener('click', applyAdvancedResults);
            }
        }
    
        /**
         * ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ≥ŸÉŸäŸÑŸÜÿ¨ ÿßŸÑŸÖÿ™ŸÇÿØŸÖ - ŸÖÿµÿ≠ÿ≠
         */
        function calculateAdvancedScaling() {
            if (!currentRecipe) {
                alert('Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≠ŸÑŸäŸÑ ŸàÿµŸÅÿ© ÿ£ŸàŸÑÿßŸã ŸÅŸä ÿ™ÿ®ŸàŸäÿ® ÿßŸÑŸÖÿ≠ŸÑŸÑ ÿßŸÑÿπŸÑŸÖŸä');
                return;
            }
            
            const targetLayersInput = document.getElementById('targetLayers');
            const layerWeightInput = document.getElementById('layerWeight');
            const extraPercentageInput = document.getElementById('extraPercentage');
            
            if (!targetLayersInput || !layerWeightInput || !extraPercentageInput) return;
            
            const targetLayers = parseInt(targetLayersInput.value) || 7;
            const layerWeight = parseInt(layerWeightInput.value) || 150;
            const extraPercentage = parseInt(extraPercentageInput.value) || 12;
            
            // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑŸÖÿØÿÆŸÑÿßÿ™
            if (targetLayers < 1 || targetLayers > 20) {
                alert('‚ùå ÿπÿØÿØ ÿßŸÑÿ∑ÿ®ŸÇÿßÿ™ Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ®ŸäŸÜ 1 Ÿà 20');
                return;
            }
            
            if (layerWeight < 50 || layerWeight > 300) {
                alert('‚ùå Ÿàÿ≤ŸÜ ÿßŸÑÿ∑ÿ®ŸÇÿ© Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ®ŸäŸÜ 50 Ÿà 300 ÿ¨ÿ±ÿßŸÖ');
                return;
            }
            
            const cakeWeight = targetLayers * layerWeight;
            const extraWeight = cakeWeight * (extraPercentage / 100);
            const totalWeight = cakeWeight + extraWeight;
            
            // ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÜÿ≥ÿ® ÿßŸÑŸÖÿ´ÿßŸÑŸäÿ© ÿ•ÿ∞ÿß ŸÉÿßŸÜÿ™ ÿßŸÑÿ¨ŸàÿØÿ© ŸÖŸÜÿÆŸÅÿ∂ÿ©
            let ratios = {
                flourPct: currentRecipe.flourPct,
                butterPct: currentRecipe.butterPct,
                sugarPct: currentRecipe.sugarPct,
                honeyPct: currentRecipe.honeyPct,
                eggsPct: currentRecipe.eggsPct,
                sodaPct: currentRecipe.sodaPct
            };
            
            let useIdealRatios = false;
            if (currentAnalysis && currentAnalysis.qualityScore < 60) {
                const confirm = window.confirm(
                    `ŸàÿµŸÅÿ™ŸÉ ÿßŸÑÿ≠ÿßŸÑŸäÿ© ÿ¨ŸàÿØÿ™Ÿáÿß ${currentAnalysis.qualityScore}/100.\n\n` +
                    'ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÜÿ≥ÿ® ÿßŸÑŸÖÿ´ÿßŸÑŸäÿ© ÿπŸÑŸÖŸäÿßŸã ÿ®ÿØŸÑÿßŸã ŸÖŸÜ ÿßŸÑŸÜÿ≥ÿ® ÿßŸÑÿ≠ÿßŸÑŸäÿ©ÿü\n\n' +
                    'ŸÜÿπŸÖ = ŸÜÿ≥ÿ® ŸÖÿ´ÿßŸÑŸäÿ© ŸÖÿ∂ŸÖŸàŸÜÿ©\n' +
                    'ŸÑÿß = ÿßŸÑÿßÿ≠ÿ™ŸÅÿßÿ∏ ÿ®ŸÜÿ≥ÿ®ŸÉ ÿßŸÑÿ≠ÿßŸÑŸäÿ©'
                );
                
                if (confirm) {
                    ratios = {
                        flourPct: SCIENTIFIC_RANGES.flour.ideal,
                        butterPct: SCIENTIFIC_RANGES.butter.ideal,
                        sugarPct: 15,
                        honeyPct: 15.5,
                        eggsPct: SCIENTIFIC_RANGES.eggs.ideal,
                        sodaPct: SCIENTIFIC_RANGES.soda.ideal
                    };
                    useIdealRatios = true;
                }
            }
            
            // ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖŸÇÿßÿØŸäÿ± ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿßŸÑŸÜÿ≥ÿ®
            const flour = (ratios.flourPct / 100) * totalWeight;
            const butter = (ratios.butterPct / 100) * totalWeight;
            const sugar = (ratios.sugarPct / 100) * totalWeight;
            const honey = (ratios.honeyPct / 100) * totalWeight;
            const eggs = (ratios.eggsPct / 100) * totalWeight;
            const soda = (ratios.sodaPct / 100) * totalWeight;
            
            // ÿπÿ±ÿ∂ ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨
            const resultsDiv = document.getElementById('advancedResults');
            const calcDiv = document.getElementById('advancedCalculations');
            
            if (!resultsDiv || !calcDiv) return;
            
            calcDiv.innerHTML = `
                <div style="background: #f0f9ff; padding: 15px; border-radius: 8px; margin: 10px 0;">
                    <h4 style="color: #3182ce; margin-bottom: 10px;">üìä ŸÖŸÑÿÆÿµ ÿßŸÑÿ≠ÿ≥ÿßÿ®ÿßÿ™:</h4>
                    <p><strong>ÿßŸÑŸàÿ≤ŸÜ ÿßŸÑŸÉŸÑŸä ŸÑŸÑÿπÿ¨ŸäŸÜÿ©:</strong> ${totalWeight.toFixed(1)} ÿ¨ŸÖ</p>
                    <p><strong>Ÿàÿ≤ŸÜ ÿßŸÑŸÉŸäŸÉ ÿßŸÑŸÅÿπŸÑŸä:</strong> ${cakeWeight.toFixed(1)} ÿ¨ŸÖ (${targetLayers} ÿ∑ÿ®ŸÇÿßÿ™ √ó ${layerWeight}ÿ¨ŸÖ)</p>
                    <p><strong>ÿßŸÑŸàÿ≤ŸÜ ÿßŸÑÿ≤ÿßÿ¶ÿØ ŸÑŸÑÿ∑ÿ≠ŸÜ:</strong> ${extraWeight.toFixed(1)} ÿ¨ŸÖ (${extraPercentage}%)</p>
                </div>
                
                <hr style="margin: 20px 0; border: none; border-top: 2px solid #e2e8f0;">
                
                <h4 style="color: #2d3748; margin-bottom: 15px;">üìù ÿßŸÑŸÖŸÇÿßÿØŸäÿ± ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ©:</h4>
                <table style="width: 100%; border-collapse: collapse;">
                    <tr style="background: #f7fafc;">
                        <td style="padding: 10px; border: 1px solid #e2e8f0;"><strong>ÿØŸÇŸäŸÇ:</strong></td>
                        <td style="padding: 10px; border: 1px solid #e2e8f0;">${flour.toFixed(1)} ÿ¨ŸÖ</td>
                        <td style="padding: 10px; border: 1px solid #e2e8f0; color: #718096;">${ratios.flourPct.toFixed(1)}%</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #e2e8f0;"><strong>ÿ≤ÿ®ÿØÿ©:</strong></td>
                        <td style="padding: 10px; border: 1px solid #e2e8f0;">${butter.toFixed(1)} ÿ¨ŸÖ</td>
                        <td style="padding: 10px; border: 1px solid #e2e8f0; color: #718096;">${ratios.butterPct.toFixed(1)}%</td>
                    </tr>
                    <tr style="background: #f7fafc;">
                        <td style="padding: 10px; border: 1px solid #e2e8f0;"><strong>ÿ≥ŸÉÿ±:</strong></td>
                        <td style="padding: 10px; border: 1px solid #e2e8f0;">${sugar.toFixed(1)} ÿ¨ŸÖ</td>
                        <td style="padding: 10px; border: 1px solid #e2e8f0; color: #718096;">${ratios.sugarPct.toFixed(1)}%</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #e2e8f0;"><strong>ÿπÿ≥ŸÑ:</strong></td>
                        <td style="padding: 10px; border: 1px solid #e2e8f0;">${honey.toFixed(1)} ÿ¨ŸÖ</td>
                        <td style="padding: 10px; border: 1px solid #e2e8f0; color: #718096;">${ratios.honeyPct.toFixed(1)}%</td>
                    </tr>
                    <tr style="background: #f7fafc;">
                        <td style="padding: 10px; border: 1px solid #e2e8f0;"><strong>ÿ®Ÿäÿ∂:</strong></td>
                        <td style="padding: 10px; border: 1px solid #e2e8f0;">${eggs.toFixed(1)} ÿ¨ŸÖ</td>
                        <td style="padding: 10px; border: 1px solid #e2e8f0; color: #718096;">${ratios.eggsPct.toFixed(1)}%</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #e2e8f0;"><strong>ÿµŸàÿØÿß:</strong></td>
                        <td style="padding: 10px; border: 1px solid #e2e8f0;">${soda.toFixed(1)} ÿ¨ŸÖ</td>
                        <td style="padding: 10px; border: 1px solid #e2e8f0; color: #718096;">${ratios.sodaPct.toFixed(2)}%</td>
                    </tr>
                </table>
                
                ${useIdealRatios ? `
                    <div class="alert alert-success" style="margin-top: 15px;">
                        ‚úÖ <strong>ÿ™ŸÖ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÜÿ≥ÿ® ÿßŸÑŸÖÿ´ÿßŸÑŸäÿ© ÿπŸÑŸÖŸäÿßŸã</strong><br>
                        Ÿáÿ∞Ÿá ÿßŸÑŸÜÿ≥ÿ® ŸÖÿ®ŸÜŸäÿ© ÿπŸÑŸâ ÿ£ÿ®ÿ≠ÿßÿ´ ÿπŸÑŸÖŸäÿ© ŸÑÿ∂ŸÖÿßŸÜ ÿ£ŸÅÿ∂ŸÑ ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨.
                    </div>
                ` : ''}
            `;
            
            resultsDiv.style.display = 'block';
            
            // ÿ≠ŸÅÿ∏ ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨ ŸÖÿ§ŸÇÿ™ÿßŸã
            window.advancedResults = { 
                flour, 
                butter, 
                sugar, 
                honey, 
                eggs, 
                soda, 
                totalWeight,
                usedIdealRatios: useIdealRatios
            };
            
            // ÿßŸÑÿ™ŸÖÿ±Ÿäÿ± ÿ•ŸÑŸâ ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨
            resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
    
        /**
         * ÿ™ÿ∑ÿ®ŸäŸÇ ŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑÿ≥ŸÉŸäŸÑŸÜÿ¨ ÿßŸÑŸÖÿ™ŸÇÿØŸÖ
         */
        function applyAdvancedResults() {
            if (!window.advancedResults) {
                alert('ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÜÿ™ÿßÿ¶ÿ¨ ŸÑŸÑÿ™ÿ∑ÿ®ŸäŸÇ. ŸÇŸÖ ÿ®ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿ£ŸàŸÑÿßŸã.');
                return;
            }
            
            const results = window.advancedResults;
            
            const flourInput = document.getElementById('flour');
            const butterInput = document.getElementById('butter');
            const sugarInput = document.getElementById('sugar');
            const honeyInput = document.getElementById('honey');
            const eggsInput = document.getElementById('eggs');
            const sodaInput = document.getElementById('soda');
            
            if (flourInput) flourInput.value = results.flour.toFixed(1);
            if (butterInput) butterInput.value = results.butter.toFixed(1);
            if (sugarInput) sugarInput.value = results.sugar.toFixed(1);
            if (honeyInput) honeyInput.value = results.honey.toFixed(1);
            if (eggsInput) eggsInput.value = results.eggs.toFixed(1);
            if (sodaInput) sodaInput.value = results.soda.toFixed(1);
            
            analyzeRecipe();
            alert('‚úÖ ÿ™ŸÖ ÿ™ÿ∑ÿ®ŸäŸÇ ŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑÿ≥ŸÉŸäŸÑŸÜÿ¨ ÿßŸÑŸÖÿ™ŸÇÿØŸÖ!');
            
            // ÿßŸÑÿ™ÿ®ÿØŸäŸÑ ÿ•ŸÑŸâ ÿ™ÿ®ŸàŸäÿ® ÿßŸÑŸÖÿ≠ŸÑŸÑ
            const analyzerTab = document.querySelector('[data-tab="analyzer"]');
            if (analyzerTab) {
                analyzerTab.click();
            }
        }
    
        // ===== ÿßŸÑÿ≠ÿßÿ≥ÿ®ÿ© ÿßŸÑÿπŸÉÿ≥Ÿäÿ© ÿßŸÑŸÖÿµÿ≠ÿ≠ÿ© =====
        
        function initReverseCalculator() {
            const calculateBtn = document.getElementById('calculateReverse');
            const applyBtn = document.getElementById('applyReverseResults');
            
            if (calculateBtn) {
                calculateBtn.addEventListener('click', calculateReverseScaling);
            }
            
            if (applyBtn) {
                applyBtn.addEventListener('click', applyReverseResults);
            }
        }
    
        /**
         * ÿ≠ÿ≥ÿßÿ® ÿπŸÉÿ≥Ÿä ŸÖŸÜ ÿπÿØÿØ ÿßŸÑÿ∑ÿ®ŸÇÿßÿ™ - ŸÖÿµÿ≠ÿ≠
         */
        function calculateReverseScaling() {
            const targetLayersInput = document.getElementById('targetLayersReverse');
            const layerDiameterInput = document.getElementById('layerDiameter');
            const layerThicknessInput = document.getElementById('layerThickness');
            
            if (!targetLayersInput || !layerDiameterInput || !layerThicknessInput) return;
            
            const targetLayers = parseInt(targetLayersInput.value) || 7;
            const layerDiameter = parseFloat(layerDiameterInput.value) || 24;
            const layerThickness = parseFloat(layerThicknessInput.value) || 2;
            
            // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑŸÖÿØÿÆŸÑÿßÿ™
            if (targetLayers < 1 || targetLayers > 20) {
                alert('‚ùå ÿπÿØÿØ ÿßŸÑÿ∑ÿ®ŸÇÿßÿ™ Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ®ŸäŸÜ 1 Ÿà 20');
                return;
            }
            
            if (layerDiameter < 10 || layerDiameter > 40) {
                alert('‚ùå ŸÇÿ∑ÿ± ÿßŸÑÿ∑ÿ®ŸÇÿ© Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ®ŸäŸÜ 10 Ÿà 40 ÿ≥ŸÖ');
                return;
            }
            
            if (layerThickness < 1 || layerThickness > 5) {
                alert('‚ùå ÿ≥ŸÖÿßŸÉÿ© ÿßŸÑÿ∑ÿ®ŸÇÿ© Ÿäÿ¨ÿ® ÿ£ŸÜ ÿ™ŸÉŸàŸÜ ÿ®ŸäŸÜ 1 Ÿà 5 ŸÖŸÑŸÖ');
                return;
            }
            
            // ÿ≠ÿ≥ÿßÿ® Ÿàÿ≤ŸÜ ÿßŸÑÿ∑ÿ®ŸÇÿ© ÿßŸÑŸàÿßÿ≠ÿØÿ©
            const radius = layerDiameter / 2;
            const area = Math.PI * Math.pow(radius, 2); // ÿ≥ŸÖ¬≤
            const volume = area * (layerThickness / 10); // ÿ™ÿ≠ŸàŸäŸÑ ŸÖŸÜ ŸÖŸÑŸÖ ÿ•ŸÑŸâ ÿ≥ŸÖ
            const layerWeight = volume * DOUGH_DENSITY; // ÿ∫ÿ±ÿßŸÖ
            
            // ÿßŸÑŸàÿ≤ŸÜ ÿßŸÑŸÉŸÑŸä ŸÑŸÑŸÉŸäŸÉ
            const cakeWeight = targetLayers * layerWeight;
            
            // ÿ•ÿ∂ÿßŸÅÿ© ŸÅÿßŸÇÿØ (12% ŸÅÿßŸÇÿØ ŸÖÿ™ŸàŸÇÿπ ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑŸÅÿ±ÿØ ŸàÿßŸÑŸÇÿµ)
            const wastage = 0.12;
            const totalWeight = cakeWeight * (1 + wastage);
            
            // ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖŸÉŸàŸÜÿßÿ™ ÿ®ÿßŸÑŸÜÿ≥ÿ® ÿßŸÑŸÖÿ´ÿßŸÑŸäÿ©
            const flour = totalWeight * 0.50;
            const butter = totalWeight * 0.12;
            const sugar = totalWeight * 0.15;
            const honey = totalWeight * 0.155;
            const eggs = totalWeight * 0.095;
            const soda = totalWeight * 0.0055;
            
            // ÿπÿ±ÿ∂ ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨
            const resultsDiv = document.getElementById('reverseResults');
            const calcDiv = document.getElementById('reverseCalculations');
            
            if (!resultsDiv || !calcDiv) return;
            
            calcDiv.innerHTML = `
                <div style="background: #f0f9ff; padding: 15px; border-radius: 8px; margin: 10px 0;">
                    <h4 style="color: #3182ce; margin-bottom: 10px;">üìä ŸÖŸÑÿÆÿµ ÿßŸÑÿ≠ÿ≥ÿßÿ®ÿßÿ™:</h4>
                    <p><strong>ÿßŸÑŸàÿ≤ŸÜ ÿßŸÑŸÉŸÑŸä ŸÑŸÑÿπÿ¨ŸäŸÜÿ©:</strong> ${totalWeight.toFixed(1)} ÿ¨ŸÖ</p>
                    <p><strong>Ÿàÿ≤ŸÜ ÿßŸÑŸÉŸäŸÉ ÿßŸÑŸÅÿπŸÑŸä:</strong> ${cakeWeight.toFixed(1)} ÿ¨ŸÖ (${targetLayers} ÿ∑ÿ®ŸÇÿßÿ™)</p>
                    <p><strong>ÿßŸÑŸàÿ≤ŸÜ ÿßŸÑŸÅÿßŸÇÿØ:</strong> ${(cakeWeight * wastage).toFixed(1)} ÿ¨ŸÖ (${(wastage * 100).toFixed(0)}%)</p>
                </div>
                
                <hr style="margin: 20px 0; border: none; border-top: 2px solid #e2e8f0;">
                
                <h4 style="color: #2d3748; margin-bottom: 15px;">üìù ÿßŸÑŸÖŸÇÿßÿØŸäÿ± ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ©:</h4>
                <table style="width: 100%; border-collapse: collapse;">
                    <tr style="background: #f7fafc;">
                        <td style="padding: 10px; border: 1px solid #e2e8f0;"><strong>ÿØŸÇŸäŸÇ:</strong></td>
                        <td style="padding: 10px; border: 1px solid #e2e8f0;">${flour.toFixed(1)} ÿ¨ŸÖ</td>
                        <td style="padding: 10px; border: 1px solid #e2e8f0; color: #718096;">50%</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #e2e8f0;"><strong>ÿ≤ÿ®ÿØÿ©:</strong></td>
                        <td style="padding: 10px; border: 1px solid #e2e8f0;">${butter.toFixed(1)} ÿ¨ŸÖ</td>
                        <td style="padding: 10px; border: 1px solid #e2e8f0; color: #718096;">12%</td>
                    </tr>
                    <tr style="background: #f7fafc;">
                        <td style="padding: 10px; border: 1px solid #e2e8f0;"><strong>ÿ≥ŸÉÿ±:</strong></td>
                        <td style="padding: 10px; border: 1px solid #e2e8f0;">${sugar.toFixed(1)} ÿ¨ŸÖ</td>
                        <td style="padding: 10px; border: 1px solid #e2e8f0; color: #718096;">15%</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #e2e8f0;"><strong>ÿπÿ≥ŸÑ:</strong></td>
                        <td style="padding: 10px; border: 1px solid #e2e8f0;">${honey.toFixed(1)} ÿ¨ŸÖ</td>
                        <td style="padding: 10px; border: 1px solid #e2e8f0; color: #718096;">15.5%</td>
                    </tr>
                    <tr style="background: #f7fafc;">
                        <td style="padding: 10px; border: 1px solid #e2e8f0;"><strong>ÿ®Ÿäÿ∂:</strong></td>
                        <td style="padding: 10px; border: 1px solid #e2e8f0;">${eggs.toFixed(1)} ÿ¨ŸÖ</td>
                        <td style="padding: 10px; border: 1px solid #e2e8f0; color: #718096;">9.5%</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #e2e8f0;"><strong>ÿµŸàÿØÿß:</strong></td>
                        <td style="padding: 10px; border: 1px solid #e2e8f0;">${soda.toFixed(1)} ÿ¨ŸÖ</td>
                        <td style="padding: 10px; border: 1px solid #e2e8f0; color: #718096;">0.55%</td>
                    </tr>
                </table>
                
                <div class="alert alert-info" style="margin-top: 15px;">
                    <strong>üìê ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ∑ÿ®ŸÇÿ©:</strong>
                    <ul style="margin: 10px 0; padding-right: 20px;">
                        <li>ŸÇÿ∑ÿ± ÿßŸÑÿ∑ÿ®ŸÇÿ©: ${layerDiameter} ÿ≥ŸÖ</li>
                        <li>ÿ≥ŸÖÿßŸÉÿ© ÿßŸÑÿ∑ÿ®ŸÇÿ©: ${layerThickness} ŸÖŸÑŸÖ</li>
                        <li>Ÿàÿ≤ŸÜ ÿßŸÑÿ∑ÿ®ŸÇÿ© ÿßŸÑŸàÿßÿ≠ÿØÿ©: ${layerWeight.toFixed(1)} ÿ¨ŸÖ</li>
                        <li>ÿ≠ÿ¨ŸÖ ÿßŸÑÿ∑ÿ®ŸÇÿ©: ${volume.toFixed(1)} ÿ≥ŸÖ¬≥</li>
                    </ul>
                </div>
                
                <div class="alert alert-success" style="margin-top: 10px;">
                    ‚úÖ <strong>ÿ™ŸÖ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÜÿ≥ÿ® ÿßŸÑŸÖÿ´ÿßŸÑŸäÿ© ÿπŸÑŸÖŸäÿßŸã</strong><br>
                    ÿßŸÑÿ≠ÿ≥ÿßÿ®ÿßÿ™ ŸÖÿ®ŸÜŸäÿ© ÿπŸÑŸâ ŸÉÿ´ÿßŸÅÿ© ${DOUGH_DENSITY} ÿ¨ŸÖ/ÿ≥ŸÖ¬≥
                </div>
            `;
            
            resultsDiv.style.display = 'block';
            
            // ÿ≠ŸÅÿ∏ ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨ ŸÖÿ§ŸÇÿ™ÿßŸã
            window.reverseResults = { 
                flour, 
                butter, 
                sugar, 
                honey, 
                eggs, 
                soda, 
                totalWeight 
            };
            
            // ÿßŸÑÿ™ŸÖÿ±Ÿäÿ± ÿ•ŸÑŸâ ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨
            resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
    
        /**
         * ÿ™ÿ∑ÿ®ŸäŸÇ ŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑÿ≠ÿßÿ≥ÿ®ÿ© ÿßŸÑÿπŸÉÿ≥Ÿäÿ©
         */
        function applyReverseResults() {
            if (!window.reverseResults) {
                alert('ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÜÿ™ÿßÿ¶ÿ¨ ŸÑŸÑÿ™ÿ∑ÿ®ŸäŸÇ. ŸÇŸÖ ÿ®ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿ£ŸàŸÑÿßŸã.');
                return;
            }
            
            const results = window.reverseResults;
            
            const flourInput = document.getElementById('flour');
            const butterInput = document.getElementById('butter');
            const sugarInput = document.getElementById('sugar');
            const honeyInput = document.getElementById('honey');
            const eggsInput = document.getElementById('eggs');
            const sodaInput = document.getElementById('soda');
            
            if (flourInput) flourInput.value = results.flour.toFixed(1);
            if (butterInput) butterInput.value = results.butter.toFixed(1);
            if (sugarInput) sugarInput.value = results.sugar.toFixed(1);
            if (honeyInput) honeyInput.value = results.honey.toFixed(1);
            if (eggsInput) eggsInput.value = results.eggs.toFixed(1);
            if (sodaInput) sodaInput.value = results.soda.toFixed(1);
            
            analyzeRecipe();
            alert('‚úÖ ÿ™ŸÖ ÿ™ÿ∑ÿ®ŸäŸÇ ŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑÿ≠ÿßÿ≥ÿ®ÿ© ÿßŸÑÿπŸÉÿ≥Ÿäÿ©!');
            
            // ÿßŸÑÿ™ÿ®ÿØŸäŸÑ ÿ•ŸÑŸâ ÿ™ÿ®ŸàŸäÿ® ÿßŸÑŸÖÿ≠ŸÑŸÑ
            const analyzerTab = document.querySelector('[data-tab="analyzer"]');
            if (analyzerTab) {
                analyzerTab.click();
            }
        }
    
        // ===== ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ŸÖÿ®ÿ±ŸÜÿ¨ ÿßŸÑŸÖÿµÿ≠ÿ≠ ÿ®ÿßŸÑŸÉÿßŸÖŸÑ =====
        
        function initTemperingCalculator() {
            const calculateBtn = document.getElementById('calculateTempering');
            const autoFillBtn = document.getElementById('autoFill');
            
            if (calculateBtn) {
                calculateBtn.addEventListener('click', calculateTempering);
            }
            
            if (autoFillBtn) {
                autoFillBtn.addEventListener('click', autoFillFromRecipe);
            }
        }
    
        /**
         * ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ™ŸÖÿ®ÿ±ŸÜÿ¨ - ŸÖÿµÿ≠ÿ≠ ÿ®ÿßŸÑŸÉÿßŸÖŸÑ
         */
        function calculateTempering() {
            const eggMassInput = document.getElementById('eggMass');
            const eggTempInput = document.getElementById('eggTemp');
            const liquidMassInput = document.getElementById('liquidMass');
            const liquidTempInput = document.getElementById('liquidTemp');
            const batchCountInput = document.getElementById('batchCount');
            
            if (!eggMassInput || !eggTempInput || !liquidMassInput || !liquidTempInput || !batchCountInput) {
                alert('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ≠ŸÇŸàŸÑ');
                return;
            }
            
            const eggMass = parseFloat(eggMassInput.value);
            const eggTemp = parseFloat(eggTempInput.value);
            const liquidMass = parseFloat(liquidMassInput.value);
            const liquidTemp = parseFloat(liquidTempInput.value);
            const batchCount = parseInt(batchCountInput.value);
    
            // ÿ™ÿ≠ŸÇŸÇ ŸÖÿ≠ÿ≥ŸëŸÜ ŸÖŸÜ ÿßŸÑŸÖÿØÿÆŸÑÿßÿ™
            if (isNaN(eggMass) || isNaN(eggTemp) || isNaN(liquidMass) || isNaN(liquidTemp) || isNaN(batchCount)) {
                alert('‚ùå Ÿäÿ±ÿ¨Ÿâ ÿ•ÿØÿÆÿßŸÑ ÿ£ÿ±ŸÇÿßŸÖ ÿµÿ≠Ÿäÿ≠ÿ© ŸÅŸä ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÑ');
                return;
            }
            
            if (eggMass <= 0 || liquidMass <= 0) {
                alert('‚ùå ÿßŸÑŸÉÿ™ŸÑÿ© Ÿäÿ¨ÿ® ÿ£ŸÜ ÿ™ŸÉŸàŸÜ ÿ£ŸÉÿ®ÿ± ŸÖŸÜ ÿµŸÅÿ±');
                return;
            }
            
            if (eggTemp < 0 || eggTemp > 30) {
                alert('‚ùå ÿØÿ±ÿ¨ÿ© ÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑÿ®Ÿäÿ∂ ÿ∫Ÿäÿ± ŸÖŸÜÿ∑ŸÇŸäÿ©!\nŸäÿ¨ÿ® ÿ£ŸÜ ÿ™ŸÉŸàŸÜ ÿ®ŸäŸÜ 0-30¬∞C');
                return;
            }
            
            if (liquidTemp < 60 || liquidTemp > 120) {
                alert('‚ùå ÿØÿ±ÿ¨ÿ© ÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑÿÆŸÑŸäÿ∑ ÿ∫Ÿäÿ± ŸÖŸÜÿ∑ŸÇŸäÿ©!\nŸäÿ¨ÿ® ÿ£ŸÜ ÿ™ŸÉŸàŸÜ ÿ®ŸäŸÜ 60-120¬∞C');
                return;
            }
            
            if (batchCount < 2 || batchCount > 10) {
                alert('‚ùå ÿπÿØÿØ ÿßŸÑÿØŸÅÿπÿßÿ™ Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ®ŸäŸÜ 2 Ÿà 10');
                return;
            }
    
            const batches = calculateOptimalBatches(eggMass, eggTemp, liquidMass, liquidTemp, batchCount);
            displayTemperingResults(batches, eggMass, eggTemp, liquidMass, liquidTemp);
        }
    
        /**
         * ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿØŸÅÿπÿßÿ™ ÿßŸÑŸÖÿ´ŸÑŸâ - ŸÖÿµÿ≠ÿ≠ ŸàŸÖÿ≠ÿ≥ŸëŸÜ
         */
        function calculateOptimalBatches(eggMass, eggTemp, liquidMass, liquidTemp, batchCount) {
            const batches = [];
            let currentMass = eggMass;
            let currentTemp = eggTemp;
            
            // ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿßŸÑÿ™Ÿàÿ≤Ÿäÿπ
            const distribution = getBatchDistribution(batchCount);
            
            // ÿ∂ŸÖÿßŸÜ ÿ£ŸÜ ŸÖÿ¨ŸÖŸàÿπ ÿßŸÑÿØŸÅÿπÿßÿ™ = 100% ÿ®ÿßŸÑÿ∂ÿ®ÿ∑
            const totalDistributed = distribution.reduce((sum, p) => sum + p, 0);
            if (Math.abs(totalDistributed - 100) > 0.001) {
                distribution[distribution.length - 1] += 100 - totalDistributed;
            }
            
            // ÿ≠ÿ≥ÿßÿ® ŸÉÿ™ŸÑ ÿßŸÑÿØŸÅÿπÿßÿ™
            const batchMasses = distribution.map(percentage => (percentage / 100) * liquidMass);
            
            distribution.forEach((percentage, index) => {
                let batchMass;
                
                // ÿßŸÑÿØŸÅÿπÿ© ÿßŸÑÿ£ÿÆŸäÿ±ÿ© ÿ™ÿ£ÿÆÿ∞ ÿßŸÑÿ®ÿßŸÇŸä ÿ®ÿßŸÑÿ∂ÿ®ÿ∑ ŸÑÿ™ÿ¨ŸÜÿ® ÿ£ÿÆÿ∑ÿßÿ° ÿßŸÑÿ™ŸÇÿ±Ÿäÿ®
                if (index === distribution.length - 1) {
                    const previousMass = batches.reduce((sum, b) => sum + b.mass, 0);
                    batchMass = liquidMass - previousMass;
                } else {
                    batchMass = batchMasses[index];
                }
                
                // ÿßŸÑŸÖÿπÿßÿØŸÑÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±Ÿäÿ© ÿßŸÑÿµÿ≠Ÿäÿ≠ÿ©: Conservation of Energy
                const newTemp = (currentMass * currentTemp + batchMass * liquidTemp) / (currentMass + batchMass);
                
                batches.push({
                    batchNumber: index + 1,
                    mass: parseFloat(batchMass.toFixed(2)),
                    percentage: percentage,
                    tempBefore: parseFloat(currentTemp.toFixed(1)),
                    tempAfter: parseFloat(newTemp.toFixed(1)),
                    totalMass: parseFloat((currentMass + batchMass).toFixed(2))
                });
                
                currentMass += batchMass;
                currentTemp = newTemp;
            });
            
            return batches;
        }
    
        /**
         * ÿ™Ÿàÿ≤Ÿäÿπ ÿßŸÑÿØŸÅÿπÿßÿ™ - ŸÖÿµÿ≠ÿ≠ ŸÖÿπ ÿØÿπŸÖ ÿ£Ÿä ÿπÿØÿØ
         */
        function getBatchDistribution(batchCount) {
            // ÿ™Ÿàÿ≤Ÿäÿπÿßÿ™ ŸÖÿ≠ÿØÿØÿ© ŸÖÿ≥ÿ®ŸÇÿßŸã ŸÑŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿ¥ÿßÿ¶ÿπÿ©
            const distributions = {
                2: [55, 45],
                3: [40, 35, 25],
                4: [30, 30, 25, 15],
                5: [25, 25, 20, 15, 15],
                6: [20, 20, 20, 15, 15, 10],
                7: [18, 17, 16, 15, 14, 12, 8],
                8: [15, 15, 14, 13, 12, 11, 10, 10],
                9: [13, 13, 12, 12, 11, 11, 10, 9, 9],
                10: [12, 12, 11, 11, 10, 10, 9, 9, 8, 8]
            };
            
            if (distributions[batchCount]) {
                return distributions[batchCount];
            }
            
            // ÿ™ŸàŸÑŸäÿØ ÿØŸäŸÜÿßŸÖŸäŸÉŸä ŸÑŸÑÿ£ÿπÿØÿßÿØ ÿßŸÑÿ£ÿÆÿ±Ÿâ
            const base = Math.floor(100 / batchCount);
            const remainder = 100 - (base * batchCount);
            const dist = Array(batchCount).fill(base);
            
            // ÿ™Ÿàÿ≤Ÿäÿπ ÿßŸÑÿ®ÿßŸÇŸä ÿπŸÑŸâ ÿßŸÑÿØŸÅÿπÿßÿ™ ÿßŸÑÿ£ŸàŸÑŸâ
            for (let i = 0; i < remainder; i++) {
                dist[i]++;
            }
            
            return dist;
        }
    
        /**
         * ÿπÿ±ÿ∂ ŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑÿ™ŸÖÿ®ÿ±ŸÜÿ¨ - ŸÖÿ≠ÿ≥ŸëŸÜ
         */
        function displayTemperingResults(batches, eggMass, eggTemp, liquidMass, liquidTemp) {
            const finalTemp = batches[batches.length - 1].tempAfter;
            
            // ÿπÿ±ÿ∂ ÿßŸÑÿ™ÿØÿ±ÿ¨ ÿßŸÑÿ≠ÿ±ÿßÿ±Ÿä
            let progressionHTML = `<div class="timeline-temp ${finalTemp > 68 ? 'danger' : finalTemp > 65 ? 'warning' : 'success'}">`;
            progressionHTML += `üå°Ô∏è ÿßŸÑÿ™ÿØÿ±ÿ¨ ÿßŸÑÿ≠ÿ±ÿßÿ±Ÿä: `;
            
            batches.forEach((batch, index) => {
                if (index === 0) {
                    progressionHTML += `${batch.tempBefore}¬∞C ‚Üí `;
                }
                progressionHTML += `${batch.tempAfter}¬∞C`;
                if (index < batches.length - 1) progressionHTML += ' ‚Üí ';
            });
            progressionHTML += `</div>`;
            
            // ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ© ÿßŸÑŸÜÿ∏ÿ±Ÿäÿ© (ŸÑŸÑÿ™ÿ≠ŸÇŸÇ)
            const theoreticalFinal = (eggMass * eggTemp + liquidMass * liquidTemp) / (eggMass + liquidMass);
            
            // ÿ¨ÿØŸàŸÑ ÿßŸÑÿØŸÅÿπÿßÿ™
            let batchesHTML = `
                <h5 style="margin-top: 20px;">üìã ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿØŸÅÿπÿßÿ™:</h5>
                <div class="alert alert-info">
                    <strong>ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ© ÿßŸÑŸÖÿ™ŸàŸÇÿπÿ©: ${theoreticalFinal.toFixed(1)}¬∞C</strong> 
                    <span style="font-size: 0.9em; color: #718096;">(ŸÖÿ≠ÿ≥Ÿàÿ®ÿ© ŸÖŸÜ ÿßŸÑŸÖÿ¨ŸÖŸàÿπ ÿßŸÑŸÉŸÑŸä)</span>
                    ${Math.abs(theoreticalFinal - finalTemp) < 0.5 ? 
                        '<br><span style="color: #38a169;">‚úÖ ÿßŸÑÿ™ÿ∑ÿßÿ®ŸÇ ŸÖŸÖÿ™ÿßÿ≤ ŸÖÿπ ÿßŸÑÿ≠ÿ≥ÿßÿ®ÿßÿ™ ÿßŸÑÿ™ÿØÿ±Ÿäÿ¨Ÿäÿ©</span>' : 
                        '<br><span style="color: #d69e2e;">‚ö†Ô∏è ŸÅÿ±ŸÇ ÿ∑ŸÅŸäŸÅ ÿ®ÿ≥ÿ®ÿ® ÿßŸÑÿ™ŸÇÿ±Ÿäÿ®</span>'
                    }
                </div>
                <table style="width: 100%; margin-top: 10px;">
                    <tr>
                        <th>ÿßŸÑÿØŸÅÿπÿ©</th>
                        <th>ÿßŸÑŸÉŸÖŸäÿ©</th>
                        <th>ÿßŸÑŸÜÿ≥ÿ®ÿ©</th>
                        <th>ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ŸÇÿ®ŸÑ</th>
                        <th>ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿ®ÿπÿØ</th>
                        <th>ÿßŸÑÿ≠ÿßŸÑÿ©</th>
                    </tr>
            `;
            
            batches.forEach(batch => {
                let status, statusText, statusClass;
                
                if (batch.tempAfter > 68) {
                    status = '‚ùå';
                    statusText = 'ÿÆÿ∑Ÿäÿ±';
                    statusClass = 'score-low';
                } else if (batch.tempAfter > 65) {
                    status = '‚ö†Ô∏è';
                    statusText = 'ÿ™ÿ≠ÿ∞Ÿäÿ±';
                    statusClass = 'score-medium';
                } else {
                    status = '‚úÖ';
                    statusText = 'ÿ¢ŸÖŸÜ';
                    statusClass = 'score-high';
                }
                
                batchesHTML += `<tr>
                    <td>ÿßŸÑÿØŸÅÿπÿ© ${batch.batchNumber}</td>
                    <td>${batch.mass.toFixed(1)}ÿ∫</td>
                    <td>${batch.percentage}%</td>
                    <td>${batch.tempBefore}¬∞C</td>
                    <td>${batch.tempAfter}¬∞C</td>
                    <td class="${statusClass}">${status} ${statusText}</td>
                </tr>`;
            });
            batchesHTML += '</table>';
            
            // ÿßŸÑÿ™ÿ≠ÿ∞Ÿäÿ±ÿßÿ™ ŸàÿßŸÑÿ≠ŸÑŸàŸÑ
            let warningsHTML = '';
            
            if (finalTemp > 68) {
                warningsHTML = `
                    <div class="alert alert-danger">
                        <strong>üö´ ÿÆÿ∑ÿ± ÿßŸÑÿ™ÿÆÿ´ÿ±!</strong> ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ© ${finalTemp.toFixed(1)}¬∞C ÿ™ÿ™ÿ¨ÿßŸàÿ≤ ÿ≠ÿØ ÿßŸÑÿ£ŸÖÿßŸÜ 68¬∞C
                        <br><strong>ŸÖŸÑÿßÿ≠ÿ∏ÿ©:</strong> ÿ≤ŸäÿßÿØÿ© ÿπÿØÿØ ÿßŸÑÿØŸÅÿπÿßÿ™ <strong>ŸÑŸÜ ÿ™ÿÆŸÅÿ∂</strong> ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ©
                    </div>
                    ${getPracticalSolutions(eggMass, eggTemp, liquidMass, liquidTemp, finalTemp)}
                `;
            } else if (finalTemp > 65) {
                warningsHTML = `
                    <div class="alert alert-warning">
                        <strong>‚ö†Ô∏è ŸÅŸä ŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑÿÆÿ∑ÿ±!</strong> ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ© ${finalTemp.toFixed(1)}¬∞C ŸÇÿ±Ÿäÿ®ÿ© ŸÖŸÜ ÿßŸÑÿ≠ÿØ ÿßŸÑÿ¢ŸÖŸÜ
                        <br>ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ© ÿ´ÿßÿ®ÿ™ÿ© ÿ®ÿ∫ÿ∂ ÿßŸÑŸÜÿ∏ÿ± ÿπŸÜ ÿπÿØÿØ ÿßŸÑÿØŸÅÿπÿßÿ™
                    </div>
                    ${getPracticalSolutions(eggMass, eggTemp, liquidMass, liquidTemp, finalTemp)}
                `;
            } else {
                warningsHTML = `
                    <div class="alert alert-success">
                        <strong>‚úÖ ÿ¢ŸÖŸÜ ÿ™ŸÖÿßŸÖÿßŸã!</strong> ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ© ${finalTemp.toFixed(1)}¬∞C ÿ∂ŸÖŸÜ ÿßŸÑŸÜÿ∑ÿßŸÇ ÿßŸÑÿ¢ŸÖŸÜ
                        <div style="margin-top: 10px;">
                            <strong>ŸÜÿµÿßÿ¶ÿ≠ ŸÑŸÑŸÜÿ™Ÿäÿ¨ÿ© ÿßŸÑŸÖÿ´ŸÑŸâ:</strong>
                            <ul style="margin: 10px 0; padding-right: 20px;">
                                <li>ÿ£ÿ∂ŸÅ ŸÉŸÑ ÿØŸÅÿπÿ© ÿ®ÿ®ÿ∑ÿ° ŸÖÿπ ÿßŸÑÿÆŸÅŸÇ ÿßŸÑŸÖÿ≥ÿ™ŸÖÿ±</li>
                                <li>ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ™ÿ¨ÿßŸÜÿ≥ ÿßŸÑÿÆŸÑŸäÿ∑ ÿ®ÿπÿØ ŸÉŸÑ ÿØŸÅÿπÿ©</li>
                                <li>ŸÑÿß ÿ™ÿπŸäÿØ ÿßŸÑÿ™ÿ≥ÿÆŸäŸÜ ÿ®ÿπÿØ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ®Ÿäÿ∂</li>
                                <li>ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿ™ÿ±ŸÖŸàŸÖÿ™ÿ± ÿØŸÇŸäŸÇ ŸÑŸÑŸÖÿ±ÿßŸÇÿ®ÿ©</li>
                            </ul>
                        </div>
                    </div>
                `;
            }
            
            // ÿπÿ±ÿ∂ ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨
            const progressionDiv = document.getElementById('temperatureProgression');
            const batchDetailsDiv = document.getElementById('batchDetails');
            const warningsDiv = document.getElementById('safetyWarnings');
            const resultsDiv = document.getElementById('temperingResults');
            
            if (progressionDiv) progressionDiv.innerHTML = progressionHTML;
            if (batchDetailsDiv) batchDetailsDiv.innerHTML = batchesHTML;
            if (warningsDiv) warningsDiv.innerHTML = warningsHTML;
            if (resultsDiv) resultsDiv.style.display = 'block';
            
            updateTemperatureVisualization(batches);
            
            // ÿßŸÑÿ™ŸÖÿ±Ÿäÿ± ÿ•ŸÑŸâ ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨
            if (resultsDiv) {
                resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        }
    
        /**
         * ÿßŸÑÿ≠ŸÑŸàŸÑ ÿßŸÑÿπŸÖŸÑŸäÿ© - ÿßŸÑŸÖÿπÿßÿØŸÑÿßÿ™ ÿßŸÑŸÅŸäÿ≤Ÿäÿßÿ¶Ÿäÿ© ÿßŸÑÿµÿ≠Ÿäÿ≠ÿ©
         */
        function getPracticalSolutions(eggMass, eggTemp, liquidMass, liquidTemp, finalTemp) {
            const T_SAFE = 66; // ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑÿ¢ŸÖŸÜÿ© ÿßŸÑŸÖÿ≥ÿ™ŸáÿØŸÅÿ©
            
            // ÿßŸÑÿ≠ŸÑ 1: ÿ£ŸÇÿµŸâ ŸÉÿ™ŸÑÿ© ÿ≥ÿßÿÆŸÜÿ© ŸÑŸÑŸàÿµŸàŸÑ ŸÑŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑŸÖÿ≥ÿ™ŸáÿØŸÅÿ©
            const maxMass = maxHotMassForTarget(eggMass, eggTemp, liquidTemp, T_SAFE);
            
            // ÿßŸÑÿ≠ŸÑ 2: ÿ£ŸÇÿµŸâ ÿ≠ÿ±ÿßÿ±ÿ© ŸÑŸÑÿÆŸÑŸäÿ∑ ÿßŸÑÿ≥ÿßÿÆŸÜ
            const maxTemp = maxHotTempForTarget(eggMass, eggTemp, liquidMass, T_SAFE);
            
            // ÿßŸÑÿ≠ŸÑ 3: ÿ≤ŸäÿßÿØÿ© ÿßŸÑÿ®Ÿäÿ∂ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ©
            const eggIncrease = neededEggIncrease(eggMass, eggTemp, liquidMass, liquidTemp, T_SAFE);
            
            let solutionsHTML = `
                <div class="alert alert-info" style="margin-top: 15px;">
                    <strong>üí° ŸÑŸÖÿßÿ∞ÿß ÿ™ÿ∏ŸÑ ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ© ÿ´ÿßÿ®ÿ™ÿ©ÿü</strong><br>
                    ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ© ÿ™ÿπÿ™ŸÖÿØ ÿπŸÑŸâ <strong>ÿßŸÑŸÉÿ™ŸÑÿ© ÿßŸÑŸÉŸÑŸäÿ© ŸàÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ©</strong> ŸàŸÑŸäÿ≥ ÿπŸÑŸâ ÿπÿØÿØ ÿßŸÑÿØŸÅÿπÿßÿ™.
                    ÿ≤ŸäÿßÿØÿ© ÿßŸÑÿØŸÅÿπÿßÿ™ ÿ™ÿ≠ÿ≥ŸÜ ÿßŸÑÿ™ÿØÿ±ÿ¨ ÿßŸÑŸÖÿ±ÿ≠ŸÑŸä ŸÑŸÉŸÜ <strong>ŸÑÿß ÿ™ÿ∫Ÿäÿ± ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ©</strong>.
                </div>
                
                <div class="alert alert-warning">
                    <strong>üéØ ÿßŸÑÿ≠ŸÑŸàŸÑ ÿßŸÑÿπŸÖŸÑŸäÿ© ŸÑÿÆŸÅÿ∂ ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿ•ŸÑŸâ ${T_SAFE}¬∞C:</strong>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin: 15px 0;">
            `;
            
            // ÿßŸÑÿ≠ŸÑ 1: ÿ™ŸÇŸÑŸäŸÑ ŸÉÿ™ŸÑÿ© ÿßŸÑÿÆŸÑŸäÿ∑ ÿßŸÑÿ≥ÿßÿÆŸÜ
            solutionsHTML += `
                <div style="background: #f0f9ff; padding: 15px; border-radius: 8px; border-right: 4px solid #3182ce;">
                    <h4 style="color: #3182ce; margin-bottom: 10px;">üìâ ÿ™ŸÇŸÑŸäŸÑ ÿßŸÑŸÉÿ™ŸÑÿ©</h4>
                    <p><strong>ÿÆŸÅ ÿßŸÑŸÉÿ™ŸÑÿ© ÿ•ŸÑŸâ:</strong></p>
                    <p style="font-size: 18px; font-weight: bold; color: #3182ce; margin: 10px 0;">${maxMass.toFixed(1)} ÿ∫</p>
                    <small style="color: #718096;">ÿ®ÿØŸÑÿßŸã ŸÖŸÜ ${liquidMass.toFixed(1)} ÿ∫</small>
                    <button class="btn" style="margin-top: 8px; background: #3182ce; color: white; width: 100%; padding: 8px;" onclick="applyMassSolution(${maxMass.toFixed(1)})">ÿ™ÿ∑ÿ®ŸäŸÇ</button>
                </div>
            `;
            
            // ÿßŸÑÿ≠ŸÑ 2: ÿÆŸÅÿ∂ ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ©
            solutionsHTML += `
                <div style="background: #f0fff4; padding: 15px; border-radius: 8px; border-right: 4px solid #38a169;">
                    <h4 style="color: #38a169; margin-bottom: 10px;">üå°Ô∏è ÿÆŸÅÿ∂ ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ©</h4>
                    <p><strong>ÿ®ÿ±ÿØ ÿßŸÑÿÆŸÑŸäÿ∑ ÿ•ŸÑŸâ:</strong></p>
                    <p style="font-size: 18px; font-weight: bold; color: #38a169; margin: 10px 0;">${maxTemp.toFixed(1)}¬∞C</p>
                    <small style="color: #718096;">ÿ®ÿØŸÑÿßŸã ŸÖŸÜ ${liquidTemp.toFixed(1)}¬∞C</small>
                    <button class="btn" style="margin-top: 8px; background: #38a169; color: white; width: 100%; padding: 8px;" onclick="applyTempSolution(${maxTemp.toFixed(1)})">ÿ™ÿ∑ÿ®ŸäŸÇ</button>
                </div>
            `;
            
            // ÿßŸÑÿ≠ŸÑ 3: ÿ≤ŸäÿßÿØÿ© ÿßŸÑÿ®Ÿäÿ∂
            const newEggMass = eggMass + Math.max(0, eggIncrease);
            solutionsHTML += `
                <div style="background: #fffaf0; padding: 15px; border-radius: 8px; border-right: 4px solid #d69e2e;">
                    <h4 style="color: #d69e2e; margin-bottom: 10px;">ü•ö ÿ≤ŸäÿßÿØÿ© ÿßŸÑÿ®Ÿäÿ∂</h4>
                    <p><strong>ÿ£ÿ∂ŸÅ ÿ®Ÿäÿ∂ÿßŸã:</strong></p>
                    <p style="font-size: 18px; font-weight: bold; color: #d69e2e; margin: 10px 0;">+${Math.max(0, eggIncrease).toFixed(1)} ÿ∫</p>
                    <small style="color: #718096;">ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä: ${newEggMass.toFixed(1)} ÿ∫</small>
                    <button class="btn" style="margin-top: 8px; background: #d69e2e; color: white; width: 100%; padding: 8px;" onclick="applyEggSolution(${newEggMass.toFixed(1)})">ÿ™ÿ∑ÿ®ŸäŸÇ</button>
                </div>
            `;
            
            solutionsHTML += `</div>`;
            
            // ÿ¥ÿ±ÿ≠ ÿ•ÿ∂ÿßŸÅŸä
            solutionsHTML += `
                <div class="alert alert-success">
                    <strong>üìö ŸÖŸÑÿßÿ≠ÿ∏ÿ© ÿπŸÑŸÖŸäÿ©:</strong>
                    <ul style="margin: 10px 0; padding-right: 20px; font-size: 0.95em;">
                        <li>ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ© = (ÿßŸÑŸÉÿ™ŸÑÿ©‚ÇÅ √ó ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ©‚ÇÅ + ÿßŸÑŸÉÿ™ŸÑÿ©‚ÇÇ √ó ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ©‚ÇÇ) √∑ (ÿßŸÑŸÉÿ™ŸÑÿ©‚ÇÅ + ÿßŸÑŸÉÿ™ŸÑÿ©‚ÇÇ)</li>
                        <li>ŸÑÿÆŸÅÿ∂ ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ©ÿå Ÿäÿ¨ÿ® ÿ™ÿ∫ŸäŸäÿ± ÿ£ÿ≠ÿØ Ÿáÿ∞Ÿá ÿßŸÑŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿßŸÑÿ£ÿ±ÿ®ÿπÿ©</li>
                        <li>ÿπÿØÿØ ÿßŸÑÿØŸÅÿπÿßÿ™ Ÿäÿ§ÿ´ÿ± ÿπŸÑŸâ <strong>ÿßŸÑÿ™ÿØÿ±ÿ¨ ÿßŸÑŸÖÿ±ÿ≠ŸÑŸä</strong> ŸÅŸÇÿ∑ ŸàŸÑŸäÿ≥ ÿπŸÑŸâ ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ© ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ©</li>
                    </ul>
                </div>
            `;
            
            return solutionsHTML;
        }
    
        /**
         * ÿßŸÑŸÖÿπÿßÿØŸÑÿßÿ™ ÿßŸÑŸÅŸäÿ≤Ÿäÿßÿ¶Ÿäÿ© - ÿµÿ≠Ÿäÿ≠ÿ© 100%
         */
        
        // ÿ≠ÿ≥ÿßÿ® ÿ£ŸÇÿµŸâ ŸÉÿ™ŸÑÿ© ÿ≥ÿßÿÆŸÜÿ© ŸÑŸÑŸàÿµŸàŸÑ ŸÑÿ≠ÿ±ÿßÿ±ÿ© ŸÖÿ≥ÿ™ŸáÿØŸÅÿ©
        function maxHotMassForTarget(M0, T0, tHot, Ttarget) {
            if (tHot <= Ttarget) return Infinity;
            if (Ttarget <= T0) return 0;
            return (M0 * (Ttarget - T0)) / (tHot - Ttarget);
        }
    
        // ÿ≠ÿ≥ÿßÿ® ÿ£ŸÇÿµŸâ ÿ≠ÿ±ÿßÿ±ÿ© ŸÑŸÑÿÆŸÑŸäÿ∑ ÿßŸÑÿ≥ÿßÿÆŸÜ ŸÑŸÑŸàÿµŸàŸÑ ŸÑÿ≠ÿ±ÿßÿ±ÿ© ŸÖÿ≥ÿ™ŸáÿØŸÅÿ©
        function maxHotTempForTarget(M0, T0, Mhot, Ttarget) {
            if (Mhot <= 0) return Infinity;
            const result = (Ttarget * (M0 + Mhot) - M0 * T0) / Mhot;
            return Math.max(T0, result); // ŸÑÿß ŸäŸÖŸÉŸÜ ÿ£ŸÜ ÿ™ŸÉŸàŸÜ ÿ£ŸÇŸÑ ŸÖŸÜ ÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑÿ®ÿØÿßŸäÿ©
        }
    
        // ÿ≠ÿ≥ÿßÿ® ÿ≤ŸäÿßÿØÿ© ÿßŸÑÿ®Ÿäÿ∂ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© ŸÑŸÑŸàÿµŸàŸÑ ŸÑÿ≠ÿ±ÿßÿ±ÿ© ŸÖÿ≥ÿ™ŸáÿØŸÅÿ©
        function neededEggIncrease(eggMass, eggTemp, liquidMass, liquidTemp, Ttarget) {
            if (Ttarget <= eggTemp) return 0;
            if (liquidTemp <= Ttarget) return 0;
            const neededTotalEgg = (liquidMass * (liquidTemp - Ttarget)) / (Ttarget - eggTemp);
            const increase = neededTotalEgg - eggMass;
            return Math.max(0, increase);
        }
    
        /**
         * ÿØŸàÿßŸÑ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä ŸÑŸÑÿ≠ŸÑŸàŸÑ
         */
        window.applyMassSolution = function(newMass) {
            const liquidMassInput = document.getElementById('liquidMass');
            if (liquidMassInput) {
                liquidMassInput.value = newMass;
                calculateTempering();
                alert(`‚úÖ ÿ™ŸÖ ÿ™ÿπÿØŸäŸÑ ŸÉÿ™ŸÑÿ© ÿßŸÑÿÆŸÑŸäÿ∑ ÿ•ŸÑŸâ ${newMass} ÿ∫`);
            }
        };
    
        window.applyTempSolution = function(newTemp) {
            const liquidTempInput = document.getElementById('liquidTemp');
            if (liquidTempInput) {
                liquidTempInput.value = newTemp;
                calculateTempering();
                alert(`‚úÖ ÿ™ŸÖ ÿ™ÿπÿØŸäŸÑ ÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑÿÆŸÑŸäÿ∑ ÿ•ŸÑŸâ ${newTemp}¬∞C`);
            }
        };
    
        window.applyEggSolution = function(newEggMass) {
            const eggMassInput = document.getElementById('eggMass');
            if (eggMassInput) {
                eggMassInput.value = newEggMass;
                calculateTempering();
                alert(`‚úÖ ÿ™ŸÖ ÿ™ÿπÿØŸäŸÑ ŸÉÿ™ŸÑÿ© ÿßŸÑÿ®Ÿäÿ∂ ÿ•ŸÑŸâ ${newEggMass} ÿ∫`);
            }
        };
    
        /**
         * ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ÿµŸàÿ± ÿßŸÑŸÖÿ±ÿ¶Ÿä ŸÑÿØÿ±ÿ¨ÿßÿ™ ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ©
         */
        function updateTemperatureVisualization(batches) {
            const viz = document.getElementById('temperatureVisualization');
            if (!viz) return;
            
            const finalTemp = batches[batches.length - 1].tempAfter;
            const minTemp = 20;
            const maxTemp = 85;
            
            let indicatorsHTML = '';
            
            batches.forEach(batch => {
                const batchPercentage = Math.min(100, Math.max(0, ((batch.tempAfter - minTemp) / (maxTemp - minTemp)) * 100));
                const isDanger = batch.tempAfter > 68;
                const isWarning = batch.tempAfter > 65 && batch.tempAfter <= 68;
                const color = isDanger ? '#e53e3e' : isWarning ? '#d69e2e' : '#38a169';
                
                indicatorsHTML += `
                    <div style="
                        position: absolute; 
                        left: ${batchPercentage}%; 
                        top: -8px; 
                        width: 4px; 
                        height: 46px; 
                        background: ${color};
                        border-radius: 2px;
                        box-shadow: 0 0 3px rgba(0,0,0,0.3);
                    "></div>
                    <div style="
                        position: absolute;
                        left: ${batchPercentage}%;
                        top: 35px;
                        transform: translateX(-50%);
                        background: white;
                        padding: 2px 6px;
                        border-radius: 3px;
                        font-size: 11px;
                        font-weight: bold;
                        color: ${color};
                        border: 1px solid ${color};
                        white-space: nowrap;
                    ">${batch.tempAfter}¬∞</div>
                `;
            });
            
            // ÿÆÿ∑Ÿàÿ∑ ÿßŸÑÿ≠ÿØŸàÿØ ÿßŸÑÿ≠ÿ±ÿ¨ÿ©
            const dangerLine = ((68 - minTemp) / (maxTemp - minTemp)) * 100;
            const warningLine = ((65 - minTemp) / (maxTemp - minTemp)) * 100;
            
            indicatorsHTML += `
                <div style="position: absolute; left: ${dangerLine}%; top: -10px; width: 2px; height: 50px; background: #e53e3e; border-left: 2px dashed #e53e3e;"></div>
                <div style="position: absolute; left: ${warningLine}%; top: -10px; width: 2px; height: 50px; background: #d69e2e; border-left: 2px dashed #d69e2e;"></div>
            `;
            
            viz.innerHTML = indicatorsHTML;
        }
    
        /**
         * ÿßŸÑÿ™ÿπÿ®ÿ¶ÿ© ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿäÿ© ŸÖŸÜ ÿßŸÑŸàÿµŸÅÿ©
         */
        function autoFillFromRecipe() {
            if (!currentRecipe) {
                alert('Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑŸàÿµŸÅÿ© ÿ£ŸàŸÑÿßŸã ŸÅŸä ÿ™ÿ®ŸàŸäÿ® ÿßŸÑŸÖÿ≠ŸÑŸÑ ÿßŸÑÿπŸÑŸÖŸä');
                return;
            }
            
            const liquidMass = currentRecipe.butter + currentRecipe.sugar + currentRecipe.honey + currentRecipe.soda;
            
            const eggMassInput = document.getElementById('eggMass');
            const liquidMassInput = document.getElementById('liquidMass');
            const batchCountInput = document.getElementById('batchCount');
            
            if (eggMassInput) eggMassInput.value = currentRecipe.eggs.toFixed(1);
            if (liquidMassInput) liquidMassInput.value = liquidMass.toFixed(1);
            if (batchCountInput) batchCountInput.value = '5'; // 5 ÿØŸÅÿπÿßÿ™ ŸÑŸÑÿ≥ŸÑÿßŸÖÿ©
            
            alert('‚úÖ ÿ™ŸÖ ÿßŸÑÿ™ÿπÿ®ÿ¶ÿ© ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿäÿ© ŸÖŸÜ ÿßŸÑŸàÿµŸÅÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©');
        }
    
        // ===== ŸÖÿ≠ŸàŸÑ ÿßŸÑŸÖŸÜŸáÿ¨Ÿäÿßÿ™ ÿßŸÑŸÖÿµÿ≠ÿ≠ =====
        
        function initMethodConverter() {
            // ÿ≥Ÿäÿ™ŸÖ ÿ±ÿ®ÿ∑ ÿßŸÑÿ£ÿ≠ÿØÿßÿ´ ÿπŸÜÿØ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ÿ®ŸàŸäÿ®
        }
    
        function switchMethod(method) {
            const scientificBtn = document.getElementById('scientific-method-btn');
            const allInOneBtn = document.getElementById('all-in-one-method-btn');
            const scientificContent = document.getElementById('scientific-method-content');
            const allInOneContent = document.getElementById('all-in-one-method-content');
            
            if (!scientificBtn || !allInOneBtn || !scientificContent || !allInOneContent) return;
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑŸÜÿ¥ÿ∑ÿ©
            scientificBtn.classList.toggle('active', method === 'scientific');
            allInOneBtn.classList.toggle('active', method === 'all-in-one');
            
            // ÿ•ÿ∏Ÿáÿßÿ± ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑŸÖŸÜÿßÿ≥ÿ®
            scientificContent.classList.toggle('active', method === 'scientific');
            allInOneContent.classList.toggle('active', method === 'all-in-one');
        }
    
        function convertToAllInOne() {
            if (!currentRecipe) {
                alert('Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑŸàÿµŸÅÿ© ÿ£ŸàŸÑÿßŸã ŸÅŸä ÿ™ÿ®ŸàŸäÿ® ÿßŸÑŸÖÿ≠ŸÑŸÑ ÿßŸÑÿπŸÑŸÖŸä');
                return;
            }
            
            const confirmConvert = confirm(
                '‚ö†Ô∏è ÿ™ÿ≠ÿ∞Ÿäÿ±: ÿ∑ÿ±ŸäŸÇÿ© "ÿßŸÑŸÉŸÑ ÿØŸÅÿπÿ© Ÿàÿßÿ≠ÿØÿ©" ŸÖÿ≠ŸÅŸàŸÅÿ© ÿ®ÿßŸÑŸÖÿÆÿßÿ∑ÿ±:\n\n' +
                '‚Ä¢ ÿÆÿ∑ÿ± ÿ™ÿÆÿ´ÿ± ÿ®ÿ±Ÿàÿ™ŸäŸÜ ÿßŸÑÿ®Ÿäÿ∂ (70% ÿßÿ≠ÿ™ŸÖÿßŸÑŸäÿ©)\n' +
                '‚Ä¢ ÿπÿ¨ŸäŸÜÿ© ŸÑÿ≤ÿ¨ÿ© ÿ™ÿ≠ÿ™ÿßÿ¨ ÿÆÿ®ÿ±ÿ© ŸÅŸä ÿßŸÑÿ™ÿπÿßŸÖŸÑ\n' + 
                '‚Ä¢ ŸÜÿ™ÿßÿ¶ÿ¨ ÿ∫Ÿäÿ± ŸÖÿ™ÿ≥ŸÇÿ© ÿ®ŸäŸÜ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™\n\n' +
                'ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ© ŸÑŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ ÿßŸÑŸÖÿ™ŸÇÿØŸÖŸäŸÜ ŸÅŸÇÿ∑ÿü'
            );
            
            if (!confirmConvert) return;
            
            // ÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑÿ™ÿπÿØŸäŸÑÿßÿ™ ŸÑŸÑÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿ≥ÿ±Ÿäÿπÿ©
            const adjustedRecipe = {
                ...currentRecipe,
                eggs: currentRecipe.eggs * 0.9,  // ÿ™ŸÇŸÑŸäŸÑ ÿßŸÑÿ®Ÿäÿ∂ 10%
                flour: currentRecipe.flour * 1.05, // ÿ≤ŸäÿßÿØÿ© ÿßŸÑÿØŸÇŸäŸÇ 5%
            };
            
            // ÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑÿ™ÿπÿØŸäŸÑÿßÿ™ ÿπŸÑŸâ ÿßŸÑŸàÿßÿ¨Ÿáÿ©
            const eggsInput = document.getElementById('eggs');
            const flourInput = document.getElementById('flour');
            
            if (eggsInput) eggsInput.value = adjustedRecipe.eggs.toFixed(1);
            if (flourInput) flourInput.value = adjustedRecipe.flour.toFixed(1);
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ
            analyzeRecipe();
            
            // ÿπÿ±ÿ∂ ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨
            const methodContent = document.getElementById('all-in-one-method-content');
            if (methodContent) {
                // ÿ•ÿ≤ÿßŸÑÿ© alert ÿßŸÑŸÇÿØŸäŸÖ ÿ•ŸÜ Ÿàÿ¨ÿØ
                const oldAlert = methodContent.querySelector('.conversion-result');
                if (oldAlert) oldAlert.remove();
                
                const resultAlert = document.createElement('div');
                resultAlert.className = 'alert alert-info conversion-result';
                resultAlert.style.marginTop = '15px';
                resultAlert.innerHTML = `
                    <strong>‚úÖ ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿ®ŸÜÿ¨ÿßÿ≠:</strong>
                    <ul style="margin: 10px 0; padding-right: 20px;">
                        <li>ÿßŸÑÿ®Ÿäÿ∂: ${currentRecipe.eggs.toFixed(1)}ÿ∫ ‚Üí ${adjustedRecipe.eggs.toFixed(1)}ÿ∫ (-10%)</li>
                        <li>ÿßŸÑÿØŸÇŸäŸÇ: ${currentRecipe.flour.toFixed(1)}ÿ∫ ‚Üí ${adjustedRecipe.flour.toFixed(1)}ÿ∫ (+5%)</li>
                        <li>ŸàŸÇÿ™ ÿßŸÑÿ±ÿßÿ≠ÿ©: 30-60 ‚Üí 15 ÿØŸÇŸäŸÇÿ©</li>
                        <li>ÿÆÿ∑ÿ± ÿßŸÑÿ™ÿÆÿ´ÿ±: ŸÖŸÜÿÆŸÅÿ∂ ‚Üí ŸÖÿ™Ÿàÿ≥ÿ∑</li>
                    </ul>
                    <p style="margin-top: 10px; color: #d69e2e;"><strong>ÿ™ÿ≠ÿ∞Ÿäÿ±:</strong> Ÿáÿ∞Ÿá ÿßŸÑÿ∑ÿ±ŸäŸÇÿ© ŸÑŸÑÿÆÿ®ÿ±ÿßÿ° ŸÅŸÇÿ∑!</p>
                `;
                methodContent.appendChild(resultAlert);
            }
            
            alert('‚úÖ ÿ™ŸÖ ÿ™ÿ∑ÿ®ŸäŸÇ ÿ™ÿπÿØŸäŸÑÿßÿ™ ÿ∑ÿ±ŸäŸÇÿ© "ÿßŸÑŸÉŸÑ ÿØŸÅÿπÿ© Ÿàÿßÿ≠ÿØÿ©"');
        }
    
        // ===== ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ŸÇŸäŸäŸÖ ÿßŸÑŸÖÿ≠ÿ≥ŸëŸÜ =====
        
        function initRatingSystem() {
            // ÿßŸÑŸÜÿ¨ŸàŸÖ
            const stars = document.querySelectorAll('.star');
            stars.forEach(star => {
                star.addEventListener('click', function() {
                    const rating = parseInt(this.getAttribute('data-rating'));
                    currentRating = rating;
                    
                    stars.forEach(s => {
                        const sRating = parseInt(s.getAttribute('data-rating'));
                        s.classList.toggle('active', sRating <= rating);
                    });
                });
            });
            
            // ŸÜÿ¨ÿßÿ≠/ŸÅÿ¥ŸÑ
            const successBtns = document.querySelectorAll('.success-btn, .failure-btn');
            successBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    successBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentSuccess = this.classList.contains('success-btn');
                });
            });
            
            // ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿπŸÑŸäŸÇ
            const saveFeedbackBtn = document.getElementById('saveFeedback');
            if (saveFeedbackBtn) {
                saveFeedbackBtn.addEventListener('click', saveRecipeFeedback);
            }
        }
    
        /**
         * ÿ≠ŸÅÿ∏ ÿ™ÿπŸÑŸäŸÇ ÿßŸÑŸàÿµŸÅÿ©
         */
        function saveRecipeFeedback() {
            if (savedRecipes.length === 0) {
                alert('ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸàÿµŸÅÿ© ŸÖÿ≠ŸÅŸàÿ∏ÿ© ÿ≠ÿØŸäÿ´ÿßŸã ŸÑŸÑÿ™ÿπŸÑŸäŸÇ ÿπŸÑŸäŸáÿß');
                return;
            }
            
            const commentArea = document.getElementById('recipeComment');
            if (!commentArea) return;
            
            const comment = commentArea.value.trim();
            
            if (currentRating === 0) {
                alert('Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿ™ŸÇŸäŸäŸÖ ÿ®ÿßŸÑŸÜÿ¨ŸàŸÖ');
                return;
            }
            
            if (currentSuccess === null) {
                alert('Ÿäÿ±ÿ¨Ÿâ ÿ™ÿµŸÜŸäŸÅ ÿßŸÑŸàÿµŸÅÿ© (ŸÜÿ¨ÿ≠ÿ™/ŸÅÿ¥ŸÑÿ™)');
                return;
            }
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿ¢ÿÆÿ± ŸàÿµŸÅÿ© ŸÖÿ≠ŸÅŸàÿ∏ÿ© ÿ®ÿßŸÑÿ™ŸÇŸäŸäŸÖ
            const lastRecipe = savedRecipes[savedRecipes.length - 1];
            lastRecipe.rating = currentRating;
            lastRecipe.success = currentSuccess;
            lastRecipe.comment = comment;
            lastRecipe.scientificScore = currentAnalysis?.qualityScore || 0;
            lastRecipe.feedbackDate = new Date().toISOString();
            
            saveRecipesToStorage();
            updateLibraryTab();
            
            alert('‚úÖ ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿπŸÑŸäŸÇ ŸàÿßŸÑÿ™ŸÇŸäŸäŸÖ ÿ®ŸÜÿ¨ÿßÿ≠!');
            
            // ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑÿ≠ŸÇŸàŸÑ
            commentArea.value = '';
            currentRating = 0;
            currentSuccess = null;
            
            document.querySelectorAll('.star').forEach(star => star.classList.remove('active'));
            document.querySelectorAll('.success-btn, .failure-btn').forEach(btn => btn.classList.remove('active'));
        }
    
        // ===== ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿπŸÑŸÖŸä ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿä =====
        
        /**
         * ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑŸàÿµŸÅÿ© - ÿßŸÑÿØÿßŸÑÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©
         */
        function analyzeRecipe() {
            const recipe = getRecipeFromInputs();
            if (!recipe) return;
            
            currentRecipe = recipe;
            currentAnalysis = performScientificAnalysis(recipe);
            
            displayAnalysisResults();
            updateAllTabs();
        }
    
        /**
         * ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿßŸÑŸàÿµŸÅÿ© ŸÖŸÜ ÿßŸÑŸÖÿØÿÆŸÑÿßÿ™ - ŸÖÿ≠ÿ≥ŸëŸÜ
         */
        function getRecipeFromInputs() {
            const flourInput = document.getElementById('flour');
            const butterInput = document.getElementById('butter');
            const sugarInput = document.getElementById('sugar');
            const honeyInput = document.getElementById('honey');
            const eggsInput = document.getElementById('eggs');
            const sodaInput = document.getElementById('soda');
            
            if (!flourInput || !butterInput || !sugarInput || !honeyInput || !eggsInput || !sodaInput) {
                console.error('ÿ®ÿπÿ∂ ÿ≠ŸÇŸàŸÑ ÿßŸÑŸÖÿØÿÆŸÑÿßÿ™ ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØÿ©');
                return null;
            }
            
            const flour = parseFloat(flourInput.value) || 0;
            const butter = parseFloat(butterInput.value) || 0;
            const sugar = parseFloat(sugarInput.value) || 0;
            const honey = parseFloat(honeyInput.value) || 0;
            const eggs = parseFloat(eggsInput.value) || 0;
            const soda = parseFloat(sodaInput.value) || 0;
            
            // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿµÿ≠ÿ© ÿßŸÑŸÖÿØÿÆŸÑÿßÿ™
            if (flour < 0 || butter < 0 || sugar < 0 || honey < 0 || eggs < 0 || soda < 0) {
                alert('‚ùå ÿßŸÑŸÇŸäŸÖ ÿßŸÑÿ≥ÿßŸÑÿ®ÿ© ÿ∫Ÿäÿ± ŸÖÿ≥ŸÖŸàÿ≠ÿ©!');
                return null;
            }
            
            if (flour > 5000 || butter > 2000 || sugar > 2000 || honey > 2000 || eggs > 1000 || soda > 100) {
                alert('‚ö†Ô∏è ÿ•ÿ≠ÿØŸâ ÿßŸÑŸÇŸäŸÖ ŸÉÿ®Ÿäÿ±ÿ© ÿ¨ÿØÿßŸã! ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿßŸÑŸàÿ≠ÿØÿßÿ™ (ÿ¨ÿ±ÿßŸÖ)');
                return null;
            }
            
            const total = flour + butter + sugar + honey + eggs + soda;
            
            if (total <= 0) {
                alert('‚ùå ÿßŸÑŸÖÿ¨ŸÖŸàÿπ ÿßŸÑŸÉŸÑŸä Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ£ŸÉÿ®ÿ± ŸÖŸÜ ÿßŸÑÿµŸÅÿ±!');
                return null;
            }
            
            return {
                flour,
                butter,
                sugar,
                honey,
                eggs,
                soda,
                total,
                flourPct: (flour / total) * 100,
                butterPct: (butter / total) * 100,
                sugarPct: (sugar / total) * 100,
                honeyPct: (honey / total) * 100,
                eggsPct: (eggs / total) * 100,
                sodaPct: (soda / total) * 100,
                sugarsPct: ((sugar + honey) / total) * 100
            };
        }
    
        /**
         * ÿ™ÿ≠ŸÑŸäŸÑ ÿπŸÑŸÖŸä ŸÑŸÑŸàÿµŸÅÿ©
         */
        function performScientificAnalysis(recipe) {
            const analysis = {};
            let qualityScore = 100;
            
            analysis.flour = checkRange(recipe.flourPct, SCIENTIFIC_RANGES.flour);
            analysis.butter = checkRange(recipe.butterPct, SCIENTIFIC_RANGES.butter);
            analysis.sugars = checkRange(recipe.sugarsPct, SCIENTIFIC_RANGES.sugars);
            analysis.eggs = checkRange(recipe.eggsPct, SCIENTIFIC_RANGES.eggs);
            analysis.soda = checkRange(recipe.sodaPct, SCIENTIFIC_RANGES.soda);
            
            // ÿÆÿµŸÖ ŸÜŸÇÿßÿ∑ ŸÑŸÉŸÑ ŸÖŸÉŸàŸÜ ÿÆÿßÿ±ÿ¨ ÿßŸÑŸÜÿ∑ÿßŸÇ
            Object.values(analysis).forEach(item => {
                if (item.status === 'low' || item.status === 'high') {
                    qualityScore -= 20;
                }
            });
            
            analysis.qualityScore = Math.max(0, qualityScore);
            
            return analysis;
        }
    
        /**
         * ŸÅÿ≠ÿµ ŸÜÿ∑ÿßŸÇ ÿßŸÑŸÖŸÉŸàŸÜ
         */
        function checkRange(value, range) {
            if (value < range.min) {
                return { 
                    status: 'low', 
                    message: `ŸÖŸÜÿÆŸÅÿ∂ (${range.min}-${range.max}% ŸÖÿ´ÿßŸÑŸä)`,
                    deviation: range.min - value
                };
            } else if (value > range.max) {
                return { 
                    status: 'high', 
                    message: `ŸÖÿ±ÿ™ŸÅÿπ (${range.min}-${range.max}% ŸÖÿ´ÿßŸÑŸä)`,
                    deviation: value - range.max
                };
            } else {
                return { 
                    status: 'optimal', 
                    message: `ŸÖÿ´ÿßŸÑŸä (${range.min}-${range.max}%)`,
                    deviation: 0
                };
            }
        }
    
        /**
         * ÿπÿ±ÿ∂ ŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ - ŸÖÿ≠ÿ≥ŸëŸÜ
         */
        function displayAnalysisResults() {
            if (!currentRecipe || !currentAnalysis) return;
            
            const resultDiv = document.getElementById('analysis-result');
            if (!resultDiv) return;
            
            const score = currentAnalysis.qualityScore;
            const scoreClass = score >= 80 ? 'score-high' : score >= 60 ? 'score-medium' : 'score-low';
            
            let html = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <div class="quality-score ${scoreClass}" style="display: inline-block; font-size: 24px; padding: 15px 30px;">
                        ${score}/100 ‚≠ê
                    </div>
                    <div class="progress-bar" style="margin-top: 15px;">
                        <div class="progress-fill ${scoreClass.replace('score-', 'progress-')}" style="width: ${score}%"></div>
                    </div>
                </div>
                
                <table>
                    <tr>
                        <th>ÿßŸÑŸÖŸÉŸàŸÜ</th>
                        <th>ÿßŸÑÿ¨ÿ±ÿßŸÖÿßÿ™</th>
                        <th>ÿßŸÑŸÜÿ≥ÿ®ÿ© %</th>
                        <th>ÿßŸÑÿ≠ÿßŸÑÿ©</th>
                    </tr>
            `;
            
            html += addTableRow('ÿØŸÇŸäŸÇ', currentRecipe.flour, currentRecipe.flourPct, currentAnalysis.flour);
            html += addTableRow('ÿ≤ÿ®ÿØÿ©', currentRecipe.butter, currentRecipe.butterPct, currentAnalysis.butter);
            html += addTableRow('ÿ≥ŸÉÿ±', currentRecipe.sugar, currentRecipe.sugarPct, {status: 'info', message: 'ÿ¨ÿ≤ÿ° ŸÖŸÜ ÿßŸÑÿ≥ŸÉÿ±Ÿäÿßÿ™'});
            html += addTableRow('ÿπÿ≥ŸÑ', currentRecipe.honey, currentRecipe.honeyPct, {status: 'info', message: 'ÿ¨ÿ≤ÿ° ŸÖŸÜ ÿßŸÑÿ≥ŸÉÿ±Ÿäÿßÿ™'});
            html += addTableRow('ÿ≥ŸÉÿ±Ÿäÿßÿ™ ŸÉŸÑŸä', currentRecipe.sugar + currentRecipe.honey, currentRecipe.sugarsPct, currentAnalysis.sugars);
            html += addTableRow('ÿ®Ÿäÿ∂', currentRecipe.eggs, currentRecipe.eggsPct, currentAnalysis.eggs);
            html += addTableRow('ÿµŸàÿØÿß', currentRecipe.soda, currentRecipe.sodaPct, currentAnalysis.soda);
            
            html += `</table>`;
            
            // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ™ŸÜÿ®ÿ§ ÿ®ÿßŸÑŸÖÿ¥ÿßŸÉŸÑ
            const predictions = predictProblems(currentRecipe, currentAnalysis);
            if (predictions.warnings.length > 0) {
                html += `<div class="prediction-warning" style="margin-top: 20px;">`;
                html += `<h4>‚ö†Ô∏è ÿ™ŸÜÿ®ÿ§ ÿ®ÿßŸÑŸÖÿ¥ÿßŸÉŸÑ ÿßŸÑŸÖÿ≠ÿ™ŸÖŸÑÿ© (${predictions.overallRisk}% ÿÆÿ∑Ÿàÿ±ÿ©)</h4>`;
                predictions.warnings.forEach(warning => {
                    const alertClass = warning.severity === 'high' ? 'alert-danger' : 
                                     warning.severity === 'medium' ? 'alert-warning' : 'alert-info';
                    html += `
                        <div class="alert ${alertClass}" style="margin: 10px 0;">
                            <strong>${warning.problem}</strong> (${warning.probability}% ÿßÿ≠ÿ™ŸÖÿßŸÑŸäÿ©)<br>
                            <span style="font-size: 0.9em;">ÿßŸÑÿ≥ÿ®ÿ®: ${warning.reason}</span><br>
                            <span style="color: #38a169;"><strong>ÿßŸÑÿ≠ŸÑ:</strong> ${warning.solution}</span>
                        </div>
                    `;
                });
                html += `</div>`;
            }
            
            // ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ™ÿßŸÖŸäÿ©
            html += `<div class="alert ${score >= 80 ? 'alert-success' : score >= 60 ? 'alert-warning' : 'alert-danger'}" style="margin-top: 20px;">`;
            if (score >= 80) {
                html += `<strong>‚úÖ ŸàÿµŸÅÿ™ŸÉ ŸÖŸÖÿ™ÿßÿ≤ÿ© ÿπŸÑŸÖŸäÿßŸã!</strong> ÿßŸÑŸÜÿ≥ÿ® ÿ∂ŸÖŸÜ ÿßŸÑŸÜÿ∑ÿßŸÇÿßÿ™ ÿßŸÑŸÖÿ´ŸÑŸâ.`;
            } else if (score >= 60) {
                html += `<strong>‚ö†Ô∏è ŸàÿµŸÅÿ™ŸÉ ÿ¨ŸäÿØÿ© ŸàŸÑŸÉŸÜ ŸäŸÖŸÉŸÜ ÿ™ÿ≠ÿ≥ŸäŸÜŸáÿß:</strong> ÿ®ÿπÿ∂ ÿßŸÑŸÜÿ≥ÿ® ÿÆÿßÿ±ÿ¨ ÿßŸÑŸÜÿ∑ÿßŸÇ ÿßŸÑŸÖÿ´ÿßŸÑŸä.`;
            } else {
                html += `<strong>‚ùå ŸàÿµŸÅÿ™ŸÉ ÿ™ÿ≠ÿ™ÿßÿ¨ ÿ™ÿ≠ÿ≥ŸäŸÜÿßÿ™:</strong> ÿßŸÑÿπÿØŸäÿØ ŸÖŸÜ ÿßŸÑŸÜÿ≥ÿ® ÿÆÿßÿ±ÿ¨ ÿßŸÑŸÜÿ∑ÿßŸÇ ÿßŸÑÿπŸÑŸÖŸä.`;
            }
            html += `</div>`;
            
            resultDiv.innerHTML = html;
        }
    
        /**
         * ÿ•ÿ∂ÿßŸÅÿ© ÿµŸÅ ŸÅŸä ÿßŸÑÿ¨ÿØŸàŸÑ
         */
        function addTableRow(ingredient, grams, percent, analysis) {
            const statusClass = analysis.status === 'optimal' ? 'score-high' : 
                              analysis.status === 'low' ? 'score-medium' :
                              analysis.status === 'high' ? 'score-low' : '';
            const statusText = analysis.status === 'optimal' ? '‚úÖ' : 
                             analysis.status === 'low' ? '‚ö†Ô∏è' :
                             analysis.status === 'high' ? '‚ùå' : '‚ÑπÔ∏è';
            
            return `
                <tr>
                    <td><strong>${ingredient}</strong></td>
                    <td>${grams.toFixed(1)}ÿ∫</td>
                    <td>${percent.toFixed(1)}%</td>
                    <td><span class="${statusClass}">${statusText} ${analysis.message}</span></td>
                </tr>
            `;
        }
    
        /**
         * ÿßŸÑÿ™ŸÜÿ®ÿ§ ÿ®ÿßŸÑŸÖÿ¥ÿßŸÉŸÑ - ŸÖŸÜÿ∑ŸÇ ŸÖÿ≠ÿ≥ŸëŸÜ
         */
        function predictProblems(recipe, analysis) {
            const warnings = [];
            let overallRisk = 0;
            
            // 1. ŸÅÿ≠ÿµ ÿπÿØŸÖ ÿßŸÑÿ™Ÿàÿßÿ≤ŸÜ ÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿä
            if (recipe.sodaPct > 0.7 && recipe.honeyPct < 8) {
                warnings.push({
                    severity: 'high',
                    problem: 'ÿ∑ÿπŸÖ ŸÇŸÑŸàŸä (ÿµÿßÿ®ŸàŸÜŸä)',
                    reason: 'ÿßŸÑÿµŸàÿØÿß ÿπÿßŸÑŸäÿ© ŸàÿßŸÑÿπÿ≥ŸÑ ŸÖŸÜÿÆŸÅÿ∂',
                    probability: 85,
                    solution: 'ÿ≤ÿØ ÿßŸÑÿπÿ≥ŸÑ ÿ®ŸÄ 30% ÿ£Ÿà ŸÇŸÑŸÑ ÿßŸÑÿµŸàÿØÿß ÿ®ŸÄ 25%'
                });
                overallRisk += 25;
            }
            
            // 2. ŸÅÿ≠ÿµ ŸÖÿ¥ÿßŸÉŸÑ ÿßŸÑŸÇŸàÿßŸÖ
            if (recipe.flourPct < 48 && recipe.sugarsPct > 32) {
                warnings.push({
                    severity: 'medium',
                    problem: 'ÿπÿ¨ŸäŸÜÿ© ŸÑÿ≤ÿ¨ÿ© ÿ¨ÿØÿßŸã',
                    reason: 'ÿ≥Ÿàÿßÿ¶ŸÑ ÿπÿßŸÑŸäÿ© ŸàÿßŸÑÿØŸÇŸäŸÇ ŸÖŸÜÿÆŸÅÿ∂',
                    probability: 70,
                    solution: 'ÿ≤ÿØ ÿßŸÑÿØŸÇŸäŸÇ ÿ®ŸÄ 50-80 ÿ∫ÿ±ÿßŸÖ'
                });
                overallRisk += 15;
            }
            
            // 3. ŸÅÿ≠ÿµ ŸÖÿ¥ÿßŸÉŸÑ ÿßŸÑŸÑŸàŸÜ
            if (recipe.sodaPct < 0.4) {
                warnings.push({
                    severity: 'low',
                    problem: 'ŸÑŸàŸÜ ÿ®ÿßŸáÿ™',
                    reason: 'ÿßŸÑÿµŸàÿØÿß ŸÇŸÑŸäŸÑÿ© ŸÑÿ™ŸÅÿπŸäŸÑ ÿ™ŸÅÿßÿπŸÑ Maillard',
                    probability: 60,
                    solution: 'ÿ≤ÿØ ÿßŸÑÿµŸàÿØÿß ÿ®ŸÄ 1-2 ÿ∫ÿ±ÿßŸÖ'
                });
                overallRisk += 10;
            }
            
            // 4. ŸÅÿ≠ÿµ ÿßŸÑÿ™Ÿàÿßÿ≤ŸÜ ÿßŸÑÿπÿßŸÖ
            if (analysis.qualityScore < 60) {
                warnings.push({
                    severity: 'medium',
                    problem: 'ŸàÿµŸÅÿ© ÿ∫Ÿäÿ± ŸÖÿ™Ÿàÿßÿ≤ŸÜÿ©',
                    reason: 'ÿ¨ŸàÿØÿ© ÿßŸÑŸàÿµŸÅÿ© ŸÖŸÜÿÆŸÅÿ∂ÿ© ÿ®ŸÜÿßÿ° ÿπŸÑŸâ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿπŸÑŸÖŸä',
                    probability: 75,
                    solution: 'ÿ±ÿßÿ¨ÿπ ŸÜÿµÿßÿ¶ÿ≠ ÿßŸÑŸÖÿ≥ÿ™ÿ¥ÿßÿ± ÿßŸÑÿπŸÑŸÖŸä'
                });
                overallRisk += 20;
            }
            
            return {
                warnings: warnings,
                overallRisk: Math.min(overallRisk, 100),
                riskLevel: overallRisk > 50 ? 'high' : overallRisk > 25 ? 'medium' : 'low'
            };
        }
    
        // ===== ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ÿ®ŸàŸäÿ®ÿßÿ™ =====
        
        function updateAllTabs() {
            updateConverterTab();
            updateScientificTab();
            updateCalculatorTab();
            updateAdvisorTab();
            updateLibraryTab();
        }
    
        /**
         * ÿ™ÿ≠ÿØŸäÿ´ ÿ™ÿ®ŸàŸäÿ® ÿßŸÑŸÖÿ≠ŸàŸÑ
         */
        function updateConverterTab() {
            const content = document.getElementById('converter-content');
            if (!content || !currentRecipe) return;
            
            content.innerHTML = `
                <div class="alert alert-info">
                    <strong>üîÑ ŸÖÿ≠ŸàŸÑ ÿßŸÑŸÖŸÜŸáÿ¨Ÿäÿßÿ™ ÿßŸÑŸÖÿ™ŸÇÿØŸÖ:</strong> 
                    ÿ™ÿ≠ŸàŸäŸÑ ÿ®ŸäŸÜ ÿßŸÑÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿπŸÑŸÖŸäÿ© ÿßŸÑÿ¢ŸÖŸÜÿ© Ÿàÿ∑ÿ±ŸäŸÇÿ© "ÿßŸÑŸÉŸÑ ÿØŸÅÿπÿ© Ÿàÿßÿ≠ÿØÿ©" ÿßŸÑÿ≥ÿ±Ÿäÿπÿ©.
                </div>
                
                <div class="scaling-mode-toggle" style="margin: 20px 0;">
                    <button class="btn-mode active" id="scientific-method-btn">üî¨ ÿßŸÑÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿπŸÑŸÖŸäÿ©</button>
                    <button class="btn-mode" id="all-in-one-method-btn">‚ö° ÿßŸÑŸÉŸÑ ÿØŸÅÿπÿ© Ÿàÿßÿ≠ÿØÿ©</button>
                </div>
                
                <div id="scientific-method-content" class="method-content active">
                    <h3>üî¨ ÿßŸÑÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿπŸÑŸÖŸäÿ© (ŸÖÿ≥ÿ™ÿ≠ÿ≥ŸÜ ŸÑŸÑŸÖÿ®ÿ™ÿØÿ¶ŸäŸÜ)</h3>
                    <div class="alert alert-success">
                        <strong>ŸÖÿ≤ÿßŸäÿß:</strong> ÿ™ÿ¨ŸÜÿ® ÿ™ÿÆÿ´ÿ± ÿßŸÑÿ®ÿ±Ÿàÿ™ŸäŸÜ - ŸÜÿ™ÿßÿ¶ÿ¨ ŸÖÿ™ÿ≥ŸÇÿ© - ÿ¨ŸàÿØÿ© ÿπÿßŸÑŸäÿ©
                    </div>
                    
                    <div class="method-steps">
                        <h4>ÿßŸÑÿÆÿ∑Ÿàÿßÿ™:</h4>
                        <ol style="padding-right: 20px;">
                            <li>ÿ™ÿ≥ÿÆŸäŸÜ ÿßŸÑÿ≤ÿ®ÿØÿ© + ÿßŸÑÿ≥ŸÉÿ± + ÿßŸÑÿπÿ≥ŸÑ ÿ•ŸÑŸâ 115-120¬∞C</li>
                            <li>ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿµŸàÿØÿß ŸàÿßŸÑÿ™ÿ≠ÿ±ŸäŸÉ ÿßŸÑÿ≥ÿ±Ÿäÿπ (ÿ≥Ÿäÿ≠ÿØÿ´ ŸÅŸàÿ±ÿßŸÜ)</li>
                            <li>ÿßŸÑÿ™ÿ®ÿ±ŸäÿØ ÿ•ŸÑŸâ 85-90¬∞C ÿ´ŸÖ ÿßŸÑÿ™ŸÖÿ®ÿ±ŸÜÿ¨ ÿßŸÑÿ¢ŸÖŸÜ</li>
                            <li>ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ®Ÿäÿ∂ ÿπŸÑŸâ 3-5 ÿØŸÅÿπÿßÿ™ ŸÖÿπ ÿßŸÑÿÆŸÅŸÇ ÿßŸÑŸÖÿ≥ÿ™ŸÖÿ±</li>
                            <li>ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿØŸÇŸäŸÇ ŸàÿßŸÑÿπÿ¨ŸÜ ÿßŸÑÿÆŸÅŸäŸÅ</li>
                            <li>ÿßŸÑÿ±ÿßÿ≠ÿ© ŸÅŸä ÿßŸÑÿ´ŸÑÿßÿ¨ÿ© 30-60 ÿØŸÇŸäŸÇÿ©</li>
                        </ol>
                    </div>
                </div>
                
                <div id="all-in-one-method-content" class="method-content">
                    <h3>‚ö° ÿßŸÑŸÉŸÑ ÿØŸÅÿπÿ© Ÿàÿßÿ≠ÿØÿ© (ŸÑŸÑŸÖÿ™ŸÇÿØŸÖŸäŸÜ ŸÅŸÇÿ∑)</h3>
                    <div class="alert alert-warning">
                        <strong>ÿ™ÿ≠ÿ∞Ÿäÿ±:</strong> ÿÆÿ∑ÿ± ÿ™ÿÆÿ´ÿ± ÿßŸÑÿ®ÿ±Ÿàÿ™ŸäŸÜ - Ÿäÿ≠ÿ™ÿßÿ¨ ÿÆÿ®ÿ±ÿ© - ŸÜÿ™ÿßÿ¶ÿ¨ ÿ∫Ÿäÿ± ŸÖÿ∂ŸÖŸàŸÜÿ©
                    </div>
                    
                    <div class="method-steps">
                        <h4>ÿßŸÑÿÆÿ∑Ÿàÿßÿ™:</h4>
                        <ol style="padding-right: 20px;">
                            <li>ÿÆŸÑÿ∑ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖŸÉŸàŸÜÿßÿ™ ÿØŸÅÿπÿ© Ÿàÿßÿ≠ÿØÿ© ŸÅŸä Ÿàÿπÿßÿ°</li>
                            <li>ÿßŸÑÿπÿ¨ŸÜ ŸÖÿ®ÿßÿ¥ÿ±ÿ© ÿØŸàŸÜ ÿ™ÿ®ÿ±ŸäÿØ</li>
                            <li>ÿßŸÑÿ±ÿßÿ≠ÿ© 15 ÿØŸÇŸäŸÇÿ© ŸÅŸÇÿ∑ ŸÅŸä ÿßŸÑÿ´ŸÑÿßÿ¨ÿ©</li>
                        </ol>
                    </div>
                    
                    <div class="conversion-notes">
                        <h4>ÿßŸÑÿ™ÿπÿØŸäŸÑÿßÿ™ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© ŸÑŸÑÿ™ÿ≠ŸàŸäŸÑ:</h4>
                        <ul style="padding-right: 20px;">
                            <li>ÿ™ŸÇŸÑŸäŸÑ ÿßŸÑÿ®Ÿäÿ∂ 10% ŸÑÿ™ÿ¨ŸÜÿ® ÿßŸÑÿ™ÿÆÿ´ÿ±</li>
                            <li>ÿ™ŸÇŸÑŸäŸÑ ŸàŸÇÿ™ ÿßŸÑÿÆÿ®ÿ≤ 1-2 ÿØŸÇŸäŸÇÿ©</li>
                            <li>ÿ≤ŸäÿßÿØÿ© ÿßŸÑÿØŸÇŸäŸÇ 5% ŸÑŸÖŸàÿßÿ≤ŸÜÿ© ÿßŸÑÿ≥ŸäŸàŸÑÿ©</li>
                        </ul>
                    </div>
                    
                    <button class="btn btn-warning" id="convert-to-all-in-one" style="margin-top: 15px;">
                        ‚ö° ÿ™ÿ≠ŸàŸäŸÑ ÿ•ŸÑŸâ "ÿßŸÑŸÉŸÑ ÿØŸÅÿπÿ© Ÿàÿßÿ≠ÿØÿ©"
                    </button>
                </div>
            `;
            
            // ÿ•ÿπÿßÿØÿ© ÿ±ÿ®ÿ∑ ÿßŸÑÿ£ÿ≠ÿØÿßÿ´
            const scientificBtn = document.getElementById('scientific-method-btn');
            const allInOneBtn = document.getElementById('all-in-one-method-btn');
            const convertBtn = document.getElementById('convert-to-all-in-one');
            
            if (scientificBtn) {
                scientificBtn.addEventListener('click', () => switchMethod('scientific'));
            }
            
            if (allInOneBtn) {
                allInOneBtn.addEventListener('click', () => switchMethod('all-in-one'));
            }
            
            if (convertBtn) {
                convertBtn.addEventListener('click', convertToAllInOne);
            }
        }
    
        /**
         * ÿ™ÿ≠ÿØŸäÿ´ ÿ™ÿ®ŸàŸäÿ® ÿßŸÑÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿπŸÑŸÖŸäÿ©
         */
        function updateScientificTab() {
            const content = document.getElementById('scientific-content');
            if (!content || !currentRecipe) return;
            
            content.innerHTML = `
                <div class="alert alert-success">
                    <strong>üî¨ ÿßŸÑÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿπŸÑŸÖŸäÿ© ÿßŸÑŸÖÿ´ŸÑŸâ:</strong> 
                    ÿ™ÿ≥ŸÑÿ≥ŸÑ ÿØŸÇŸäŸÇ Ÿäÿ≠ÿßŸÅÿ∏ ÿπŸÑŸâ ÿßŸÑÿÆŸàÿßÿµ ÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿäÿ© ŸàÿßŸÑŸÅŸäÿ≤Ÿäÿßÿ¶Ÿäÿ© ŸÑŸÑŸÖŸÉŸàŸÜÿßÿ™.
                </div>
                
                <div class="timeline">
                    <div class="timeline-item">
                        <div class="timeline-time">ÿßŸÑÿÆÿ∑Ÿàÿ© 1: ÿ™ÿ≠ÿ∂Ÿäÿ± ÿßŸÑÿ£ÿ≥ÿßÿ≥ ÿßŸÑÿ≠ŸÑŸà</div>
                        <div class="timeline-temp">üå°Ô∏è 115-120¬∞C</div>
                        <p>ÿ™ÿ≥ÿÆŸäŸÜ ${currentRecipe.butter.toFixed(1)}ÿ∫ ÿ≤ÿ®ÿØÿ© + ${currentRecipe.sugar.toFixed(1)}ÿ∫ ÿ≥ŸÉÿ± + ${currentRecipe.honey.toFixed(1)}ÿ∫ ÿπÿ≥ŸÑ</p>
                        <p class="scientific-note">üî¨ <em>Ÿáÿ∞Ÿá ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿ™ÿ∂ŸÖŸÜ ÿ∞Ÿàÿ®ÿßŸÜ ÿßŸÑŸÉÿ±Ÿäÿ≥ÿ™ÿßŸÑÿßÿ™ Ÿàÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿµŸàÿØÿß</em></p>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="timeline-time">ÿßŸÑÿÆÿ∑Ÿàÿ© 2: ÿ™ŸÅÿßÿπŸÑ ÿßŸÑÿµŸàÿØÿß ÿßŸÑÿ≠ÿßÿ≥ŸÖ</div>
                        <div class="timeline-temp">üå°Ô∏è 115-120¬∞C</div>
                        <p>ÿ•ÿ∂ÿßŸÅÿ© ${currentRecipe.soda.toFixed(1)}ÿ∫ ÿµŸàÿØÿß ŸÖÿπ ÿßŸÑÿ™ÿ≠ÿ±ŸäŸÉ ÿßŸÑÿ≥ÿ±Ÿäÿπ - ÿ≥Ÿäÿ≠ÿØÿ´ ŸÅŸàÿ±ÿßŸÜ</p>
                        <p class="scientific-note">üî¨ <em>ÿßŸÑÿ™ŸÅÿßÿπŸÑ: NaHCO‚ÇÉ + H‚Å∫ ‚Üí Na‚Å∫ + CO‚ÇÇ + H‚ÇÇO</em></p>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="timeline-time">ÿßŸÑÿÆÿ∑Ÿàÿ© 3: ÿßŸÑÿ™ÿ®ÿ±ŸäÿØ ŸÑŸÑÿ™ŸÖÿ®Ÿäÿ± ÿßŸÑÿ¢ŸÖŸÜ</div>
                        <div class="timeline-temp success">üå°Ô∏è 85-90¬∞C</div>
                        <p>ÿ™ÿ®ÿ±ŸäÿØ ÿßŸÑÿÆŸÑŸäÿ∑ ÿ•ŸÑŸâ 85-90¬∞C ÿßÿ≥ÿ™ÿπÿØÿßÿØÿßŸã ŸÑŸÑÿ™ŸÖÿ®Ÿäÿ±</p>
                        <p class="scientific-note">üî¨ <em>ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑŸÖÿ´ŸÑŸâ ŸÑŸÑÿ™ŸÖÿ®Ÿäÿ± ÿßŸÑÿ¢ŸÖŸÜ ŸÑŸÑÿ®ÿ±Ÿàÿ™ŸäŸÜ</em></p>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="timeline-time">ÿßŸÑÿÆÿ∑Ÿàÿ© 4: ÿßŸÑÿ™ŸÖÿ®ÿ±ŸÜÿ¨ ÿßŸÑÿπŸÑŸÖŸä (3-5 ÿØŸÅÿπÿßÿ™)</div>
                        <div class="timeline-temp success">üå°Ô∏è 65-68¬∞C ŸÜŸáÿßÿ¶Ÿä</div>
                        <p>ÿ•ÿ∂ÿßŸÅÿ© ${currentRecipe.eggs.toFixed(1)}ÿ∫ ÿ®Ÿäÿ∂ ÿπŸÑŸâ ÿØŸÅÿπÿßÿ™ ŸÖÿπ ÿßŸÑÿÆŸÅŸÇ ÿßŸÑŸÖÿ≥ÿ™ŸÖÿ±</p>
                        <p class="scientific-note">üî¨ <em>ÿßŸÑÿØŸÅÿπÿßÿ™ ÿ™ŸÖŸÜÿπ ÿµÿØŸÖÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ŸÑŸÑÿ®ÿ±Ÿàÿ™ŸäŸÜ Ÿàÿ™ÿ≠ÿßŸÅÿ∏ ÿπŸÑŸâ ÿßŸÑÿßÿ≥ÿ™ÿ≠ŸÑÿßÿ®</em></p>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="timeline-time">ÿßŸÑÿÆÿ∑Ÿàÿ© 5: ÿØŸÖÿ¨ ÿßŸÑÿØŸÇŸäŸÇ ÿßŸÑŸÖÿØÿ±Ÿàÿ≥</div>
                        <div class="timeline-temp">üå°Ô∏è 50-55¬∞C</div>
                        <p>ÿ•ÿ∂ÿßŸÅÿ© ${currentRecipe.flour.toFixed(1)}ÿ∫ ÿØŸÇŸäŸÇ ÿπŸÑŸâ ÿØŸÅÿπÿßÿ™ ŸàÿßŸÑÿπÿ¨ŸÜ ÿßŸÑÿÆŸÅŸäŸÅ</p>
                        <p class="scientific-note">üî¨ <em>ÿ™ÿ¨ŸÜÿ® ÿßŸÑÿπÿ¨ŸÜ ÿßŸÑÿ≤ÿßÿ¶ÿØ ŸÑŸÖŸÜÿπ ÿ™ŸÉŸàŸäŸÜ ÿ¨ŸÑŸàÿ™ŸäŸÜ ŸÇŸàŸä</em></p>
                    </div>
                </div>
                
                <div class="scientific-explanation">
                    <h3>üß™ ÿßŸÑÿ£ÿ≥ÿßÿ≥ ÿßŸÑÿπŸÑŸÖŸä ÿßŸÑÿ™ŸÅÿµŸäŸÑŸä</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin: 20px 0;">
                        <div style="background: #f0f9ff; padding: 15px; border-radius: 8px; border-right: 4px solid #3182ce;">
                            <h4>üå°Ô∏è ÿ™ÿ≠ŸÉŸÖ ŸÅŸä ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ©</h4>
                            <p>ÿßŸÑÿ™ŸÖÿ®Ÿäÿ± ŸäŸÖŸÜÿπ ÿ™ÿÆÿ´ÿ± ÿßŸÑÿ®ÿ±Ÿàÿ™ŸäŸÜ ÿπŸÜÿØ 70¬∞Cÿå ŸÖŸÖÿß Ÿäÿ≠ÿßŸÅÿ∏ ÿπŸÑŸâ ÿßŸÑŸÇŸàÿßŸÖ ÿßŸÑŸÜÿßÿπŸÖ ŸàÿßŸÑÿßÿ≥ÿ™ÿ≠ŸÑÿßÿ® ÿßŸÑŸÖÿ´ÿßŸÑŸä.</p>
                        </div>
                        <div style="background: #f0fff4; padding: 15px; border-radius: 8px; border-right: 4px solid #38a169;">
                            <h4>‚öóÔ∏è ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿµŸàÿØÿß ÿßŸÑŸÉÿßŸÖŸÑ</h4>
                            <p>ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑÿπÿßŸÑŸäÿ© (115-120¬∞C) ÿ™ÿ∂ŸÖŸÜ ÿ™ŸÅÿπŸäŸÑ ŸÉÿßŸÖŸÑ ŸÑŸÑÿµŸàÿØÿß ŸÇÿ®ŸÑ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖŸÉŸàŸÜÿßÿ™ ÿßŸÑÿ≠ÿ≥ÿßÿ≥ÿ©.</p>
                        </div>
                        <div style="background: #fffaf0; padding: 15px; border-radius: 8px; border-right: 4px solid #d69e2e;">
                            <h4>üïí ŸàŸÇÿ™ ÿßŸÑÿ±ÿßÿ≠ÿ© ÿßŸÑÿπŸÑŸÖŸä</h4>
                            <p>30-60 ÿØŸÇŸäŸÇÿ© ÿ±ÿßÿ≠ÿ© ÿ™ÿ≥ŸÖÿ≠ ÿ®ÿ™ŸÉŸàŸÜ ÿ¥ÿ®ŸÉÿ© ÿ¨ŸÑŸàÿ™ŸäŸÜ ŸÖÿ™Ÿàÿßÿ≤ŸÜÿ© Ÿàÿßÿ≥ÿ™ŸÇÿ±ÿßÿ± ÿßŸÑÿØŸáŸàŸÜ ŸÑÿ™ÿ≥ŸáŸäŸÑ ÿßŸÑŸÅÿ±ÿØ.</p>
                        </div>
                    </div>
                </div>
                
                <div class="risk-comparison">
                    <h3>üìà ŸÖŸÇÿßÿ±ŸÜÿ© ÿßŸÑŸÖÿÆÿßÿ∑ÿ±: ÿßŸÑÿπŸÑŸÖŸäÿ© vs ÿßŸÑŸÉŸÑ ÿØŸÅÿπÿ© Ÿàÿßÿ≠ÿØÿ©</h3>
                    <table>
                        <tr>
                            <th>ÿßŸÑŸÖÿÆÿßÿ∑ÿ±</th>
                            <th>üî¨ ÿßŸÑÿπŸÑŸÖŸäÿ©</th>
                            <th>‚ö° ÿßŸÑŸÉŸÑ ÿØŸÅÿπÿ© Ÿàÿßÿ≠ÿØÿ©</th>
                        </tr>
                        <tr>
                            <td>ÿ™ÿÆÿ´ÿ± ÿßŸÑÿ®ÿ±Ÿàÿ™ŸäŸÜ</td>
                            <td style="color: #38a169;">‚úÖ 0%</td>
                            <td style="color: #e53e3e;">‚ùå 70%</td>
                        </tr>
                        <tr>
                            <td>ÿπÿ¨ŸäŸÜÿ© ŸÑÿ≤ÿ¨ÿ©</td>
                            <td style="color: #38a169;">‚úÖ 5%</td>
                            <td style="color: #e53e3e;">‚ùå 60%</td>
                        </tr>
                        <tr>
                            <td>ŸÜÿ™ÿßÿ¶ÿ¨ ÿ∫Ÿäÿ± ŸÖÿ™ÿ≥ŸÇÿ©</td>
                            <td style="color: #38a169;">‚úÖ 10%</td>
                            <td style="color: #e53e3e;">‚ùå 80%</td>
                        </tr>
                        <tr>
                            <td>ŸÑŸàŸÜ ÿ®ÿßŸáÿ™</td>
                            <td style="color: #38a169;">‚úÖ 0%</td>
                            <td style="color: #e53e3e;">‚ùå 40%</td>
                        </tr>
                    </table>
                </div>
            `;
        }
    
        /**
         * ÿ™ÿ≠ÿØŸäÿ´ ÿ™ÿ®ŸàŸäÿ® ÿ≠ÿßÿ≥ÿ®ÿ© ÿßŸÑÿ∑ÿ®ŸÇÿßÿ™
         */
        function updateCalculatorTab() {
            const content = document.getElementById('calculator-content');
            if (!content || !currentRecipe) return;
            
            const panSizes = [
                { size: 20, name: "20 ÿ≥ŸÖ", recommendedWeight: 100 },
                { size: 22, name: "22 ÿ≥ŸÖ", recommendedWeight: 120 },
                { size: 24, name: "24 ÿ≥ŸÖ", recommendedWeight: 150 },
                { size: 26, name: "26 ÿ≥ŸÖ", recommendedWeight: 170 },
                { size: 28, name: "28 ÿ≥ŸÖ", recommendedWeight: 200 }
            ];
            
            let layersHtml = '';
            panSizes.forEach(pan => {
                const numLayers = Math.floor(currentRecipe.total / pan.recommendedWeight);
                const usedWeight = (numLayers * pan.recommendedWeight).toFixed(1);
                const leftover = (currentRecipe.total - numLayers * pan.recommendedWeight).toFixed(1);
                
                layersHtml += `
                    <tr>
                        <td>${pan.name}</td>
                        <td>${pan.size} ÿ≥ŸÖ</td>
                        <td>${pan.recommendedWeight} ÿ∫</td>
                        <td><strong>${numLayers}</strong> ÿ∑ÿ®ŸÇÿ©</td>
                        <td>${usedWeight} ÿ∫</td>
                        <td style="color: ${leftover > 50 ? '#d69e2e' : '#38a169'};">${leftover} ÿ∫</td>
                    </tr>
                `;
            });
            
            content.innerHTML = `
                <div class="alert alert-info">
                    <strong>üìê ÿ≠ÿ≥ÿßÿ®ÿßÿ™ ŸàÿßŸÇÿπŸäÿ©:</strong> 
                    ÿ™ÿ≥ÿ™ÿÆÿØŸÖ ŸÉÿ´ÿßŸÅÿ© ${DOUGH_DENSITY} ÿ¨ŸÖ/ÿ≥ŸÖ¬≥ ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿßŸÑŸÇŸäÿßÿ≥ÿßÿ™ ÿßŸÑŸÅÿπŸÑŸäÿ©.
                </div>
                
                <h4>ÿßŸÑŸàÿ≤ŸÜ ÿßŸÑŸÉŸÑŸä ŸÑŸÑÿπÿ¨ŸäŸÜÿ©: <strong>${currentRecipe.total.toFixed(1)} ÿ∫ÿ±ÿßŸÖ</strong></h4>
                
                <table style="margin-top: 15px;">
                    <tr>
                        <th>ÿßŸÑÿ≠ÿ¨ŸÖ</th>
                        <th>ÿßŸÑŸÇÿ∑ÿ±</th>
                        <th>ÿßŸÑŸàÿ≤ŸÜ/ÿ∑ÿ®ŸÇÿ©</th>
                        <th>ÿπÿØÿØ ÿßŸÑÿ∑ÿ®ŸÇÿßÿ™</th>
                        <th>ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ</th>
                        <th>ÿßŸÑŸÖÿ™ÿ®ŸÇŸä</th>
                    </tr>
                    ${layersHtml}
                </table>
                
                <div class="alert alert-success" style="margin-top: 15px;">
                    <strong>üí° ŸÜÿµŸäÿ≠ÿ©:</strong> ÿßŸÑŸÖÿ™ÿ®ŸÇŸä ŸäŸÖŸÉŸÜ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖŸá ŸÑŸÑŸÅÿ™ÿßÿ™ ÿ£Ÿà ÿ∑ÿ®ŸÇÿ© ÿ•ÿ∂ÿßŸÅŸäÿ© ÿ±ŸÇŸäŸÇÿ©.
                </div>
            `;
        }
    
        /**
         * ÿ™ÿ≠ÿØŸäÿ´ ÿ™ÿ®ŸàŸäÿ® ÿßŸÑŸÖÿ≥ÿ™ÿ¥ÿßÿ± ÿßŸÑÿπŸÑŸÖŸä
         */
        function updateAdvisorTab() {
            const content = document.getElementById('advisor-content');
            if (!content || !currentRecipe || !currentAnalysis) return;
            
            let adviceHtml = '';
            
            // ÿ™ÿ≠ŸÑŸäŸÑ ŸÉŸÑ ŸÖŸÉŸàŸÜ ÿ®ÿ¥ŸÉŸÑ ŸÖŸÅÿµŸÑ
            adviceHtml += getFlourAdvice(currentRecipe, currentAnalysis);
            adviceHtml += getButterAdvice(currentRecipe, currentAnalysis);
            adviceHtml += getSugarsAdvice(currentRecipe, currentAnalysis);
            adviceHtml += getEggsAdvice(currentRecipe, currentAnalysis);
            adviceHtml += getSodaAdvice(currentRecipe, currentAnalysis);
            
            if (!adviceHtml) {
                adviceHtml = `
                    <div class="alert alert-success">
                        <h4>‚úÖ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÜÿ≥ÿ® ŸÖÿ´ÿßŸÑŸäÿ© ÿπŸÑŸÖŸäÿßŸã!</h4>
                        <p>ŸàÿµŸÅÿ™ŸÉ ŸÖÿ™Ÿàÿßÿ≤ŸÜÿ© ÿ™ŸÖÿßŸÖÿßŸã ŸàŸÅŸÇÿßŸã ŸÑŸÑŸÖÿπÿßŸäŸäÿ± ÿßŸÑÿπŸÑŸÖŸäÿ©. Ÿáÿ∞ÿß Ÿäÿ∂ŸÖŸÜ:</p>
                        <ul style="padding-right: 20px;">
                            <li>ŸÇŸàÿßŸÖ ŸÖÿ´ÿßŸÑŸä ÿ®ŸäŸÜ ÿßŸÑŸáÿ¥ÿßÿ¥ÿ© ŸàÿßŸÑÿ™ŸÖÿßÿ≥ŸÉ</li>
                            <li>ŸÑŸàŸÜ ÿ∞Ÿáÿ®Ÿä ÿ¨ŸÖŸäŸÑ ŸÖŸÜ ÿ™ŸÅÿßÿπŸÑ ÿßŸÑŸÖÿßŸäÿßÿ±ÿØ</li>
                            <li>ÿ±ÿ∑Ÿàÿ®ÿ© ŸÖÿ´ÿßŸÑŸäÿ© Ÿàÿßÿ≠ÿ™ŸÅÿßÿ∏ ÿ®ÿßŸÑÿ∑ÿπŸÖ</li>
                            <li>ÿ≥ŸáŸàŸÑÿ© ŸÅŸä ÿßŸÑŸÅÿ±ÿØ ŸàÿßŸÑÿ™ÿ¥ŸÉŸäŸÑ</li>
                        </ul>
                    </div>
                `;
            }
            
            content.innerHTML = `
                <div class="alert alert-info">
                    <strong>üìê ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ¢ÿ´ÿßÿ± ÿßŸÑÿπŸÑŸÖŸäÿ© ÿßŸÑÿ™ŸÅÿµŸäŸÑŸä:</strong> 
                    ÿ¥ÿ±ÿ≠ ÿ™ÿ£ÿ´Ÿäÿ± ŸÉŸÑ ŸÖŸÉŸàŸÜ ÿπŸÑŸâ ÿßŸÑŸÇŸàÿßŸÖ ÿßŸÑŸÜŸáÿßÿ¶Ÿä ŸàÿßŸÇÿ™ÿ±ÿßÿ≠ÿßÿ™ ŸÑŸÑÿ™ÿ≠ÿ≥ŸäŸÜ ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿßŸÑÿ£ÿ®ÿ≠ÿßÿ´ ÿßŸÑÿπŸÑŸÖŸäÿ©.
                </div>
                ${adviceHtml}
            `;
        }
    
        /**
         * ŸÜÿµÿßÿ¶ÿ≠ ÿßŸÑÿØŸÇŸäŸÇ
         */
        function getFlourAdvice(recipe, analysis) {
            if (analysis.flour.status === 'optimal') return '';
            
            const diff = recipe.flourPct - SCIENTIFIC_RANGES.flour.ideal;
            const adjustGrams = (Math.abs(diff) / 100) * recipe.total;
            
            return `
                <div class="advisor-detail">
                    <h4>ü•ñ ÿßŸÑÿØŸÇŸäŸÇ (${recipe.flourPct.toFixed(1)}%)</h4>
                    <div class="alert ${analysis.flour.status === 'low' ? 'alert-warning' : 'alert-danger'}">
                        <strong>${analysis.flour.status === 'low' ? '‚ö†Ô∏è ŸÜŸÇÿµ ŸÅŸä ÿßŸÑŸáŸäŸÉŸÑ ÿßŸÑÿ®ŸÜÿßÿ¶Ÿä' : '‚ùå ÿ≤ŸäÿßÿØÿ© ŸÅŸä ÿßŸÑÿµŸÑÿßÿ®ÿ©'}</strong>
                    </div>
                    
                    <div class="advisor-effects">
                        <strong>ÿßŸÑÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ÿßŸÑÿπŸÑŸÖŸäÿ©:</strong>
                        <ul style="padding-right: 20px;">
                            ${analysis.flour.status === 'low' ? `
                                <li>ÿ∂ÿπŸÅ ŸÅŸä ÿ¥ÿ®ŸÉÿ© ÿßŸÑÿ¨ŸÑŸàÿ™ŸäŸÜ Ÿäÿ§ÿØŸä ÿ•ŸÑŸâ ÿπÿ¨ŸäŸÜÿ© ŸÑÿ≤ÿ¨ÿ©</li>
                                <li>ÿµÿπŸàÿ®ÿ© ŸÅŸä ŸÅÿ±ÿØ ÿßŸÑÿ∑ÿ®ŸÇÿßÿ™ ÿ®ÿ¥ŸÉŸÑ ŸÖÿ™ÿ≥ÿßŸà</li>
                                <li>ŸÇÿßÿ®ŸÑŸäÿ© ŸÑŸÑŸÉÿ≥ÿ± ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿÆÿ®ÿ≤</li>
                                <li>ŸÅŸÇÿØÿßŸÜ ÿßŸÑŸÇÿØÿ±ÿ© ÿπŸÑŸâ ÿßŸÑÿßÿ≠ÿ™ŸÅÿßÿ∏ ÿ®ŸÅŸÇÿßÿπÿßÿ™ CO‚ÇÇ</li>
                            ` : `
                                <li>ÿ¥ÿ®ŸÉÿ© ÿ¨ŸÑŸàÿ™ŸäŸÜ ŸÖŸÅÿ±ÿ∑ÿ© ÿßŸÑŸÇŸàÿ© ÿ™ÿ§ÿØŸä ÿ•ŸÑŸâ ÿπÿ¨ŸäŸÜÿ© ŸÖÿ∑ÿßÿ∑Ÿäÿ©</li>
                                <li>ÿµÿπŸàÿ®ÿ© ŸÅŸä ÿßŸÑŸÅÿ±ÿØ ÿ•ŸÑŸâ ÿ≥ŸÖÿßŸÉÿ© 2mm ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ©</li>
                                <li>ŸÜÿ™Ÿäÿ¨ÿ© ŸÜŸáÿßÿ¶Ÿäÿ© ŸÇÿßÿ≥Ÿäÿ© Ÿàÿ¨ÿßŸÅÿ©</li>
                                <li>ŸÖŸÇÿßŸàŸÖÿ© ŸÑŸÑÿ™ŸÑŸäŸäŸÜ ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑŸÜÿ∂ÿ¨</li>
                            `}
                        </ul>
                    </div>
                    
                    <div class="advisor-solution">
                        <strong>ÿßŸÑÿ≠ŸÑ ÿßŸÑŸÖŸÇÿ™ÿ±ÿ≠:</strong>
                        ${analysis.flour.status === 'low' ? 
                            `ÿ£ÿ∂ŸÅ ${adjustGrams.toFixed(1)} ÿ¨ÿ±ÿßŸÖ ÿØŸÇŸäŸÇ ŸÑŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ ÿßŸÑŸÜÿ≥ÿ®ÿ© ÿßŸÑŸÖÿ´ÿßŸÑŸäÿ© ${SCIENTIFIC_RANGES.flour.ideal}%` :
                            `ŸÇŸÑŸÑ ÿßŸÑÿØŸÇŸäŸÇ ÿ®ŸÖŸÇÿØÿßÿ± ${adjustGrams.toFixed(1)} ÿ¨ÿ±ÿßŸÖ ÿ£Ÿà ÿ≤ÿØ ÿßŸÑŸÖŸÉŸàŸÜÿßÿ™ ÿßŸÑÿ≥ÿßÿ¶ŸÑÿ© ÿ®ŸÜÿ≥ÿ®ÿ© ${Math.abs(diff).toFixed(1)}%`
                        }
                    </div>
                </div>
            `;
        }
    
        /**
         * ŸÜÿµÿßÿ¶ÿ≠ ÿßŸÑÿ≤ÿ®ÿØÿ©
         */
        function getButterAdvice(recipe, analysis) {
            if (analysis.butter.status === 'optimal') return '';
            
            const diff = recipe.butterPct - SCIENTIFIC_RANGES.butter.ideal;
            const adjustGrams = (Math.abs(diff) / 100) * recipe.total;
            
            return `
                <div class="advisor-detail">
                    <h4>üßà ÿßŸÑÿ≤ÿ®ÿØÿ© (${recipe.butterPct.toFixed(1)}%)</h4>
                    <div class="alert ${analysis.butter.status === 'low' ? 'alert-warning' : 'alert-danger'}">
                        <strong>${analysis.butter.status === 'low' ? '‚ö†Ô∏è ŸÜŸÇÿµ ŸÅŸä ÿßŸÑÿ∑ÿ±ÿßŸàÿ©' : '‚ùå ÿ≤ŸäÿßÿØÿ© ŸÅŸä ÿßŸÑÿØŸáŸÜŸäÿ©'}</strong>
                    </div>
                    
                    <div class="advisor-effects">
                        <strong>ÿßŸÑÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ÿßŸÑÿπŸÑŸÖŸäÿ©:</strong>
                        <ul style="padding-right: 20px;">
                            ${analysis.butter.status === 'low' ? `
                                <li>ŸÇÿµŸàÿ± ŸÅŸä ÿ™ÿ£ÿ´Ÿäÿ± "ÿßŸÑÿ™ŸÇÿµŸäÿ±" ŸÑÿ¥ÿ®ŸÉÿ© ÿßŸÑÿ¨ŸÑŸàÿ™ŸäŸÜ</li>
                                <li>ÿπÿ¨ŸäŸÜÿ© ÿ¨ÿßŸÅÿ© ŸàŸáÿ¥ÿ© ÿ®ÿ¥ŸÉŸÑ ŸÖŸÅÿ±ÿ∑</li>
                                <li>ŸÅŸÇÿØÿßŸÜ ÿßŸÑŸÜÿπŸàŸÖÿ© ŸÅŸä ÿßŸÑŸÅŸÖ</li>
                                <li>ÿ∂ÿπŸÅ ŸÅŸä ÿ™ÿ≠ÿ±Ÿäÿ± ÿßŸÑŸÜŸÉŸáÿßÿ™</li>
                            ` : `
                                <li>ÿ™ÿ£ÿ´Ÿäÿ± ÿ™ŸÇÿµŸäÿ± ŸÖŸÅÿ±ÿ∑ Ÿäÿ∂ÿπŸÅ ÿßŸÑÿ®ŸÜŸäÿ©</li>
                                <li>ÿπÿ¨ŸäŸÜÿ© ÿØŸáŸÜŸäÿ© Ÿäÿµÿπÿ® ÿßŸÑÿ™ÿπÿßŸÖŸÑ ŸÖÿπŸáÿß</li>
                                <li>ÿ∑ÿ®ŸÇÿßÿ™ ÿ≤Ÿäÿ™Ÿäÿ© ŸàŸÇÿØ ÿ™ŸÜŸÅÿµŸÑ ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿÆÿ®ÿ≤</li>
                                <li>ÿ∑ÿπŸÖ ÿØŸáŸÜŸä ÿ∫ÿßŸÖÿ±</li>
                            `}
                        </ul>
                    </div>
                    
                    <div class="advisor-solution">
                        <strong>ÿßŸÑÿ≠ŸÑ ÿßŸÑŸÖŸÇÿ™ÿ±ÿ≠:</strong>
                        ${analysis.butter.status === 'low' ? 
                            `ÿ£ÿ∂ŸÅ ${adjustGrams.toFixed(1)} ÿ¨ÿ±ÿßŸÖ ÿ≤ÿ®ÿØÿ© ŸÑŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ ÿßŸÑŸÜÿ≥ÿ®ÿ© ÿßŸÑŸÖÿ´ÿßŸÑŸäÿ© ${SCIENTIFIC_RANGES.butter.ideal}%` :
                            `ŸÇŸÑŸÑ ÿßŸÑÿ≤ÿ®ÿØÿ© ÿ®ŸÖŸÇÿØÿßÿ± ${adjustGrams.toFixed(1)} ÿ¨ÿ±ÿßŸÖ ŸÑÿ™ÿ≠ŸÇŸäŸÇ ÿßŸÑÿ™Ÿàÿßÿ≤ŸÜ ŸÅŸä ÿßŸÑŸÖŸÑŸÖÿ≥`
                        }
                    </div>
                </div>
            `;
        }
    
        /**
         * ŸÜÿµÿßÿ¶ÿ≠ ÿßŸÑÿ≥ŸÉÿ±Ÿäÿßÿ™
         */
        function getSugarsAdvice(recipe, analysis) {
            if (analysis.sugars.status === 'optimal') return '';
            
            const diff = recipe.sugarsPct - SCIENTIFIC_RANGES.sugars.ideal;
            const adjustGrams = (Math.abs(diff) / 100) * recipe.total;
            
            return `
                <div class="advisor-detail">
                    <h4>üçØ ÿßŸÑÿ≥ŸÉÿ±Ÿäÿßÿ™ (${recipe.sugarsPct.toFixed(1)}%)</h4>
                    <div class="alert ${analysis.sugars.status === 'low' ? 'alert-warning' : 'alert-danger'}">
                        <strong>${analysis.sugars.status === 'low' ? '‚ö†Ô∏è ŸÜŸÇÿµ ŸÅŸä ÿßŸÑÿ≠ŸÑÿßŸàÿ© ŸàÿßŸÑŸÑŸàŸÜ' : '‚ùå ÿ≤ŸäÿßÿØÿ© ŸÅŸä ÿßŸÑÿ≠ŸÑÿßŸàÿ© ŸàÿßŸÑŸáÿ¥ÿßÿ¥ÿ©'}</strong>
                    </div>
                    
                    <div class="advisor-effects">
                        <strong>ÿßŸÑÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ÿßŸÑÿπŸÑŸÖŸäÿ©:</strong>
                        <ul style="padding-right: 20px;">
                            ${analysis.sugars.status === 'low' ? `
                                <li>ÿ∂ÿπŸÅ ŸÅŸä ÿ™ŸÅÿßÿπŸÑ ÿßŸÑŸÖÿßŸäÿßÿ±ÿØ ŸàÿßŸÑÿ™ŸÑŸàŸäŸÜ</li>
                                <li>ŸÇÿµŸàÿ± ŸÅŸä ÿßŸÑÿßÿ≠ÿ™ŸÅÿßÿ∏ ÿ®ÿßŸÑÿ±ÿ∑Ÿàÿ®ÿ©</li>
                                <li>ŸÜŸÇÿµ ŸÅŸä ÿßŸÑÿ∑ÿ±ÿßŸàÿ© ŸàÿßŸÑŸÖŸÑŸÖÿ≥ ÿßŸÑŸÜÿßÿπŸÖ</li>
                                <li>ÿ≠ŸÑÿßŸàÿ© ÿ∫Ÿäÿ± ŸÉÿßŸÅŸäÿ©</li>
                            ` : `
                                <li>ÿ™ÿ£ÿ´Ÿäÿ± ŸÖÿ∑ÿ±Ÿä ŸÖŸÅÿ±ÿ∑ Ÿäÿ∂ÿπŸÅ ÿßŸÑÿ®ŸÜŸäÿ©</li>
                                <li>ÿπÿ¨ŸäŸÜÿ© ŸÑÿ≤ÿ¨ÿ© Ÿäÿµÿπÿ® ŸÅÿ±ÿØŸáÿß</li>
                                <li>ŸÑŸàŸÜ ÿØÿßŸÉŸÜ ÿ¨ÿØÿßŸã ŸÇÿØ Ÿäÿµÿßÿ≠ÿ® ŸÖÿ±ÿßÿ±ÿ©</li>
                                <li>ÿ≠ŸÑÿßŸàÿ© ÿ∫ÿßŸÖÿ±ÿ© ÿ™ÿ∑ÿ∫Ÿâ ÿπŸÑŸâ ŸÜŸÉŸáÿ© ÿßŸÑÿπÿ≥ŸÑ</li>
                            `}
                        </ul>
                    </div>
                    
                    <div class="advisor-solution">
                        <strong>ÿßŸÑÿ≠ŸÑ ÿßŸÑŸÖŸÇÿ™ÿ±ÿ≠:</strong>
                        ${analysis.sugars.status === 'low' ? 
                            `ÿ≤ÿØ ÿßŸÑÿ≥ŸÉÿ±Ÿäÿßÿ™ ÿ®ŸÖŸÇÿØÿßÿ± ${adjustGrams.toFixed(1)} ÿ¨ÿ±ÿßŸÖ (ŸäŸÅÿ∂ŸÑ ÿßŸÑÿπÿ≥ŸÑ ŸÑŸÑÿ≠ŸÑÿßŸàÿ© ÿßŸÑŸÖÿπŸÇÿØÿ©)` :
                            `ŸÇŸÑŸÑ ÿßŸÑÿ≥ŸÉÿ±Ÿäÿßÿ™ ÿ®ŸÖŸÇÿØÿßÿ± ${adjustGrams.toFixed(1)} ÿ¨ÿ±ÿßŸÖ ŸÖÿπ ÿßŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ ŸÜÿ≥ÿ®ÿ© ÿßŸÑÿπÿ≥ŸÑ ŸÑŸÑŸÜŸÉŸáÿ©`
                        }
                    </div>
                </div>
            `;
        }
    
        /**
         * ŸÜÿµÿßÿ¶ÿ≠ ÿßŸÑÿ®Ÿäÿ∂
         */
        function getEggsAdvice(recipe, analysis) {
            if (analysis.eggs.status === 'optimal') return '';
            
            const diff = recipe.eggsPct - SCIENTIFIC_RANGES.eggs.ideal;
            const adjustGrams = (Math.abs(diff) / 100) * recipe.total;
            
            return `
                <div class="advisor-detail">
                    <h4>ü•ö ÿßŸÑÿ®Ÿäÿ∂ (${recipe.eggsPct.toFixed(1)}%)</h4>
                    <div class="alert ${analysis.eggs.status === 'low' ? 'alert-warning' : 'alert-danger'}">
                        <strong>${analysis.eggs.status === 'low' ? '‚ö†Ô∏è ŸÜŸÇÿµ ŸÅŸä ÿßŸÑÿ±ÿ∑Ÿàÿ®ÿ© ŸàÿßŸÑÿ™ŸÖÿßÿ≥ŸÉ' : '‚ùå ÿ≤ŸäÿßÿØÿ© ŸÅŸä ÿßŸÑŸÉÿ´ÿßŸÅÿ©'}</strong>
                    </div>
                    
                    <div class="advisor-effects">
                        <strong>ÿßŸÑÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ÿßŸÑÿπŸÑŸÖŸäÿ©:</strong>
                        <ul style="padding-right: 20px;">
                            ${analysis.eggs.status === 'low' ? `
                                <li>ÿ∂ÿπŸÅ ŸÅŸä ÿßŸÑÿßÿ≥ÿ™ÿ≠ŸÑÿßÿ® Ÿàÿ™ŸÖÿßÿ≥ŸÉ ÿßŸÑÿπÿ¨ŸäŸÜÿ©</li>
                                <li>ÿ¨ŸÅÿßŸÅ ŸàŸÇÿßÿ®ŸÑŸäÿ© ŸÑŸÑÿ™ŸÉÿ≥ÿ±</li>
                                <li>ŸÅŸÇÿØÿßŸÜ ÿßŸÑÿ±ÿ∑Ÿàÿ®ÿ© ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿÆÿ®ÿ≤</li>
                                <li>ÿ®ŸÜŸäÿ© ŸÖÿ≥ÿßŸÖŸäÿ© ÿ∂ÿπŸäŸÅÿ©</li>
                            ` : `
                                <li>ŸÉÿ´ÿßŸÅÿ© ÿπÿßŸÑŸäÿ© ŸàŸÇŸàÿßŸÖ ŸÖÿ∑ÿßÿ∑Ÿä</li>
                                <li>ÿ∑ÿπŸÖ ÿ®Ÿäÿ∂ ŸÖÿ≥Ÿäÿ∑ÿ±</li>
                                <li>ÿµÿπŸàÿ®ÿ© ŸÅŸä ÿ™ÿ≠ŸÇŸäŸÇ ÿßŸÑŸÇÿ±ŸÖÿ¥ÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ©</li>
                                <li>ŸÑŸàŸÜ ÿ®ÿßŸáÿ™ ÿ®ÿ≥ÿ®ÿ® ÿ™ÿÆŸÅŸäŸÅ ÿßŸÑÿ≥ŸÉÿ±Ÿäÿßÿ™</li>
                            `}
                        </ul>
                    </div>
                    
                    <div class="advisor-solution">
                        <strong>ÿßŸÑÿ≠ŸÑ ÿßŸÑŸÖŸÇÿ™ÿ±ÿ≠:</strong>
                        ${analysis.eggs.status === 'low' ? 
                            `ÿ£ÿ∂ŸÅ ${adjustGrams.toFixed(1)} ÿ¨ÿ±ÿßŸÖ ÿ®Ÿäÿ∂ ŸÑŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ ÿßŸÑŸÜÿ≥ÿ®ÿ© ÿßŸÑŸÖÿ´ÿßŸÑŸäÿ© ${SCIENTIFIC_RANGES.eggs.ideal}%` :
                            `ŸÇŸÑŸÑ ÿßŸÑÿ®Ÿäÿ∂ ÿ®ŸÖŸÇÿØÿßÿ± ${adjustGrams.toFixed(1)} ÿ¨ÿ±ÿßŸÖ ŸÑÿ™ÿ≠ŸÇŸäŸÇ ÿßŸÑÿ™Ÿàÿßÿ≤ŸÜ ŸÅŸä ÿßŸÑŸÇŸàÿßŸÖ`
                        }
                    </div>
                </div>
            `;
        }
    
        /**
         * ŸÜÿµÿßÿ¶ÿ≠ ÿßŸÑÿµŸàÿØÿß
         */
        function getSodaAdvice(recipe, analysis) {
            if (analysis.soda.status === 'optimal') return '';
            
            const diff = recipe.sodaPct - SCIENTIFIC_RANGES.soda.ideal;
            const adjustGrams = (Math.abs(diff) / 100) * recipe.total;
            
            return `
                <div class="advisor-detail">
                    <h4>üß™ ÿßŸÑÿµŸàÿØÿß (${recipe.sodaPct.toFixed(2)}%)</h4>
                    <div class="alert ${analysis.soda.status === 'low' ? 'alert-warning' : 'alert-danger'}">
                        <strong>${analysis.soda.status === 'low' ? '‚ö†Ô∏è ŸÜŸÇÿµ ŸÅŸä ÿßŸÑÿ™ÿÆŸÅŸäŸÅ ŸàÿßŸÑŸÑŸàŸÜ' : '‚ùå ÿ≤ŸäÿßÿØÿ© ŸÅŸä ÿßŸÑÿ∑ÿπŸÖ ÿßŸÑŸÇŸÑŸàŸä'}</strong>
                    </div>
                    
                    <div class="advisor-effects">
                        <strong>ÿßŸÑÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ÿßŸÑÿπŸÑŸÖŸäÿ©:</strong>
                        <ul style="padding-right: 20px;">
                            ${analysis.soda.status === 'low' ? `
                                <li>ÿ™ÿÆŸÅŸäŸÅ ÿ∫Ÿäÿ± ŸÉÿßŸÅ Ÿàÿ®ŸÜŸäÿ© ŸÉÿ´ŸäŸÅÿ©</li>
                                <li>ŸÑŸàŸÜ ÿ®ÿßŸáÿ™ ÿ®ÿ≥ÿ®ÿ® ÿ∂ÿπŸÅ ÿ™ŸÅÿßÿπŸÑ ÿßŸÑŸÖÿßŸäÿßÿ±ÿØ</li>
                                <li>pH ŸÖŸÜÿÆŸÅÿ∂ ŸÑÿß ŸäÿØÿπŸÖ ÿßŸÑÿ™ŸÑŸàŸäŸÜ</li>
                                <li>ŸÇŸàÿßŸÖ ÿ´ŸÇŸäŸÑ Ÿàÿ∫Ÿäÿ± ŸáŸàÿßÿ¶Ÿä</li>
                            ` : `
                                <li>ÿ∑ÿπŸÖ ŸÇŸÑŸàŸä (ÿµÿßÿ®ŸàŸÜŸä) ÿ∫Ÿäÿ± ŸÖÿ±ÿ∫Ÿàÿ®</li>
                                <li>ŸÑŸàŸÜ ÿØÿßŸÉŸÜ ÿ¨ÿØÿßŸã ŸÇÿØ Ÿäÿµÿßÿ≠ÿ®Ÿá ŸÖÿ±ÿßÿ±ÿ©</li>
                                <li>ÿ™ÿ¢ŸÉŸÑ ŸÅŸä ÿßŸÑÿπŸÜÿßÿµÿ± ÿßŸÑÿ∫ÿ∞ÿßÿ¶Ÿäÿ©</li>
                                <li>ŸÇŸàÿßŸÖ ÿÆÿ¥ŸÜ ŸàŸÖÿ≥ÿßŸÖŸä ÿ®ÿ¥ŸÉŸÑ ŸÖŸÅÿ±ÿ∑</li>
                            `}
                        </ul>
                    </div>
                    
                    <div class="advisor-solution">
                        <strong>ÿßŸÑÿ≠ŸÑ ÿßŸÑŸÖŸÇÿ™ÿ±ÿ≠:</strong>
                        ${analysis.soda.status === 'low' ? 
                            `ÿ£ÿ∂ŸÅ ${adjustGrams.toFixed(1)} ÿ¨ÿ±ÿßŸÖ ÿµŸàÿØÿß ŸÑŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ ÿßŸÑŸÜÿ≥ÿ®ÿ© ÿßŸÑŸÖÿ´ÿßŸÑŸäÿ© ${SCIENTIFIC_RANGES.soda.ideal}%` :
                            `ŸÇŸÑŸÑ ÿßŸÑÿµŸàÿØÿß ÿ®ŸÖŸÇÿØÿßÿ± ${adjustGrams.toFixed(1)} ÿ¨ÿ±ÿßŸÖ ŸÑÿ™ÿ¨ŸÜÿ® ÿßŸÑÿ∑ÿπŸÖ ÿßŸÑŸÇŸÑŸàŸä`
                        }
                    </div>
                </div>
            `;
        }
    
        /**
         * ÿ™ÿ≠ÿØŸäÿ´ ÿ™ÿ®ŸàŸäÿ® ÿßŸÑŸÖŸÉÿ™ÿ®ÿ©
         */
        function updateLibraryTab() {
            const content = document.getElementById('library-content');
            if (!content) return;
            
            let html = '';
            
            if (savedRecipes.length > 0) {
                // ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÖŸÉÿ™ÿ®ÿ©
                const stats = calculateLibraryStats();
                
                html += `
                    <div class="alert alert-info">
                        <strong>üìä ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÖŸÉÿ™ÿ®ÿ©:</strong>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">
                            <div>ÿßŸÑŸÖÿ¨ŸÖŸàÿπ: <strong>${stats.total}</strong></div>
                            <div>ÿßŸÑŸÜÿßÿ¨ÿ≠ÿ©: <strong class="score-high">${stats.successful} ‚úÖ</strong></div>
                            <div>ÿßŸÑŸÅÿßÿ¥ŸÑÿ©: <strong class="score-low">${stats.failed} ‚ùå</strong></div>
                            <div>ŸÖÿ™Ÿàÿ≥ÿ∑ ÿßŸÑÿ™ŸÇŸäŸäŸÖ: <strong>${stats.avgRating}/5 ‚≠ê</strong></div>
                            <div>ŸÖÿ™Ÿàÿ≥ÿ∑ ÿßŸÑŸÜŸÇÿßÿ∑ ÿßŸÑÿπŸÑŸÖŸäÿ©: <strong>${stats.avgScientificScore}/100</strong></div>
                            <div>ÿßŸÑÿ™ŸàÿßŸÅŸÇ: <strong>${stats.agreementRate}%</strong></div>
                        </div>
                    </div>
                `;
                
                // ÿßŸÑÿ™ÿπŸÑŸÖ ŸÖŸÜ ÿßŸÑÿ™ÿ¨ÿßÿ±ÿ®
                const learningInsights = analyzePersonalSuccessPatterns();
                if (learningInsights && learningInsights.insights.length > 0) {
                    const insightsSection = document.getElementById('learning-insights-section');
                    const insightsContent = document.getElementById('learning-insights-content');
                    
                    if (insightsSection && insightsContent) {
                        insightsSection.style.display = 'block';
                        
                        let insightsHtml = '<div class="learning-insights">';
                        insightsHtml += `<h4>üéØ ÿ£ŸÜŸÖÿßÿ∑ ÿßŸÑŸÜÿ¨ÿßÿ≠ ŸÖŸÜ ÿ™ÿ¨ÿßÿ±ÿ®ŸÉ:</h4>`;
                        
                        learningInsights.insights.forEach(insight => {
                            insightsHtml += `
                                <div style="margin: 10px 0; padding: 10px; background: white; border-radius: 5px; border-right: 3px solid #38a169;">
                                    <strong>${insight.component === 'soda' ? 'üß™ ÿßŸÑÿµŸàÿØÿß' : 'ü•ñ ÿßŸÑÿØŸÇŸäŸÇ'}:</strong>
                                    ${insight.finding}<br>
                                    <small style="color: #718096;">ÿßŸÑŸÜÿ≥ÿ®ÿ© ÿßŸÑŸÖÿ´ÿßŸÑŸäÿ© ŸÑŸÉ: ${insight.personalOptimal}%</small>
                                </div>
                            `;
                        });
                        
                        insightsHtml += `<p style="margin-top: 10px;"><small>ŸÖÿ®ŸÜŸä ÿπŸÑŸâ ÿ™ÿ≠ŸÑŸäŸÑ ${learningInsights.sampleSize} ŸàÿµŸÅÿ© (${learningInsights.successfulCount} ‚úÖ ${learningInsights.failedCount} ‚ùå)</small></p>`;
                        insightsHtml += '</div>';
                        
                        insightsContent.innerHTML = insightsHtml;
                    }
                } else {
                    const insightsSection = document.getElementById('learning-insights-section');
                    if (insightsSection) {
                        insightsSection.style.display = 'none';
                    }
                }
                
                // ÿπÿ±ÿ∂ ÿßŸÑŸàÿµŸÅÿßÿ™ ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏ÿ©
                savedRecipes.forEach((recipe, index) => {
                    const stars = '‚òÖ'.repeat(recipe.rating || 0) + '‚òÜ'.repeat(5 - (recipe.rating || 0));
                    const successBadge = recipe.success ? '‚úÖ ŸÜÿ¨ÿ≠ÿ™' : '‚ùå ŸÅÿ¥ŸÑÿ™';
                    const successClass = recipe.success ? 'score-high' : 'score-low';
                    const scientificScore = recipe.scientificScore || 0;
                    const scoreClass = scientificScore >= 80 ? 'score-high' : scientificScore >= 60 ? 'score-medium' : 'score-low';
                    const agreement = recipe.success === (scientificScore >= 60) ? '‚úÖ ŸÖÿ™ŸàÿßŸÅŸÇ' : '‚ö†Ô∏è ÿ∫Ÿäÿ± ŸÖÿ™ŸàÿßŸÅŸÇ';
                    const agreementClass = recipe.success === (scientificScore >= 60) ? 'score-high' : 'score-low';
                    
                    html += `
                        <div class="method-card" style="margin: 15px 0;">
                            <div class="method-header">
                                <h4>${recipe.name || `ŸàÿµŸÅÿ© ${index + 1}`}</h4>
                                <div>
                                    <span class="${successClass}" style="padding: 4px 10px; border-radius: 15px; margin: 0 5px;">${successBadge}</span>
                                    <span class="${scoreClass}" style="padding: 4px 10px; border-radius: 15px;">${scientificScore}/100</span>
                                </div>
                            </div>
                            <div style="margin: 10px 0; padding: 10px; background: #f7fafc; border-radius: 5px;">
                                <p style="margin: 5px 0;"><strong>ÿßŸÑŸÖŸÇÿßÿØŸäÿ±:</strong></p>
                                <p style="margin: 5px 0; font-size: 0.9em; color: #4a5568;">
                                    ÿØŸÇŸäŸÇ: ${recipe.flour}ÿ∫ | ÿ≤ÿ®ÿØÿ©: ${recipe.butter}ÿ∫ | ÿ≥ŸÉÿ±: ${recipe.sugar}ÿ∫ | 
                                    ÿπÿ≥ŸÑ: ${recipe.honey}ÿ∫ | ÿ®Ÿäÿ∂: ${recipe.eggs}ÿ∫ | ÿµŸàÿØÿß: ${recipe.soda}ÿ∫
                                </p>
                            </div>
                            <p style="margin: 5px 0;">
                                <span class="${agreementClass}" style="padding: 3px 8px; border-radius: 10px; font-size: 0.85em;">${agreement}</span> | 
                                <span style="color: #f59e0b;">‚≠ê ${stars}</span>
                            </p>
                            ${recipe.comment ? `<p style="margin: 10px 0; padding: 10px; background: #fffaf0; border-radius: 5px; border-right: 3px solid #d69e2e;">üí¨ ${recipe.comment}</p>` : ''}
                            <p style="font-size: 0.85em; color: #718096;">
                                üìÖ ${new Date(recipe.timestamp).toLocaleDateString('ar-EG', { year: 'numeric', month: 'long', day: 'numeric' })}
                            </p>
                            <div style="margin-top: 10px;">
                                <button class="btn btn-secondary" style="margin: 3px;" onclick="loadRecipe(${index})">ÿ™ÿ≠ŸÖŸäŸÑ</button>
                                <button class="btn btn-danger" style="margin: 3px;" onclick="deleteRecipe(${index})">ÿ≠ÿ∞ŸÅ</button>
                            </div>
                        </div>
                    `;
                });
            } else {
                html = `
                    <div class="alert alert-info">
                        <strong>üìö ŸÖŸÉÿ™ÿ®ÿ™ŸÉ ŸÅÿßÿ±ÿ∫ÿ©</strong>
                        <p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸàÿµŸÅÿßÿ™ ŸÖÿ≠ŸÅŸàÿ∏ÿ© ÿ®ÿπÿØ. ÿßÿ≠ŸÅÿ∏ ŸàÿµŸÅÿ™ŸÉ ÿßŸÑÿ£ŸàŸÑŸâ ŸÖŸÜ ÿ™ÿ®ŸàŸäÿ® "ŸÖÿ≠ŸÑŸÑ ÿßŸÑŸàÿµŸÅÿßÿ™"!</p>
                    </div>
                `;
            }
            
            content.innerHTML = html;
        }
    
        /**
         * ÿ≠ÿ≥ÿßÿ® ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÖŸÉÿ™ÿ®ÿ©
         */
        function calculateLibraryStats() {
            const total = savedRecipes.length;
            const successful = savedRecipes.filter(r => r.success === true).length;
            const failed = savedRecipes.filter(r => r.success === false).length;
            
            const avgRating = total > 0 ? 
                savedRecipes.reduce((sum, r) => sum + (r.rating || 0), 0) / total : 0;
            
            const avgScientificScore = total > 0 ? 
                savedRecipes.reduce((sum, r) => sum + (r.scientificScore || 0), 0) / total : 0;
            
            // ÿ≠ÿ≥ÿßÿ® ŸÜÿ≥ÿ®ÿ© ÿßŸÑÿ™ŸàÿßŸÅŸÇ ÿ®ŸäŸÜ ÿßŸÑÿ™ŸÇŸäŸäŸÖ ÿßŸÑÿ¥ÿÆÿµŸä ŸàÿßŸÑÿπŸÑŸÖŸä
            const agreed = savedRecipes.filter(r => 
                r.success === (r.scientificScore >= 60)
            ).length;
            
            const agreementRate = total > 0 ? ((agreed / total) * 100).toFixed(1) : 0;
            
            return {
                total,
                successful,
                failed,
                avgRating: avgRating.toFixed(1),
                avgScientificScore: avgScientificScore.toFixed(1),
                agreementRate
            };
        }
    
        /**
         * ÿ™ÿ≠ŸÑŸäŸÑ ÿ£ŸÜŸÖÿßÿ∑ ÿßŸÑŸÜÿ¨ÿßÿ≠ ÿßŸÑÿ¥ÿÆÿµŸäÿ©
         */
        function analyzePersonalSuccessPatterns() {
            const successful = savedRecipes.filter(r => r.success === true);
            const failed = savedRecipes.filter(r => r.success === false);
            
            if (successful.length < 2 && failed.length < 2) {
                return null; // ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™ ŸÉÿßŸÅŸäÿ©
            }
            
            const insights = [];
            
            // ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿµŸàÿØÿß
            if (successful.length >= 2) {
                const avgSuccessfulSoda = successful.reduce((sum, r) => {
                    const total = r.flour + r.butter + r.sugar + r.honey + r.eggs + r.soda;
                    return sum + (r.soda / total) * 100;
                }, 0) / successful.length;
                
                if (failed.length >= 2) {
                    const avgFailedSoda = failed.reduce((sum, r) => {
                        const total = r.flour + r.butter + r.sugar + r.honey + r.eggs + r.soda;
                        return sum + (r.soda / total) * 100;
                    }, 0) / failed.length;
                    
                    if (Math.abs(avgSuccessfulSoda - avgFailedSoda) > 0.1) {
                        insights.push({
                            component: 'soda',
                            finding: avgSuccessfulSoda > avgFailedSoda ? 
                                'ŸàÿµŸÅÿßÿ™ŸÉ ÿßŸÑŸÜÿßÿ¨ÿ≠ÿ© ÿ™ÿ≥ÿ™ÿÆÿØŸÖ ÿµŸàÿØÿß ÿ£ŸÉÿ´ÿ±' :
                                'ŸàÿµŸÅÿßÿ™ŸÉ ÿßŸÑŸÜÿßÿ¨ÿ≠ÿ© ÿ™ÿ≥ÿ™ÿÆÿØŸÖ ÿµŸàÿØÿß ÿ£ŸÇŸÑ',
                            personalOptimal: avgSuccessfulSoda.toFixed(2),
                            confidence: 'high'
                        });
                    }
                }
            }
            
            // ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿØŸÇŸäŸÇ
            if (successful.length >= 2) {
                const avgSuccessfulFlour = successful.reduce((sum, r) => {
                    const total = r.flour + r.butter + r.sugar + r.honey + r.eggs + r.soda;
                    return sum + (r.flour / total) * 100;
                }, 0) / successful.length;
                
                if (Math.abs(avgSuccessfulFlour - SCIENTIFIC_RANGES.flour.ideal) > 2) {
                    insights.push({
                        component: 'flour',
                        finding: `ÿ™ŸÅÿ∂ŸÑ ŸÜÿ≥ÿ®ÿ© ÿØŸÇŸäŸÇ ${avgSuccessfulFlour.toFixed(1)}% ÿ®ÿØŸÑÿßŸã ŸÖŸÜ ${SCIENTIFIC_RANGES.flour.ideal}% ÿßŸÑŸÖÿ´ÿßŸÑŸäÿ©`,
                        personalOptimal: avgSuccessfulFlour.toFixed(1),
                        confidence: 'medium'
                    });
                }
            }
            
            return {
                insights: insights,
                sampleSize: successful.length + failed.length,
                successfulCount: successful.length,
                failedCount: failed.length
            };
        }
    
        // ===== ÿØŸàÿßŸÑ ÿßŸÑŸÖÿ≥ÿßÿπÿØÿ© ÿßŸÑÿπÿßŸÖÿ© =====
        
        /**
         * ÿ™ÿ≠ŸÖŸäŸÑ ŸàÿµŸÅÿ© ŸÖŸÜ ÿßŸÑŸÖŸÉÿ™ÿ®ÿ©
         */
        window.loadRecipe = function(index) {
            if (index < 0 || index >= savedRecipes.length) return;
            
            const recipe = savedRecipes[index];
            
            const flourInput = document.getElementById('flour');
            const butterInput = document.getElementById('butter');
            const sugarInput = document.getElementById('sugar');
            const honeyInput = document.getElementById('honey');
            const eggsInput = document.getElementById('eggs');
            const sodaInput = document.getElementById('soda');
            
            if (flourInput) flourInput.value = recipe.flour;
            if (butterInput) butterInput.value = recipe.butter;
            if (sugarInput) sugarInput.value = recipe.sugar;
            if (honeyInput) honeyInput.value = recipe.honey;
            if (eggsInput) eggsInput.value = recipe.eggs;
            if (sodaInput) sodaInput.value = recipe.soda;
            
            analyzeRecipe();
            alert(`‚úÖ ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ "${recipe.name}"`);
            
            // ÿßŸÑÿ™ÿ®ÿØŸäŸÑ ÿ•ŸÑŸâ ÿ™ÿ®ŸàŸäÿ® ÿßŸÑŸÖÿ≠ŸÑŸÑ
            const analyzerTab = document.querySelector('[data-tab="analyzer"]');
            if (analyzerTab) {
                analyzerTab.click();
            }
        };
    
        /**
         * ÿ≠ÿ∞ŸÅ ŸàÿµŸÅÿ© ŸÖŸÜ ÿßŸÑŸÖŸÉÿ™ÿ®ÿ©
         */
        window.deleteRecipe = function(index) {
            if (index < 0 || index >= savedRecipes.length) return;
            
            const recipe = savedRecipes[index];
            const confirmDelete = confirm(`ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ "${recipe.name}"ÿü\n\nŸáÿ∞ÿß ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ° ŸÑÿß ŸäŸÖŸÉŸÜ ÿßŸÑÿ™ÿ±ÿßÿ¨ÿπ ÿπŸÜŸá.`);
            
            if (confirmDelete) {
                savedRecipes.splice(index, 1);
                saveRecipesToStorage();
                updateLibraryTab();
                alert('‚úÖ ÿ™ŸÖ ÿßŸÑÿ≠ÿ∞ŸÅ ÿ®ŸÜÿ¨ÿßÿ≠');
            }
        };
    
        /**
         * ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÜŸÖŸàÿ∞ÿ¨
         */
        function resetForm() {
            const flourInput = document.getElementById('flour');
            const butterInput = document.getElementById('butter');
            const sugarInput = document.getElementById('sugar');
            const honeyInput = document.getElementById('honey');
            const eggsInput = document.getElementById('eggs');
            const sodaInput = document.getElementById('soda');
            
            if (flourInput) flourInput.value = '500';
            if (butterInput) butterInput.value = '120';
            if (sugarInput) sugarInput.value = '200';
            if (honeyInput) honeyInput.value = '100';
            if (eggsInput) eggsInput.value = '95';
            if (sodaInput) sodaInput.value = '5.5';
            
            analyzeRecipe();
        }
    
        // ===== ÿ≠ŸÑŸàŸÑ ÿßŸÑŸÖÿ¥ÿßŸÉŸÑ =====
        
        function showSolution(problem) {
            const solutions = {
                sticky: {
                    title: "ÿ≠ŸÑŸàŸÑ ÿßŸÑÿπÿ¨ŸäŸÜÿ© ÿßŸÑŸÑÿ≤ÿ¨ÿ©",
                    causes: [
                        "ŸÜŸÇÿµ ÿßŸÑÿØŸÇŸäŸÇ ŸÜÿ≥ÿ®ÿ© ÿ•ŸÑŸâ ÿßŸÑÿ≥Ÿàÿßÿ¶ŸÑ",
                        "ÿ≤ŸäÿßÿØÿ© ÿßŸÑÿπÿ≥ŸÑ ÿ£Ÿà ÿßŸÑÿ≥ŸÉÿ± ÿ®ÿ¥ŸÉŸÑ ŸÖŸÅÿ±ÿ∑", 
                        "ÿπÿØŸÖ ÿ™ÿ®ÿ±ŸäÿØ ÿßŸÑÿπÿ¨ŸäŸÜÿ© ŸÉÿßŸÅŸäÿ©",
                        "ŸÜŸÇÿµ ÿßŸÑÿØŸáŸàŸÜ (ÿßŸÑÿ≤ÿ®ÿØÿ©)"
                    ],
                    solutions: [
                        "ÿ£ÿ∂ŸÅ 10-15% ÿØŸÇŸäŸÇ ÿ•ÿ∂ÿßŸÅŸä",
                        "ÿ®ÿ±ÿØ ÿßŸÑÿπÿ¨ŸäŸÜÿ© 60 ÿØŸÇŸäŸÇÿ© ÿ®ÿØŸÑÿßŸã ŸÖŸÜ 30",
                        "ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿØŸÇŸäŸÇÿßŸã ÿ•ÿ∂ÿßŸÅŸäÿßŸã ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑŸÅÿ±ÿØ",
                        "ÿ≤ÿØ ÿßŸÑÿ≤ÿ®ÿØÿ© ÿ®ŸÜÿ≥ÿ®ÿ© 5% ŸÑÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑŸÇŸàÿßŸÖ"
                    ],
                    scientific: "ÿßŸÑÿπÿ≥ŸÑ ÿ∫ŸÜŸä ÿ®ÿßŸÑŸÅÿ±ŸÉÿ™Ÿàÿ≤ ÿßŸÑÿ∞Ÿä Ÿäÿ≤ŸäÿØ ÿßŸÑŸÑÿ≤Ÿàÿ¨ÿ©. ÿßŸÑÿ™ÿ®ÿ±ŸäÿØ ŸäÿµŸÑÿ® ÿßŸÑÿØŸáŸàŸÜ ŸàŸäŸÇŸÑŸÑ ÿßŸÑÿßŸÑÿ™ÿµÿßŸÇ."
                },
                dry: {
                    title: "ÿ≠ŸÑŸàŸÑ ÿßŸÑÿπÿ¨ŸäŸÜÿ© ÿßŸÑÿ¨ÿßŸÅÿ©",
                    causes: [
                        "ÿ≤ŸäÿßÿØÿ© ÿßŸÑÿØŸÇŸäŸÇ ÿ®ÿ¥ŸÉŸÑ ŸÖŸÅÿ±ÿ∑",
                        "ŸÜŸÇÿµ ÿßŸÑÿπÿ≥ŸÑ ÿ£Ÿà ÿßŸÑÿ≥ŸÉÿ±",
                        "ŸÜŸÇÿµ ÿßŸÑÿ®Ÿäÿ∂ ÿ£Ÿà ÿßŸÑÿ≤ÿ®ÿØÿ©",
                        "ÿÆÿ®ÿ≤ ÿ≤ÿßÿ¶ÿØ ÿπŸÜ ÿßŸÑŸÑÿßÿ≤ŸÖ"
                    ],
                    solutions: [
                        "ŸÇŸÑŸÑ ÿßŸÑÿØŸÇŸäŸÇ ÿ®ŸÜÿ≥ÿ®ÿ© 10-15%",
                        "ÿ≤ÿØ ÿßŸÑÿπÿ≥ŸÑ ÿ®ŸÜÿ≥ÿ®ÿ© 5-8% ŸÑŸÑÿ™ÿ±ÿ∑Ÿäÿ®",
                        "ÿ£ÿ∂ŸÅ ÿ®Ÿäÿ∂ÿ© ÿ•ÿ∂ÿßŸÅŸäÿ© ÿ£Ÿà ÿ≤ÿ®ÿØÿ©",
                        "ŸÇŸÑŸÑ ŸàŸÇÿ™ ÿßŸÑÿÆÿ®ÿ≤ 1-2 ÿØŸÇŸäŸÇÿ©"
                    ],
                    scientific: "ÿßŸÑÿπÿ≥ŸÑ ŸàÿßŸÑÿ≥ŸÉÿ± ŸÖŸàÿßÿØ ÿßÿ≥ÿ™ÿ±ÿ∑ÿßÿ®Ÿäÿ© ÿ™ŸÖÿ™ÿµ ÿßŸÑÿ±ÿ∑Ÿàÿ®ÿ© ŸÖŸÜ ÿßŸÑÿ¨Ÿà. ÿßŸÑÿ®Ÿäÿ∂ Ÿäÿ≤ŸäÿØ ÿßŸÑÿ±ÿ∑Ÿàÿ®ÿ© ŸàÿßŸÑÿ™ŸÖÿßÿ≥ŸÉ."
                },
                hard: {
                    title: "ÿ≠ŸÑŸàŸÑ ÿßŸÑÿ∑ÿ®ŸÇÿßÿ™ ÿßŸÑŸÇÿßÿ≥Ÿäÿ©", 
                    causes: [
                        "ÿ≤ŸäÿßÿØÿ© ÿßŸÑÿØŸÇŸäŸÇ ÿ®ÿ¥ŸÉŸÑ ŸÉÿ®Ÿäÿ±",
                        "ŸÜŸÇÿµ ÿßŸÑÿØŸáŸàŸÜ (ÿßŸÑÿ≤ÿ®ÿØÿ©)",
                        "ŸÜŸÇÿµ ÿßŸÑÿ≥ŸÉÿ±Ÿäÿßÿ™ ÿßŸÑŸÖÿ±ÿ∑ÿ®ÿ©",
                        "ÿÆÿ®ÿ≤ ÿ∑ŸàŸäŸÑ ÿ£Ÿà ÿ≠ÿ±ÿßÿ±ÿ© ÿπÿßŸÑŸäÿ©"
                    ],
                    solutions: [
                        "ŸÇŸÑŸÑ ÿßŸÑÿØŸÇŸäŸÇ 10% Ÿàÿßÿ≥ÿ™ÿ®ÿØŸÑ ÿ®ÿßŸÑÿ≥Ÿàÿßÿ¶ŸÑ",
                        "ÿ≤ÿØ ÿßŸÑÿ≤ÿ®ÿØÿ© 8-12% ŸÑŸÑÿ∑ÿ±ÿßŸàÿ©",
                        "ÿ≤ÿØ ÿßŸÑÿπÿ≥ŸÑ 5% ŸÑŸÑÿ™ÿ±ÿ∑Ÿäÿ®",
                        "ÿßÿÆÿ®ÿ≤ ÿπŸÑŸâ 180¬∞C ÿ®ÿØŸÑÿßŸã ŸÖŸÜ 190¬∞C"
                    ],
                    scientific: "ÿßŸÑÿØŸáŸàŸÜ ÿ™ŸÇÿ∑ÿπ ÿ¥ÿ®ŸÉÿ© ÿßŸÑÿ¨ŸÑŸàÿ™ŸäŸÜ. ÿßŸÑÿ≥ŸÉÿ±Ÿäÿßÿ™ ÿ™ŸÖŸÜÿπ ÿ™ŸÉŸàŸäŸÜ ÿ®ŸÜŸäÿ© ÿµŸÑÿ®ÿ©."
                },
                bitter: {
                    title: "ÿ≠ŸÑŸàŸÑ ÿßŸÑÿ∑ÿπŸÖ ÿßŸÑŸÇŸÑŸàŸä",
                    causes: [
                        "ÿ≤ŸäÿßÿØÿ© ÿµŸàÿØÿß ÿßŸÑÿÆÿ®ÿ≤",
                        "ÿπÿ≥ŸÑ ÿ∫Ÿäÿ± ŸÉÿßŸÅ ŸÑŸÖÿπÿßÿØŸÑÿ© ÿßŸÑÿµŸàÿØÿß", 
                        "ÿ™ÿ≥ÿÆŸäŸÜ ÿ≤ÿßÿ¶ÿØ ŸÑŸÑÿπÿ≥ŸÑ ŸÖÿπ ÿßŸÑÿµŸàÿØÿß",
                        "ÿπÿ≥ŸÑ ŸÖŸÜÿÆŸÅÿ∂ ÿßŸÑÿ≠ŸÖŸàÿ∂ÿ©"
                    ],
                    solutions: [
                        "ŸÇŸÑŸÑ ÿßŸÑÿµŸàÿØÿß ÿ®ŸÜÿ≥ÿ®ÿ© 20-30%",
                        "ÿ≤ÿØ ÿßŸÑÿπÿ≥ŸÑ 10-15% ŸÑŸÑŸÖÿπÿßÿØŸÑÿ©",
                        "ÿ™ÿ¨ŸÜÿ® ÿ™ÿ≥ÿÆŸäŸÜ ÿßŸÑÿπÿ≥ŸÑ ŸÅŸàŸÇ 120¬∞C",
                        "ÿßÿÆÿ™ÿ± ÿπÿ≥ŸÑ ÿπÿßŸÑŸä ÿßŸÑÿ¨ŸàÿØÿ© Ÿàÿ≠ŸÖÿ∂Ÿä"
                    ],
                    scientific: "ÿßŸÑÿµŸàÿØÿß ÿßŸÑÿ≤ÿßÿ¶ÿØÿ© ÿ™ÿ™ÿ≠ŸàŸÑ ÿ•ŸÑŸâ ŸÉÿ±ÿ®ŸàŸÜÿßÿ™ ÿßŸÑÿµŸàÿØŸäŸàŸÖ ÿ∞ÿßÿ™ ÿßŸÑÿ∑ÿπŸÖ ÿßŸÑŸÇŸÑŸàŸä. ÿßŸÑÿπÿ≥ŸÑ ÿßŸÑÿ≠ŸÖÿ∂Ÿä ŸäÿπÿßÿØŸÑ Ÿáÿ∞ÿß ÿßŸÑÿ™ÿ£ÿ´Ÿäÿ±."
                },
                pale: {
                    title: "ÿ≠ŸÑŸàŸÑ ÿßŸÑŸÑŸàŸÜ ÿßŸÑÿ®ÿßŸáÿ™",
                    causes: [
                        "ŸÜŸÇÿµ ÿµŸàÿØÿß ÿßŸÑÿÆÿ®ÿ≤",
                        "ÿπÿ≥ŸÑ ÿ∫Ÿäÿ± ŸÉÿßŸÅ ŸÑÿ™ŸÅÿßÿπŸÑ ŸÖÿßŸäÿßÿ±ÿØ",
                        "ÿ≠ÿ±ÿßÿ±ÿ© ÿÆÿ®ÿ≤ ŸÖŸÜÿÆŸÅÿ∂ÿ©",
                        "ŸàŸÇÿ™ ÿÆÿ®ÿ≤ ÿ∫Ÿäÿ± ŸÉÿßŸÅ"
                    ],
                    solutions: [
                        "ÿ≤ÿØ ÿßŸÑÿµŸàÿØÿß ÿ®ŸÜÿ≥ÿ®ÿ© 25-40%",
                        "ÿ≤ÿØ ÿßŸÑÿπÿ≥ŸÑ 8-12% ŸÑŸÑÿ™ŸÑŸàŸäŸÜ",
                        "ÿßÿÆÿ®ÿ≤ ÿπŸÑŸâ 190-200¬∞C",
                        "ÿ≤ÿØ ŸàŸÇÿ™ ÿßŸÑÿÆÿ®ÿ≤ 1-2 ÿØŸÇŸäŸÇÿ©"
                    ],
                    scientific: "ÿßŸÑÿµŸàÿØÿß ÿ™ÿ±ŸÅÿπ ÿßŸÑŸÄ pH ŸÖŸÖÿß Ÿäÿ≥ÿ±ÿπ ÿ™ŸÅÿßÿπŸÑ ŸÖÿßŸäÿßÿ±ÿØ. ÿßŸÑÿπÿ≥ŸÑ ŸäŸàŸÅÿ± ÿ≥ŸÉÿ±Ÿäÿßÿ™ ŸÖÿÆÿ™ÿ≤ŸÑÿ© ŸÑŸÑÿ™ŸÑŸàŸäŸÜ."
                }
            };
    
            const solution = solutions[problem];
            if (!solution) return;
            
            let html = `
                <h3>${solution.title}</h3>
                <div class="alert alert-info">
                    <strong>ÿßŸÑÿ£ÿ≥ÿ®ÿßÿ® ÿßŸÑŸÖÿ≠ÿ™ŸÖŸÑÿ©:</strong>
                    <ul style="padding-right: 20px; margin: 10px 0;">
                        ${solution.causes.map(cause => `<li>${cause}</li>`).join('')}
                    </ul>
                </div>
                
                <div class="solution-card">
                    <strong>üõ†Ô∏è ÿßŸÑÿ≠ŸÑŸàŸÑ ÿßŸÑŸÖŸÇÿ™ÿ±ÿ≠ÿ©:</strong>
                    <ul style="padding-right: 20px; margin: 10px 0;">
                        ${solution.solutions.map(sol => `<li>${sol}</li>`).join('')}
                    </ul>
                </div>
                
                <div class="alert alert-success">
                    <strong>üß™ ÿßŸÑÿ£ÿ≥ÿßÿ≥ ÿßŸÑÿπŸÑŸÖŸä:</strong> ${solution.scientific}
                </div>
            `;
            
            // ÿ•ÿ∂ÿßŸÅÿ© ŸÜÿµÿßÿ¶ÿ≠ ÿ¥ÿÆÿµŸäÿ© ÿ•ÿ∞ÿß ŸÉÿßŸÜÿ™ ÿßŸÑŸàÿµŸÅÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ© ŸÖŸàÿ¨ŸàÿØÿ©
            if (currentRecipe) {
                html += `
                    <div class="alert alert-warning">
                        <strong>üìä ÿ™ÿ∑ÿ®ŸäŸÇ ÿπŸÑŸâ ŸàÿµŸÅÿ™ŸÉ:</strong>
                        ${getPersonalizedAdvice(problem, currentRecipe)}
                    </div>
                `;
            }
    
            const solutionContent = document.getElementById('solution-content');
            if (solutionContent) {
                solutionContent.innerHTML = html;
            }
            
            const step1 = document.getElementById('step1');
            const step2 = document.getElementById('step2');
            if (step1) step1.classList.remove('active');
            if (step2) step2.classList.add('active');
        }
    
        /**
         * ŸÜÿµÿßÿ¶ÿ≠ ÿ¥ÿÆÿµŸäÿ© ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿßŸÑŸÖÿ¥ŸÉŸÑÿ©
         */
        function getPersonalizedAdvice(problem, recipe) {
            const total = recipe.total;
            
            switch(problem) {
                case 'sticky':
                    const addFlour = (total * 0.12).toFixed(1);
                    return `ÿ£ÿ∂ŸÅ ${addFlour}ÿ∫ ÿØŸÇŸäŸÇ (12%) ŸÑÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑŸÇŸàÿßŸÖ.`;
                    
                case 'dry':
                    const addHoney = (total * 0.07).toFixed(1);
                    return `ÿ£ÿ∂ŸÅ ${addHoney}ÿ∫ ÿπÿ≥ŸÑ (7%) ŸÑÿ≤ŸäÿßÿØÿ© ÿßŸÑÿ±ÿ∑Ÿàÿ®ÿ©.`;
                    
                case 'hard':
                    const addButter = (total * 0.10).toFixed(1);
                    return `ÿ≤ÿØ ÿßŸÑÿ≤ÿ®ÿØÿ© ÿ®ŸÖŸÇÿØÿßÿ± ${addButter}ÿ∫ (10%) ŸÑŸÑÿ∑ÿ±ÿßŸàÿ©.`;
                    
                case 'bitter':
                    const reduceSoda = (recipe.soda * 0.25).toFixed(1);
                    return `ŸÇŸÑŸÑ ÿßŸÑÿµŸàÿØÿß ÿ®ŸÖŸÇÿØÿßÿ± ${reduceSoda}ÿ∫ (25%) ŸÑŸÑÿ™ÿÆŸÑÿµ ŸÖŸÜ ÿßŸÑÿ∑ÿπŸÖ ÿßŸÑŸÇŸÑŸàŸä.`;
                    
                case 'pale':
                    const addSoda = (recipe.soda * 0.35).toFixed(1);
                    return `ÿ≤ÿØ ÿßŸÑÿµŸàÿØÿß ÿ®ŸÖŸÇÿØÿßÿ± ${addSoda}ÿ∫ (35%) ŸÑÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑŸÑŸàŸÜ.`;
                    
                default:
                    return "ÿ≠ŸÑŸÑ ŸàÿµŸÅÿ™ŸÉ ŸÅŸä ÿ™ÿ®ŸàŸäÿ® ÿßŸÑŸÖÿ≠ŸÑŸÑ ÿßŸÑÿπŸÑŸÖŸä ŸÑŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ŸÜÿµÿßÿ¶ÿ≠ ŸÖÿÆÿµÿµÿ©.";
            }
        }
    
        // ===== ÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑÿ™ŸáŸäÿ¶ÿ© ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ© =====
        console.log('%c‚úÖ ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ÿ≠ÿßÿ≥ÿ®ÿ© Medovik ÿßŸÑÿπŸÑŸÖŸäÿ© ÿ®ŸÜÿ¨ÿßÿ≠!', 'color: #38a169; font-size: 16px; font-weight: bold;');
        console.log('%cüî¨ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿπÿßÿØŸÑÿßÿ™ ÿßŸÑÿ≠ÿ±ÿßÿ±Ÿäÿ© ÿµÿ≠Ÿäÿ≠ÿ© 100%', 'color: #3182ce; font-size: 14px;');
        console.log('%cüìä ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ÿÆÿ∑ÿßÿ° ÿßŸÑÿ®ÿ±ŸÖÿ¨Ÿäÿ© ÿ™ŸÖ ÿ•ÿµŸÑÿßÿ≠Ÿáÿß', 'color: #38a169; font-size: 14px;');
        
    </script>
</body>
</html>